"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.AV=e()}}(function(){var e;return function t(e,n,r){function i(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){},{}],2:[function(e,t,n){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};t.exports=r},{}],3:[function(e,t,n){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],s=0;4>s;s++)8*r+6*s<=8*t.length?n.push(e.charAt(i>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()},{}],4:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))}),e.splice(s,0,r),e}function s(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function a(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=s,n.formatArgs=i,n.save=o,n.load=a,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":5}],5:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,s=t-(c||t);e.diff=s,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var o=Array.prototype.slice.call(arguments);o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var a=0;o[0]=o[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var i=n.formatters[r];if("function"==typeof i){var s=o[a];t=i.call(e,s),o.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(o=n.formatArgs.apply(e,o));var u=i.log||n.log||console.log.bind(console);u.apply(e,o)}t.enabled=!1,i.enabled=!0;var s=n.enabled(e)?i:t;return s.namespace=e,s}function s(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function o(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=u,n.disable=o,n.enable=s,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,l=0},{ms:9}],6:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],7:[function(e,t,n){!function(e){var r={},i={};r.length=0,r.getItem=function(e){return i[e]||null},r.setItem=function(e,t){"undefined"==typeof t?r.removeItem(e):(i.hasOwnProperty(e)||r.length++,i[e]=""+t)},r.removeItem=function(e){i.hasOwnProperty(e)&&(delete i[e],r.length--)},r.key=function(e){return Object.keys(i)[e]||null},r.clear=function(){i={},r.length=0},"object"===("undefined"==typeof n?"undefined":_typeof(n))?t.exports=r:e.localStorageMemory=r}(this)},{}],8:[function(e,t,n){!function(){var n=e("crypt"),r=e("charenc").utf8,i=e("is-buffer"),s=e("charenc").bin,o=function a(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var o=n.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,h=-1732584194,f=271733878,d=0;d<o.length;d++)o[d]=16711935&(o[d]<<8|o[d]>>>24)|4278255360&(o[d]<<24|o[d]>>>8);o[u>>>5]|=128<<u%32,o[(u+64>>>9<<4)+14]=u;for(var p=a._ff,_=a._gg,m=a._hh,v=a._ii,d=0;d<o.length;d+=16){var g=c,b=l,y=h,w=f;c=p(c,l,h,f,o[d+0],7,-680876936),f=p(f,c,l,h,o[d+1],12,-389564586),h=p(h,f,c,l,o[d+2],17,606105819),l=p(l,h,f,c,o[d+3],22,-1044525330),c=p(c,l,h,f,o[d+4],7,-176418897),f=p(f,c,l,h,o[d+5],12,1200080426),h=p(h,f,c,l,o[d+6],17,-1473231341),l=p(l,h,f,c,o[d+7],22,-45705983),c=p(c,l,h,f,o[d+8],7,1770035416),f=p(f,c,l,h,o[d+9],12,-1958414417),h=p(h,f,c,l,o[d+10],17,-42063),l=p(l,h,f,c,o[d+11],22,-1990404162),c=p(c,l,h,f,o[d+12],7,1804603682),f=p(f,c,l,h,o[d+13],12,-40341101),h=p(h,f,c,l,o[d+14],17,-1502002290),l=p(l,h,f,c,o[d+15],22,1236535329),c=_(c,l,h,f,o[d+1],5,-165796510),f=_(f,c,l,h,o[d+6],9,-1069501632),h=_(h,f,c,l,o[d+11],14,643717713),l=_(l,h,f,c,o[d+0],20,-373897302),c=_(c,l,h,f,o[d+5],5,-701558691),f=_(f,c,l,h,o[d+10],9,38016083),h=_(h,f,c,l,o[d+15],14,-660478335),l=_(l,h,f,c,o[d+4],20,-405537848),c=_(c,l,h,f,o[d+9],5,568446438),f=_(f,c,l,h,o[d+14],9,-1019803690),h=_(h,f,c,l,o[d+3],14,-187363961),l=_(l,h,f,c,o[d+8],20,1163531501),c=_(c,l,h,f,o[d+13],5,-1444681467),f=_(f,c,l,h,o[d+2],9,-51403784),h=_(h,f,c,l,o[d+7],14,1735328473),l=_(l,h,f,c,o[d+12],20,-1926607734),c=m(c,l,h,f,o[d+5],4,-378558),f=m(f,c,l,h,o[d+8],11,-2022574463),h=m(h,f,c,l,o[d+11],16,1839030562),l=m(l,h,f,c,o[d+14],23,-35309556),c=m(c,l,h,f,o[d+1],4,-1530992060),f=m(f,c,l,h,o[d+4],11,1272893353),h=m(h,f,c,l,o[d+7],16,-155497632),l=m(l,h,f,c,o[d+10],23,-1094730640),c=m(c,l,h,f,o[d+13],4,681279174),f=m(f,c,l,h,o[d+0],11,-358537222),h=m(h,f,c,l,o[d+3],16,-722521979),l=m(l,h,f,c,o[d+6],23,76029189),c=m(c,l,h,f,o[d+9],4,-640364487),f=m(f,c,l,h,o[d+12],11,-421815835),h=m(h,f,c,l,o[d+15],16,530742520),l=m(l,h,f,c,o[d+2],23,-995338651),c=v(c,l,h,f,o[d+0],6,-198630844),f=v(f,c,l,h,o[d+7],10,1126891415),h=v(h,f,c,l,o[d+14],15,-1416354905),l=v(l,h,f,c,o[d+5],21,-57434055),c=v(c,l,h,f,o[d+12],6,1700485571),f=v(f,c,l,h,o[d+3],10,-1894986606),h=v(h,f,c,l,o[d+10],15,-1051523),l=v(l,h,f,c,o[d+1],21,-2054922799),c=v(c,l,h,f,o[d+8],6,1873313359),f=v(f,c,l,h,o[d+15],10,-30611744),h=v(h,f,c,l,o[d+6],15,-1560198380),l=v(l,h,f,c,o[d+13],21,1309151649),c=v(c,l,h,f,o[d+4],6,-145523070),f=v(f,c,l,h,o[d+11],10,-1120210379),h=v(h,f,c,l,o[d+2],15,718787259),l=v(l,h,f,c,o[d+9],21,-343485551),c=c+g>>>0,l=l+b>>>0,h=h+y>>>0,f=f+w>>>0}return n.endian([c,l,h,f])};o._ff=function(e,t,n,r,i,s,o){var a=e+(t&n|~t&r)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},o._gg=function(e,t,n,r,i,s,o){var a=e+(t&r|n&~r)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},o._hh=function(e,t,n,r,i,s,o){var a=e+(t^n^r)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},o._ii=function(e,t,n,r,i,s,o){var a=e+(n^(t|~r))+(i>>>0)+o;return(a<<s|a>>>32-s)+t},o._blocksize=16,o._digestsize=16,t.exports=function(e,t){if("undefined"!=typeof e){var r=n.wordsToBytes(o(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):n.bytesToHex(r)}}}()},{charenc:2,crypt:3,"is-buffer":6}],9:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=c?Math.round(e/c)+"h":e>=u?Math.round(e/u)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function s(e){return o(e,l,"day")||o(e,c,"hour")||o(e,u,"minute")||o(e,a,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,u=60*a,c=60*u,l=24*c,h=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?s(e):i(e)}},{}],10:[function(e,t,n){function r(){l&&a&&(l=!1,a.length?c=a.concat(c):h=-1,c.length&&i())}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a&&a[h].run();h=-1,t=c.length}a=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var a,u=t.exports={},c=[],l=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new s(e,t)),1!==c.length||l||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],11:[function(e,t,n){t.exports=function(e,t,n){for(var r=0,i=e.length,s=3==arguments.length?n:e[r++];i>r;)s=t.call(null,s,e[r],++r,e);return s}},{}],12:[function(e,t,n){function r(){}function i(e){if(!g(e))return e;var t=[];for(var n in e)null!=e[n]&&s(t,n,e[n]);return t.join("&")}function s(e,t,n){if(Array.isArray(n))return n.forEach(function(n){s(e,t,n)});if(g(n))for(var r in n)s(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}function o(e){for(var t,n,r={},i=e.split("&"),s=0,o=i.length;o>s;++s)t=i[s],n=t.indexOf("="),-1==n?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function a(e){var t,n,r,i,s=e.split(/\r?\n/),o={};s.pop();for(var a=0,u=s.length;u>a;++a)n=s[a],t=n.indexOf(":"),r=n.slice(0,t).toLowerCase(),i=y(n.slice(t+1)),o[r]=i;return o}function u(e){return/[\/+]json\b/.test(e)}function c(e){return e.split(/ *; */).shift()}function l(e){return m(e.split(/ *; */),function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})}function h(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function f(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new h(n)}catch(r){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=r,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}if(n.emit("response",t),e)return n.callback(e,t);if(t.status>=200&&t.status<300)return n.callback(e,t);var i=new Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,n.callback(i,t)})}function d(e,t){var n=b("DELETE",e);return t&&n.end(t),n}var p,_=e("emitter"),m=e("reduce"),v=e("./request-base"),g=e("./is-object");p="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var b=t.exports=e("./request").bind(null,f);b.getXHR=function(){if(!(!p.XMLHttpRequest||p.location&&"file:"==p.location.protocol&&p.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var y="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=i,b.parseString=o,b.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":o,"application/json":JSON.parse},h.prototype.get=function(e){return this.header[e.toLowerCase()]},h.prototype._setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=c(t);var n=l(t);for(var r in n)this[r]=n[r]},h.prototype._parseBody=function(e){var t=b.parse[this.type];return!t&&u(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},h.prototype._setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},h.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},b.Response=h,_(f.prototype);for(var w in v)f.prototype[w]=v[w];f.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},f.prototype.responseType=function(e){return this._responseType=e,this},f.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},f.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);break;case"auto":this.username=e,this.password=t}return this},f.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},f.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},f.prototype._getFormData=function(){return this._formData||(this._formData=new p.FormData),this._formData},f.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},f.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},f.prototype._timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},f.prototype._appendQueryString=function(){var e=this._query.join("&");e&&(this.url+=~this.url.indexOf("?")?"&"+e:"?"+e)},f.prototype.end=function(e){var t=this,n=this.xhr=b.getXHR(),i=this._timeout,s=this._formData||this._data;this._callback=e||r,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(r){e=0}if(0==e){if(t.timedout)return t._timeoutError();if(t._aborted)return;return t.crossDomainError()}t.emit("end")}};var o=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=o);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=o)}catch(a){}if(i&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},i)),this._appendQueryString(),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof s&&!this._isHost(s)){var c=this._header["content-type"],l=this._serializer||b.serialize[c?c.split(";")[0]:""];!l&&u(c)&&(l=b.serialize["application/json"]),l&&(s=l(s))}for(var h in this.header)null!=this.header[h]&&n.setRequestHeader(h,this.header[h]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof s?s:null),this},b.Request=f,b.get=function(e,t,n){var r=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.head=function(e,t,n){var r=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.options=function(e,t,n){var r=b("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.del=d,b["delete"]=d,b.patch=function(e,t,n){var r=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.post=function(e,t,n){var r=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.put=function(e,t,n){var r=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},{"./is-object":13,"./request":15,"./request-base":14,emitter:16,reduce:11}],13:[function(e,t,n){function r(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))}t.exports=r},{}],14:[function(e,t,n){var r=e("./is-object");n.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.parse=function(e){return this._parser=e,this},n.serialize=function(e){return this._serializer=e,this},n.timeout=function(e){return this._timeout=e,this},n.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},n.use=function(e){return e(this),this},n.get=function(e){return this._header[e.toLowerCase()]},n.getHeader=n.get,n.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.field=function(e,t){return this._getFormData().append(e,t),this},n.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.withCredentials=function(){return this._withCredentials=!0,this},n.redirects=function(e){return this._maxRedirects=e,this},n.toJSON=function(){return{method:this.method,url:this.url,data:this._data}},n._isHost=function(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},n.send=function(e){var t=r(e),n=this._header["content-type"];if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)}},{"./is-object":13}],15:[function(e,t,n){function r(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}t.exports=r},{}],16:[function(e,t,n){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}"undefined"!=typeof t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],17:[function(t,n,r){(function(){function t(e){function t(t,n,r,i,s,o){for(;s>=0&&o>s;s+=e){var a=i?i[s]:s;r=n(r,t[a],a,t)}return r}return function(n,r,i,s){r=A(r,s,4);var o=!N(n)&&w.keys(n),a=(o||n).length,u=e>0?0:a-1;return arguments.length<3&&(i=n[o?o[u]:u],u+=e),t(n,r,i,o,u,a)}}function i(e){return function(t,n,r){n=x(n,r);for(var i=E(t),s=e>0?0:i-1;s>=0&&i>s;s+=e)if(n(t[s],s,t))return s;return-1}}function s(e,t,n){return function(r,i,s){var o=0,a=E(r);if("number"==typeof s)e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(d.call(r,o,a),w.isNaN),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&a>s;s+=e)if(r[s]===i)return s;return-1}}function o(e,t){var n=I.length,r=e.constructor,i=w.isFunction(r)&&r.prototype||l,s="constructor";for(w.has(e,s)&&!w.contains(t,s)&&t.push(s);n--;)s=I[n],s in e&&e[s]!==i[s]&&!w.contains(t,s)&&t.push(s)}var a=this,u=a._,c=Array.prototype,l=Object.prototype,h=Function.prototype,f=c.push,d=c.slice,p=l.toString,_=l.hasOwnProperty,m=Array.isArray,v=Object.keys,g=h.bind,b=Object.create,y=function(){},w=function W(e){return e instanceof W?e:this instanceof W?void(this._wrapped=e):new W(e)};"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=w),r._=w):a._=w,w.VERSION="1.8.3";var A=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return null==e?w.identity:w.isFunction(e)?A(e,t,n):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return x(e,t,1/0)};var O=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;a>u;u++){var c=o[u];t&&void 0!==n[c]||(n[c]=s[c])}return n}},S=function(e){if(!w.isObject(e))return{};if(b)return b(e);y.prototype=e;var t=new y;return y.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},j=Math.pow(2,53)-1,E=C("length"),N=function(e){var t=E(e);return"number"==typeof t&&t>=0&&j>=t};w.each=w.forEach=function(e,t,n){t=A(t,n);var r,i;if(N(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var s=w.keys(e);for(r=0,i=s.length;i>r;r++)t(e[s[r]],s[r],e)}return e},w.map=w.collect=function(e,t,n){t=x(t,n);for(var r=!N(e)&&w.keys(e),i=(r||e).length,s=Array(i),o=0;i>o;o++){var a=r?r[o]:o;s[o]=t(e[a],a,e)}return s},w.reduce=w.foldl=w.inject=t(1),w.reduceRight=w.foldr=t(-1),w.find=w.detect=function(e,t,n){var r;return r=N(e)?w.findIndex(e,t,n):w.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},w.filter=w.select=function(e,t,n){var r=[];return t=x(t,n),w.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},w.reject=function(e,t,n){return w.filter(e,w.negate(x(t)),n)},w.every=w.all=function(e,t,n){t=x(t,n);for(var r=!N(e)&&w.keys(e),i=(r||e).length,s=0;i>s;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0},w.some=w.any=function(e,t,n){t=x(t,n);for(var r=!N(e)&&w.keys(e),i=(r||e).length,s=0;i>s;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,n,r){return N(e)||(e=w.values(e)),("number"!=typeof n||r)&&(n=0),w.indexOf(e,t,n)>=0},w.invoke=function(e,t){var n=d.call(arguments,2),r=w.isFunction(t);return w.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,n){var r,i,s=-(1/0),o=-(1/0);if(null==t&&null!=e){e=N(e)?e:w.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],r>s&&(s=r)}else t=x(t,n),w.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-(1/0)&&s===-(1/0))&&(s=e,o=i)});return s},w.min=function(e,t,n){var r,i,s=1/0,o=1/0;if(null==t&&null!=e){e=N(e)?e:w.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],s>r&&(s=r)}else t=x(t,n),w.each(e,function(e,n,r){i=t(e,n,r),(o>i||i===1/0&&s===1/0)&&(s=e,o=i)});return s},w.shuffle=function(e){for(var t,n=N(e)?e:w.values(e),r=n.length,i=Array(r),s=0;r>s;s++)t=w.random(0,s),t!==s&&(i[s]=i[t]),i[t]=n[s];return i},w.sample=function(e,t,n){return null==t||n?(N(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,n){return t=x(t,n),w.pluck(w.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=x(n,r),w.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};w.groupBy=T(function(e,t,n){w.has(e,n)?e[n].push(t):e[n]=[t]}),w.indexBy=T(function(e,t,n){e[n]=t}),w.countBy=T(function(e,t,n){w.has(e,n)?e[n]++:e[n]=1}),w.toArray=function(e){return e?w.isArray(e)?d.call(e):N(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:N(e)?e.length:w.keys(e).length},w.partition=function(e,t,n){t=x(t,n);var r=[],i=[];return w.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},w.first=w.head=w.take=function(e,t,n){return null!=e?null==t||n?e[0]:w.initial(e,e.length-t):void 0},w.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},w.last=function(e,t,n){return null!=e?null==t||n?e[e.length-1]:w.rest(e,Math.max(0,e.length-t)):void 0},w.rest=w.tail=w.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var U=function z(e,t,n,r){for(var i=[],s=0,o=r||0,a=E(e);a>o;o++){var u=e[o];if(N(u)&&(w.isArray(u)||w.isArguments(u))){t||(u=z(u,t,n));var c=0,l=u.length;for(i.length+=l;l>c;)i[s++]=u[c++]}else n||(i[s++]=u)}return i};w.flatten=function(e,t){return U(e,t,!1)},w.without=function(e){return w.difference(e,d.call(arguments,1))},w.uniq=w.unique=function(e,t,n,r){w.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=x(n,r));for(var i=[],s=[],o=0,a=E(e);a>o;o++){var u=e[o],c=n?n(u,o,e):u;t?(o&&s===c||i.push(u),s=c):n?w.contains(s,c)||(s.push(c),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(U(arguments,!0,!0))},w.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=E(e);i>r;r++){var s=e[r];if(!w.contains(t,s)){for(var o=1;n>o&&w.contains(arguments[o],s);o++);o===n&&t.push(s)}}return t},w.difference=function(e){var t=U(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,E).length||0,n=Array(t),r=0;t>r;r++)n[r]=w.pluck(e,r);return n},w.object=function(e,t){for(var n={},r=0,i=E(e);i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},w.findIndex=i(1),w.findLastIndex=i(-1),w.sortedIndex=function(e,t,n,r){n=x(n,r,1);for(var i=n(t),s=0,o=E(e);o>s;){var a=Math.floor((s+o)/2);n(e[a])<i?s=a+1:o=a}return s},w.indexOf=s(1,w.findIndex,w.sortedIndex),w.lastIndexOf=s(-1,w.findLastIndex),w.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),s=0;r>s;s++,e+=n)i[s]=e;return i};var R=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var s=S(e.prototype),o=e.apply(s,i);return w.isObject(o)?o:s};w.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function i(){return R(e,i,t,this,n.concat(d.call(arguments)))};return r},w.partial=function(e){var t=d.call(arguments,1),n=function r(){for(var n=0,i=t.length,s=Array(i),o=0;i>o;o++)s[o]=t[o]===w?arguments[n++]:t[o];for(;n<arguments.length;)s.push(arguments[n++]);return R(e,r,this,this,s)};return n},w.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=w.bind(e[n],e);return e},w.memoize=function(e,t){var n=function r(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return w.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},w.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,n){var r,i,s,o=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:w.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var c=w.now();a||n.leading!==!1||(a=c);var l=t-(c-a);return r=this,i=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=c,s=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(u,l)),s}},w.debounce=function(e,t,n){var r,i,s,o,a,u=function c(){var u=w.now()-o;t>u&&u>=0?r=setTimeout(c,t-u):(r=null,n||(a=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=w.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(a=e.apply(s,i),s=i=null),a}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},w.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},w.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},w.once=w.partial(w.before,2);var k=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(v)return v(e);var t=[];for(var n in e)w.has(e,n)&&t.push(n);return k&&o(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var n in e)t.push(n);return k&&o(e,t),t},w.values=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},w.mapObject=function(e,t,n){t=x(t,n);for(var r,i=w.keys(e),s=i.length,o={},a=0;s>a;a++)r=i[a],o[r]=t(e[r],r,e);return o},w.pairs=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},w.invert=function(e){for(var t={},n=w.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},w.functions=w.methods=function(e){var t=[];for(var n in e)w.isFunction(e[n])&&t.push(n);return t.sort()},w.extend=O(w.allKeys),w.extendOwn=w.assign=O(w.keys),w.findKey=function(e,t,n){t=x(t,n);for(var r,i=w.keys(e),s=0,o=i.length;o>s;s++)if(r=i[s],t(e[r],r,e))return r},w.pick=function(e,t,n){var r,i,s={},o=e;if(null==o)return s;w.isFunction(t)?(i=w.allKeys(o),r=A(t,n)):(i=U(arguments,!1,!1,1),r=function(e,t,n){return t in n},o=Object(o));for(var a=0,u=i.length;u>a;a++){var c=i[a],l=o[c];r(l,c,o)&&(s[c]=l)}return s},w.omit=function(e,t,n){if(w.isFunction(t))t=w.negate(t);else{var r=w.map(U(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(r,t)}}return w.pick(e,t,n)},w.defaults=O(w.allKeys,!0),w.create=function(e,t){var n=S(e);return t&&w.extendOwn(n,t),n},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var n=w.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),s=0;r>s;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var P=function G(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===i;if(!s){if("object"!=("undefined"==typeof e?"undefined":_typeof(e))||"object"!=("undefined"==typeof t?"undefined":_typeof(t)))return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!G(e[u],t[u],n,r))return!1}else{var c,l=w.keys(e);if(u=l.length,w.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!w.has(t,c)||!G(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(e,t){return P(e,t)},w.isEmpty=function(e){return null==e?!0:N(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=m||function(e){return"[object Array]"===p.call(e)},w.isObject=function(e){var t="undefined"==typeof e?"undefined":_typeof(e);return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":_typeof(Int8Array))&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&_.call(e,t)},w.noConflict=function(){return a._=u,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=C,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,n){var r=Array(Math.max(0,e));t=A(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=w.invert(D),L=function(e){var t=function(t){return e[t]},n="(?:"+w.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};w.escape=L(D),w.unescape=L(q),w.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),w.isFunction(r)?r.call(e):r};var M=0;w.uniqueId=function(e){var t=++M+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,B=function(e){return"\\"+V[e]};w.template=function(e,t,n){!t&&n&&(t=n),t=w.defaults({},t,w.templateSettings);var r=RegExp([(t.escape||F).source,(t.interpolate||F).source,(t.evaluate||F).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,a){return s+=e.slice(i,a).replace(J,B),i=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(a){throw a.source=s,a}var u=function(e){return o.call(this,e,w)},c=t.variable||"obj";return u.source="function("+c+"){\n"+s+"}",u},w.chain=function(e){var t=w(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var n=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),Q(this,n.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=c[e];w.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Q(this,n)}}),w.each(["concat","join","slice"],function(e){var t=c[e];w.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof e&&e.amd&&e("underscore",[],function(){return w})}).call(this)},{}],18:[function(e,t,n){var r=e("underscore");t.exports=function(e){var t="*";e.ACL=function(t){var n=this;if(n.permissionsById={},r.isObject(t))if(t instanceof e.User)n.setReadAccess(t,!0),n.setWriteAccess(t,!0);else{if(r.isFunction(t))throw"AV.ACL() called with a function.  Did you forget ()?";e._objectEach(t,function(t,i){if(!r.isString(i))throw"Tried to create an ACL with an invalid userId.";n.permissionsById[i]={},e._objectEach(t,function(e,t){if("read"!==t&&"write"!==t)throw"Tried to create an ACL with an invalid permission type.";if(!r.isBoolean(e))throw"Tried to create an ACL with an invalid permission value.";n.permissionsById[i][t]=e})})}},e.ACL.prototype.toJSON=function(){return r.clone(this.permissionsById)},e.ACL.prototype._setAccess=function(t,n,i){if(n instanceof e.User?n=n.id:n instanceof e.Role&&(n="role:"+n.getName()),!r.isString(n))throw"userId must be a string.";if(!r.isBoolean(i))throw"allowed must be either true or false.";var s=this.permissionsById[n];if(!s){if(!i)return;s={},this.permissionsById[n]=s}i?this.permissionsById[n][t]=!0:(delete s[t],r.isEmpty(s)&&delete s[n])},e.ACL.prototype._getAccess=function(t,n){n instanceof e.User?n=n.id:n instanceof e.Role&&(n="role:"+n.getName());var r=this.permissionsById[n];return r&&r[t]?!0:!1},e.ACL.prototype.setReadAccess=function(e,t){this._setAccess("read",e,t)},e.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)},e.ACL.prototype.setWriteAccess=function(e,t){this._setAccess("write",e,t)},e.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)},e.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(t,e)},e.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(t)},e.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(t,e)},e.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(t)},e.ACL.prototype.getRoleReadAccess=function(t){if(t instanceof e.Role&&(t=t.getName()),r.isString(t))return this.getReadAccess("role:"+t);throw"role must be a AV.Role or a String"},e.ACL.prototype.getRoleWriteAccess=function(t){if(t instanceof e.Role&&(t=t.getName()),r.isString(t))return this.getWriteAccess("role:"+t);throw"role must be a AV.Role or a String"},e.ACL.prototype.setRoleReadAccess=function(t,n){if(t instanceof e.Role&&(t=t.getName()),r.isString(t))return void this.setReadAccess("role:"+t,n);throw"role must be a AV.Role or a String"},e.ACL.prototype.setRoleWriteAccess=function(t,n){if(t instanceof e.Role&&(t=t.getName()),r.isString(t))return void this.setWriteAccess("role:"+t,n);throw"role must be a AV.Role or a String"}}},{underscore:17}],19:[function(e,t,n){(function(e){t.exports=e.AV||{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){(function(n){var r=e("underscore"),i=e("../promise"),s={},o=["getItem","setItem","removeItem","clear"];if(n.localStorage){var a=n.localStorage;try{var u="__storejs__";if(a.setItem(u,u),a.getItem(u)!=u)throw new Error;a.removeItem(u)}catch(c){a=e("localstorage-memory")}r(o).each(function(e){s[e]=function(){return n.localStorage[e].apply(n.localStorage,arguments)}}),s.async=!1}else{var l=e("react-native").AsyncStorage;r(o).each(function(e){s[e+"Async"]=function(){return i.as(l[e].apply(l,arguments))}}),s.async=!0}t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../promise":33,"localstorage-memory":7,"react-native":1,underscore:17}],21:[function(e,t,n){var r=function(e,t){var n;n=e.indexOf("base64")<0?atob(e):e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=t||e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(n.length),s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return new Blob([i],{type:r})};t.exports=r},{}],22:[function(e,t,n){var r=e("./localstorage"),i=e("./av"),s=n.removeAsync=r.removeItemAsync.bind(r),o=function(e,t){try{e=JSON.parse(e)}catch(n){return null}if(e){var r=e.expiredAt&&e.expiredAt<Date.now();return r?s(t).then(function(){return null}):e.value}return null};n.getAsync=function(e){return e=i.applicationId+"/"+e,r.getItemAsync(e).then(function(t){return o(t,e)})},n.setAsync=function(e,t,n){var s={value:t};return"number"==typeof n&&(s.expiredAt=Date.now()+n),r.setItemAsync(i.applicationId+"/"+e,JSON.stringify(s))}},{"./av":19,"./localstorage":30}],23:[function(e,t,n){var r=e("underscore"),i=e("./request").request;t.exports=function(e){e.Cloud=e.Cloud||{},r.extend(e.Cloud,{run:function(t,n,r){var s=i("functions",t,null,"POST",e._encode(n,null,!0),r&&r.sessionToken);return s.then(function(t){return e._decode(null,t).result})._thenRunCallbacks(r)},rpc:function(t,n,s){return r.isArray(n)?e.Promise.error(new Error("Can't pass Array as the param of rpc function in JavaScript SDK."))._thenRunCallbacks(s):i("call",t,null,"POST",e._encodeObjectOrArray(n),s&&s.sessionToken).then(function(t){return e._decode("",t).result})._thenRunCallbacks(s)},getServerDate:function(t){var n=i("date",null,null,"GET");return n.then(function(t){return e._decode(null,t)})._thenRunCallbacks(t)},requestSmsCode:function(e,t){if(r.isString(e)&&(e={mobilePhoneNumber:e}),!e.mobilePhoneNumber)throw"Missing mobilePhoneNumber.";var n=i("requestSmsCode",null,null,"POST",e);return n._thenRunCallbacks(t)},verifySmsCode:function(e,t,n){if(!e)throw"Missing sms code.";var s={};r.isString(t)?s.mobilePhoneNumber=t:n=t;var o=i("verifySmsCode",e,null,"POST",s);return o._thenRunCallbacks(n)}})}},{"./request":37,underscore:17}],24:[function(e,t,n){function r(e,t){var n=new Error(t);return n.code=e,n}var i=e("underscore");i.extend(r,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,X_DOMAIN_REQUEST:602}),t.exports=r},{underscore:17}],25:[function(e,t,n){t.exports=function(e){var t=/\s+/,n=Array.prototype.slice;e.Events={on:function(e,n,r){var i,s,o,a,u;if(!n)return this;for(e=e.split(t),i=this._callbacks||(this._callbacks={}),s=e.shift();s;)u=i[s],o=u?u.tail:{},o.next=a={},o.context=r,o.callback=n,i[s]={tail:a,next:u?u.next:o},s=e.shift();return this},off:function(e,n,r){var i,s,o,a,u,c;if(s=this._callbacks){if(!(e||n||r))return delete this._callbacks,this;for(e=e?e.split(t):_.keys(s),i=e.shift();i;)if(o=s[i],delete s[i],o&&(n||r)){for(a=o.tail,o=o.next;o!==a;)u=o.callback,c=o.context,(n&&u!==n||r&&c!==r)&&this.on(i,u,c),o=o.next;i=e.shift()}return this}},trigger:function(e){var r,i,s,o,a,u,c;if(!(s=this._callbacks))return this;for(u=s.all,e=e.split(t),c=n.call(arguments,1),r=e.shift();r;){if(i=s[r])for(o=i.tail;(i=i.next)!==o;)i.callback.apply(i.context||this,c);if(i=u)for(o=i.tail,a=[r].concat(c);(i=i.next)!==o;)i.callback.apply(i.context||this,a);r=e.shift()}return this}},e.Events.bind=e.Events.on,e.Events.unbind=e.Events.off}},{}],26:[function(e,t,n){(function(n){var r=e("underscore"),i=e("./uploader/cos"),s=e("./uploader/qiniu"),o=e("./uploader/s3"),a=e("./error"),u=e("./request").request;t.exports=function(t){var c=(t._config,function(e){return e.match(/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/)[4]}),l=function(e){if(26>e)return String.fromCharCode(65+e);if(52>e)return String.fromCharCode(97+(e-26));if(62>e)return String.fromCharCode(48+(e-52));if(62===e)return"+";if(63===e)return"/";throw new Error("Tried to encode large digit "+e+" in base64.")},h=function(e){var t=[];return t.length=Math.ceil(e.length/3),r.times(t.length,function(n){var r=e[3*n],i=e[3*n+1]||0,s=e[3*n+2]||0,o=3*n+1<e.length,a=3*n+2<e.length;t[n]=[l(r>>2&63),l(r<<4&48|i>>4&15),o?l(i<<2&60|s>>6&3):"=",a?l(63&s):"="].join("")}),t.join("")},f=function(e){return e.split(",")[0]&&e.split(",")[0].indexOf("base64")>=0&&(e=e.split(",")[1]),e},d={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};t.File=function(i,s,o){this.attributes={name:i,url:"",metaData:{},base64:""};var a=void 0;if(s&&s.owner)a=s.owner;else if(!t._config.disableCurrentUser)try{a=t.User.current()}catch(u){console.warn("Get current user failed. It seems this runtime use an async storage system, please new AV.File in the callback of AV.User.currentAsync().")}this.attributes.metaData={owner:a?a.id:"unknown"};var c=/\.([^.]*)$/.exec(i);c&&(c=c[1].toLowerCase());var l=o||d[c]||"text/plain";if(this._guessedType=l,r.isArray(s)&&(this.attributes.metaData.size=s.length,s={base64:h(s)}),s&&s.base64){var p=e("./browserify-wrapper/parse-base64"),_=p(s.base64,l);this.attributes.base64=f(s.base64),this._source=t.Promise.as(_,l)}else if(s&&s.blob)s.blob.type||(s.blob.type=l),this._source=t.Promise.as(s.blob,l);else if("undefined"!=typeof File&&s instanceof n.File)this._source=t.Promise.as(s,l);else if("undefined"!=typeof n.Buffer&&n.Buffer.isBuffer(s))this.attributes.metaData.size=s.length,this._source=t.Promise.as(s,l);else if(r.isString(s))throw new Error("Creating a AV.File from a String is not yet supported.")},t.File.withURL=function(e,n,r,i){if(!e||!n)throw"Please provide file name and url";var s=new t.File(e,null,i);if(r)for(var o in r)s.attributes.metaData[o]||(s.attributes.metaData[o]=r[o]);return s.attributes.url=n,s.attributes.metaData.__source="external",s},t.File.createWithoutData=function(e){var n=new t.File;return n.id=e,n},t.File.prototype={toJSON:function(){return t._encode(this)},getACL:function(){return this._acl},setACL:function(e){return e instanceof t.ACL?void(this._acl=e):new a(a.OTHER_CAUSE,"ACL must be a AV.ACL.")},name:function(){return this.get("name")},url:function(){return this.get("url")},get:function(e){switch(e){case"objectId":return this.id;default:return void 0===this.attributes[e]?this.attributes.metaData[e]:this.attributes[e]}},set:function p(){var e=this,p=function(t,n){switch(t){case"name":case"url":case"base64":case"metaData":e.attributes[t]=n;break;default:e.attributes.metaData[t]=n}};switch(arguments.length){case 1:for(var t in arguments.length<=0?void 0:arguments[0])p(t,(arguments.length<=0?void 0:arguments[0])[t]);break;case 2:p(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}},metaData:function(e,t){return e&&t?(this.attributes.metaData[e]=t,this):e&&!t?this.attributes.metaData[e]:this.attributes.metaData},thumbnailURL:function(e,t,n,r,i){var s=this.attributes.url;if(!s)throw new Error("Invalid url.");if(!e||!t||0>=e||0>=t)throw new Error("Invalid width or height value.");if(n=n||100,r=r?r:!0,0>=n||n>100)throw new Error("Invalid quality value.");i=i||"png";var o=r?2:1;return s+"?imageView/"+o+"/w/"+e+"/h/"+t+"/q/"+n+"/format/"+i},size:function(){return this.metaData().size},ownerId:function(){return this.metaData().owner},destroy:function(e){if(!this.id)return t.Promise.error("The file id is not eixsts.")._thenRunCallbacks(e);var n=u("files",null,this.id,"DELETE",e&&e.sessionToken);return n._thenRunCallbacks(e)},_fileToken:function(e){var t=arguments.length<=1||void 0===arguments[1]?"fileTokens":arguments[1],n=this.attributes.name,r=c(n),i=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},s=i()+i()+i()+i()+i()+r,o={key:s,name:n,ACL:this._acl,mime_type:e,metaData:this.attributes.metaData};return e&&!this.attributes.metaData.mime_type&&(this.attributes.metaData.mime_type=e),this._qiniu_key=s,u(t,null,null,"POST",o)},save:function(){var e=this;if(this.id)throw new Error("File already saved. If you want to manipulate a file, use AV.Query to get it.");var t=void 0,n={};switch(arguments.length){case 1:t=arguments.length<=0?void 0:arguments[0];break;case 2:n=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1]}if(!this._previousSave)if(this._source)this._previousSave=this._source.then(function(t,r){return e._fileToken(r).then(function(r){var a=void 0;switch(r.provider){case"s3":a=o(r,t,e,n);break;case"qcloud":a=i(r,t,e,n);break;case"qiniu":default:a=s(r,t,e,n)}return a["catch"](function(t){throw e.destroy(),t})})});else if(this.attributes.url&&"external"===this.attributes.metaData.__source){var r={name:this.attributes.name,ACL:this._acl,metaData:this.attributes.metaData,mime_type:this._guessedType,url:this.attributes.url};this._previousSave=u("files",this.attributes.name,null,"post",r).then(function(t){return e.attributes.name=t.name,e.attributes.url=t.url,e.id=t.objectId,t.size&&(e.attributes.metaData.size=t.size),e})}return this._previousSave._thenRunCallbacks(t)},fetch:function(){var e=this,n=null,i={};1===arguments.length?n=arguments[0]:2===arguments.length&&(i=arguments[0],n=arguments[1]);var s=u("files",null,this.id,"GET",i);return s.then(function(n){var i=t.Object.prototype.parse(n);return i.attributes={name:i.name,url:i.url},i.attributes.metaData=i.metaData||{},delete i.objectId,delete i.metaData,delete i.url,delete i.name,r.extend(e,i),e})._thenRunCallbacks(n)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browserify-wrapper/parse-base64":21,"./error":24,"./request":37,"./uploader/cos":41,"./uploader/qiniu":42,"./uploader/s3":43,underscore:17}],27:[function(e,t,n){var r=e("underscore");t.exports=function(e){e.GeoPoint=function(t,n){r.isArray(t)?(e.GeoPoint._validate(t[0],t[1]),this.latitude=t[0],this.longitude=t[1]):r.isObject(t)?(e.GeoPoint._validate(t.latitude,t.longitude),this.latitude=t.latitude,this.longitude=t.longitude):r.isNumber(t)&&r.isNumber(n)?(e.GeoPoint._validate(t,n),this.latitude=t,this.longitude=n):(this.latitude=0,this.longitude=0);var i=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return i._latitude}),this.__defineGetter__("longitude",function(){return i._longitude}),this.__defineSetter__("latitude",function(t){e.GeoPoint._validate(t,i.longitude),i._latitude=t}),this.__defineSetter__("longitude",function(t){e.GeoPoint._validate(i.latitude,t),i._longitude=t}))},e.GeoPoint._validate=function(e,t){if(-90>e)throw"AV.GeoPoint latitude "+e+" < -90.0.";if(e>90)throw"AV.GeoPoint latitude "+e+" > 90.0.";if(-180>t)throw"AV.GeoPoint longitude "+t+" < -180.0.";if(t>180)throw"AV.GeoPoint longitude "+t+" > 180.0."},e.GeoPoint.current=function(t){var n=new e.Promise;return navigator.geolocation.getCurrentPosition(function(t){n.resolve(new e.GeoPoint({latitude:t.coords.latitude,longitude:t.coords.longitude}))},function(e){n.reject(e)}),n._thenRunCallbacks(t)},e.GeoPoint.prototype={toJSON:function(){return e.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(e){var t=Math.PI/180,n=this.latitude*t,r=this.longitude*t,i=e.latitude*t,s=e.longitude*t,o=n-i,a=r-s,u=Math.sin(o/2),c=Math.sin(a/2),l=u*u+Math.cos(n)*Math.cos(i)*c*c;return l=Math.min(1,l),2*Math.asin(Math.sqrt(l))},kilometersTo:function(e){return 6371*this.radiansTo(e)},milesTo:function(e){return 3958.8*this.radiansTo(e)}}}},{underscore:17}],28:[function(e,t,n){var r=t.exports=e("./av");r._=e("underscore"),r.version=e("./version"),r.Promise=e("./promise"),r.localStorage=e("./localstorage"),r.Cache=e("./cache"),r._config=r._config||{},e("./utils").init(r),e("./event")(r),e("./geopoint")(r),e("./acl")(r),e("./op")(r),e("./relation")(r),e("./file")(r),e("./object")(r),e("./role")(r),e("./user")(r),e("./query")(r),e("./cloudfunction")(r),e("./push")(r),e("./status")(r),e("./search")(r),e("./insight")(r);var i=e("./error");r.Error=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return console.warn("AV.Error() is deprecated, and will be removed in next release."),new(Function.prototype.bind.apply(i,[null].concat(t)))}},{"./acl":18,"./av":19,"./cache":22,"./cloudfunction":23,"./error":24,"./event":25,"./file":26,"./geopoint":27,"./insight":29,"./localstorage":30,"./object":31,"./op":32,"./promise":33,"./push":34,"./query":35,"./relation":36,"./role":38,"./search":39,"./status":40,"./user":44,"./utils":45,"./version":46,underscore:17}],29:[function(e,t,n){var r=e("underscore"),i=e("./error"),s=e("./request").request;t.exports=function(e){e.Insight=e.Insight||{},r.extend(e.Insight,{startJob:function(t,n){if(!t||!t.sql)throw new Error("Please provide the sql to run the job.");var r={jobConfig:t,appId:e.applicationId},i=s("bigquery","jobs",null,"POST",e._encode(r,null,!0));return i.then(function(t){return e._decode(null,t).id})._thenRunCallbacks(n)},on:function(e,t){}}),e.Insight.JobQuery=function(e,t){if(!e)throw new Error("Please provide the job id.");this.id=e,this.className=t,this._skip=0,this._limit=100},e.Insight.JobQuery.prototype={skip:function(e){return this._skip=e,this},limit:function(e){return this._limit=e,this},find:function(t){var n={skip:this._skip,limit:this._limit},r=s("bigquery","jobs",this.id,"GET",n);return r.then(function(t){return t.error?e.Promise.error(new i(t.code,t.error)):e.Promise.as(t)})._thenRunCallbacks(t)}}}},{"./error":24,"./request":37,underscore:17}],30:[function(e,t,n){var r=e("underscore"),i=e("./promise"),s=e("./browserify-wrapper/localStorage"),o=["getItem","setItem","removeItem","clear"];s.async?r(o).each(function(e){"function"!=typeof s[e]&&(s[e]=function(){throw new Error("Synchronous API ["+e+"] is not available in this runtime.")})}):r(o).each(function(e){"function"==typeof s[e]&&(s[e+"Async"]=function(){return i.as(s[e].apply(s,arguments))})}),t.exports=s},{"./browserify-wrapper/localStorage":20,"./promise":33,underscore:17}],31:[function(e,t,n){var r=e("underscore"),i=e("./error"),s=e("./request").request,o=e("./utils");t.exports=function(e){e.Object=function(t,n){if(r.isString(t))return e.Object._create.apply(this,arguments);t=t||{},n&&n.parse&&(t=this.parse(t));var i=e._getValue(this,"defaults");if(i&&(t=r.extend({},i,t)),n&&n.collection&&(this.collection=n.collection),this._serverData={},this._opSetQueue=[{}],this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.changed={},this._silent={},this._pending={},!this.set(t,{silent:!0}))throw new Error("Can't create an invalid AV.Object");this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=r.clone(this.attributes),this.initialize.apply(this,arguments)},e.Object.saveAll=function(t,n){return e.Object._deepSaveAsync(t,null,n)._thenRunCallbacks(n)},e.Object.fetchAll=function(t,n){return e.Promise.as().then(function(){return s("batch",null,null,"POST",{requests:r.map(t,function(e){if(!e.className)throw new Error("object must have className to fetch");if(!e.id)throw new Error("object must have id to fetch");if(e.dirty())throw new Error("object is modified but not saved");return{method:"GET",path:"/1.1/classes/"+e.className+"/"+e.id}})},n&&n.sessionToken)}).then(function(e){return r.forEach(t,function(t,n){if(!e[n].success){var r=new Error(e[n].error.error);throw r.code=e[n].error.code,r}t._finishFetch(t.parse(e[n].success))}),t})},r.extend(e.Object.prototype,e.Events,{_fetchWhenSave:!1,initialize:function(){},fetchWhenSave:function(e){if(console.warn("AV.Object#fetchWhenSave is deprecated, use AV.Object#save with options.fetchWhenSave instead."),!r.isBoolean(e))throw"Expect boolean value for fetchWhenSave";this._fetchWhenSave=e},getObjectId:function(){return this.id},getCreatedAt:function(){return this.createdAt||this.get("createdAt")},getUpdatedAt:function(){return this.updatedAt||this.get("updatedAt")},toJSON:function(){var t=this._toFullJSON();return e._arrayEach(["__type","className"],function(e){delete t[e]}),t},_toFullJSON:function(t){var n=r.clone(this.attributes);return e._objectEach(n,function(r,i){n[i]=e._encode(r,t)}),e._objectEach(this._operations,function(e,t){n[t]=e}),r.has(this,"id")&&(n.objectId=this.id),r.has(this,"createdAt")&&(r.isDate(this.createdAt)?n.createdAt=this.createdAt.toJSON():n.createdAt=this.createdAt),r.has(this,"updatedAt")&&(r.isDate(this.updatedAt)?n.updatedAt=this.updatedAt.toJSON():n.updatedAt=this.updatedAt),n.__type="Object",n.className=this.className,n},_refreshCache:function(){var t=this;t._refreshingCache||(t._refreshingCache=!0,e._objectEach(this.attributes,function(n,i){n instanceof e.Object?n._refreshCache():r.isObject(n)&&t._resetCacheForKey(i)&&t.set(i,new e.Op.Set(n),{silent:!0})}),delete t._refreshingCache)},dirty:function(e){this._refreshCache();var t=r.last(this._opSetQueue);return e?t[e]?!0:!1:this.id?r.keys(t).length>0?!0:!1:!0},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(e){switch(e){case"objectId":return this.id;default:return void 0===this.attributes[e]?this[e]:this.attributes[e]}},relation:function(t){var n=this.get(t);if(n){if(!(n instanceof e.Relation))throw"Called relation() on non-relation field "+t;return n._ensureParentAndKey(this,t),n}return new e.Relation(this,t)},escape:function(e){var t=this._escapedAttributes[e];if(t)return t;var n,i=this.attributes[e];return n=o.isNullOrUndefined(i)?"":r.escape(i.toString()),this._escapedAttributes[e]=n,n},has:function(e){return!o.isNullOrUndefined(this.attributes[e])},_mergeMagicFields:function(t){var n=this,i=["id","objectId","createdAt","updatedAt"];e._arrayEach(i,function(i){t[i]&&("objectId"===i?n.id=t[i]:"createdAt"!==i&&"updatedAt"!==i||r.isDate(t[i])?n[i]=t[i]:n[i]=e._parseDate(t[i]),delete t[i])})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var t=r.first(this._opSetQueue);this._opSetQueue=r.rest(this._opSetQueue);var n=r.first(this._opSetQueue);e._objectEach(t,function(e,r){var i=t[r],s=n[r];i&&s?n[r]=s._mergeWithPrevious(i):i&&(n[r]=i)}),this._saving=this._saving-1},_finishSave:function(t){var n={};e._traverse(this.attributes,function(t){t instanceof e.Object&&t.id&&t._hasData&&(n[t.id]=t)});var i=r.first(this._opSetQueue);this._opSetQueue=r.rest(this._opSetQueue),this._applyOpSet(i,this._serverData),this._mergeMagicFields(t);var s=this;e._objectEach(t,function(t,r){s._serverData[r]=e._decode(r,t);var i=e._traverse(s._serverData[r],function(t){return t instanceof e.Object&&n[t.id]?n[t.id]:void 0});i&&(s._serverData[r]=i)}),this._rebuildAllEstimatedData(),this._saving=this._saving-1},_finishFetch:function(t,n){this._opSetQueue=[{}],this._mergeMagicFields(t);var r=this;e._objectEach(t,function(t,n){r._serverData[n]=e._decode(n,t)}),this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._hasData=n},_applyOpSet:function(t,n){var r=this;e._objectEach(t,function(t,i){n[i]=t._estimate(n[i],r,i),n[i]===e.Op._UNSET&&delete n[i]})},_resetCacheForKey:function(t){var n=this.attributes[t];if(r.isObject(n)&&!(n instanceof e.Object)&&!(n instanceof e.File)){n=n.toJSON?n.toJSON():n;var i=JSON.stringify(n);if(this._hashedJSON[t]!==i){var s=!!this._hashedJSON[t];return this._hashedJSON[t]=i,s}}return!1},_rebuildEstimatedDataForKey:function(t){var n=this;delete this.attributes[t],this._serverData[t]&&(this.attributes[t]=this._serverData[t]),e._arrayEach(this._opSetQueue,function(r){var i=r[t];i&&(n.attributes[t]=i._estimate(n.attributes[t],n,t),n.attributes[t]===e.Op._UNSET?delete n.attributes[t]:n._resetCacheForKey(t))})},_rebuildAllEstimatedData:function(){var t=this,n=r.clone(this.attributes);this.attributes=r.clone(this._serverData),e._arrayEach(this._opSetQueue,function(n){t._applyOpSet(n,t.attributes),e._objectEach(n,function(e,n){t._resetCacheForKey(n)})}),e._objectEach(n,function(e,n){t.attributes[n]!==e&&t.trigger("change:"+n,t,t.attributes[n],{})}),e._objectEach(this.attributes,function(e,i){r.has(n,i)||t.trigger("change:"+i,t,e,{})})},set:function(t,n,i){var s;if(r.isObject(t)||o.isNullOrUndefined(t)?(s=t,e._objectEach(s,function(t,n){s[n]=e._decode(n,t)}),i=n):(s={},s[t]=e._decode(t,n)),i=i||{},!s)return this;s instanceof e.Object&&(s=s.attributes),i.unset&&e._objectEach(s,function(t,n){s[n]=new e.Op.Unset});var a=r.clone(s),u=this;if(e._objectEach(a,function(t,n){t instanceof e.Op&&(a[n]=t._estimate(u.attributes[n],u,n),a[n]===e.Op._UNSET&&delete a[n])}),!this._validate(s,i))return!1;this._mergeMagicFields(s),i.changes={};var c=this._escapedAttributes;this._previousAttributes||{};return e._arrayEach(r.keys(s),function(t){var n=s[t];n instanceof e.Relation&&(n.parent=u),n instanceof e.Op||(n=new e.Op.Set(n));var o=!0;n instanceof e.Op.Set&&r.isEqual(u.attributes[t],n.value)&&(o=!1),o&&(delete c[t],i.silent?u._silent[t]=!0:i.changes[t]=!0);var a=r.last(u._opSetQueue);a[t]=n._mergeWithPrevious(a[t]),u._rebuildEstimatedDataForKey(t),o?(u.changed[t]=u.attributes[t],i.silent||(u._pending[t]=!0)):(delete u.changed[t],delete u._pending[t])}),i.silent||this.change(i),this},unset:function(e,t){return t=t||{},t.unset=!0,this.set(e,null,t)},increment:function(t,n){return(r.isUndefined(n)||r.isNull(n))&&(n=1),this.set(t,new e.Op.Increment(n))},add:function(t,n){return this.set(t,new e.Op.Add(o.ensureArray(n)))},addUnique:function(t,n){return this.set(t,new e.Op.AddUnique(o.ensureArray(n)))},remove:function(t,n){return this.set(t,new e.Op.Remove(o.ensureArray(n)))},op:function(e){return r.last(this._opSetQueue)[e]},clear:function(e){e=e||{},e.unset=!0;var t=r.extend(this.attributes,this._operations);return this.set(t,e)},_getSaveJSON:function(){var t=r.clone(r.first(this._opSetQueue));return e._objectEach(t,function(e,n){t[n]=e.toJSON()}),t},_canBeSerialized:function(){return e.Object._canBeSerializedAsValue(this.attributes)},fetch:function(){var e={},t={};1===arguments.length?e=arguments[0]:2===arguments.length&&(t=arguments[0],e=arguments[1]||{}),t&&t.include&&r.isArray(t.include)&&(t.include=t.include.join(","));var n=this,i=s("classes",this.className,this.id,"GET",t,e.sessionToken);return i.then(function(e){return n._finishFetch(n.parse(e),!0),n})._thenRunCallbacks(e,this)},save:function(t,n,i){var a,u,c;if(r.isObject(t)||o.isNullOrUndefined(t)?(a=t,c=n):(a={},a[t]=n,c=i),!c&&a){var l=r.reject(a,function(e,t){return r.include(["success","error","wait"],t)});if(0===l.length){var h=!0;if(r.has(a,"success")&&!r.isFunction(a.success)&&(h=!1),r.has(a,"error")&&!r.isFunction(a.error)&&(h=!1),h)return this.save(null,a)}}c=r.clone(c)||{},c.wait&&(u=r.clone(this.attributes));var f=r.clone(c)||{};f.wait&&(f.silent=!0);var d;if(f.error=function(e,t){d=t},a&&!this.set(a,f))return e.Promise.error(d)._thenRunCallbacks(c,this);var p=this;p._refreshCache();var _=[],m=[];return e.Object._findUnsavedChildren(p.attributes,_,m),_.length+m.length>0?e.Object._deepSaveAsync(this.attributes,p,c).then(function(){return p.save(null,c)},function(t){return e.Promise.error(t)._thenRunCallbacks(c,p)}):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||e.Promise.as(),this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var t=p.id?"PUT":"POST",n=p._getSaveJSON();if(p._fetchWhenSave&&(n._fetchWhenSave=!0),c.fetchWhenSave&&(n._fetchWhenSave=!0),c.query){var i;if("function"==typeof c.query.toJSON&&(i=c.query.toJSON(),i&&(n._where=i.where)),!n._where){var o=new Error("options.query is not an AV.Query");return e.Promise.error(o)._thenRunCallbacks(c,p)}}var l="classes",h=p.className;"_User"!==p.className||p.id||(l="users",h=null);var d=c._makeRequest||s,_=d(l,h,p.id,t,n,c.sessionToken);return _=_.then(function(e){var t=p.parse(e);return c.wait&&(t=r.extend(a||{},t)),p._finishSave(t),c.wait&&p.set(u,f),p},function(t){return p._cancelSave(),e.Promise.error(t)})._thenRunCallbacks(c,p)}),this._allPreviousSaves)},destroy:function(e){e=e||{};var t=this,n=function(){t.trigger("destroy",t,t.collection,e)};if(!this.id)return n();e.wait||n();var r=s("classes",this.className,this.id,"DELETE",null,e.sessionToken);return r.then(function(){return e.wait&&n(),t})._thenRunCallbacks(e,this)},parse:function(t){var n=r.clone(t);return r(["createdAt","updatedAt"]).each(function(t){n[t]&&(n[t]=e._parseDate(n[t]))}),n.updatedAt||(n.updatedAt=n.createdAt),n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(t){t=t||{};var n=this._changing;this._changing=!0;var i=this;e._objectEach(this._silent,function(e){i._pending[e]=!0});var s=r.extend({},t.changes,this._silent);if(this._silent={},e._objectEach(s,function(e,n){i.trigger("change:"+n,i,i.get(n),t)}),n)return this;for(var o=function(e,t){i._pending[t]||i._silent[t]||delete i.changed[t]};!r.isEmpty(this._pending);)this._pending={},this.trigger("change",this,t),e._objectEach(this.changed,o),i._previousAttributes=r.clone(this.attributes);return this._changing=!1,this},existed:function(){return console.warn("AV.Object.prototype.existed() is deprecated."),!1},hasChanged:function(e){return arguments.length?this.changed&&r.has(this.changed,e):!r.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return this.hasChanged()?r.clone(this.changed):!1;var n={},i=this._previousAttributes;return e._objectEach(t,function(e,t){r.isEqual(i[t],e)||(n[t]=e)}),n},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},validate:function(t,n){return!r.has(t,"ACL")||t.ACL instanceof e.ACL?!1:new i(i.OTHER_CAUSE,"ACL must be a AV.ACL.")},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0},getACL:function(){return this.get("ACL")},setACL:function(e,t){return this.set("ACL",e,t)}}),e.Object.createWithoutData=function(t,n,r){var i=new e.Object(t);return i.id=n,i._hasData=r,i},e.Object.destroyAll=function(t,n){if(n=n||{},!t||0===t.length)return e.Promise.as()._thenRunCallbacks(n);var r=t[0].className,i="",o=!0;t.forEach(function(e){if(e.className!=r)throw"AV.Object.destroyAll requires the argument object array's classNames must be the same";if(!e.id)throw"Could not delete unsaved object";o?(i=e.id,o=!1):i=i+","+e.id});var a=s("classes",r,i,"DELETE",null,n.sessionToken);return a._thenRunCallbacks(n)},e.Object._getSubclass=function(t){if(!r.isString(t))throw"AV.Object._getSubclass requires a string argument.";var n=e.Object._classMap[t];return n||(n=e.Object.extend(t),e.Object._classMap[t]=n),n},e.Object._create=function(t,n,r){var i=e.Object._getSubclass(t);return new i(n,r)},e.Object._classMap={},e.Object._extend=e._extend,e.Object["new"]=function(t,n){return new e.Object(t,n)},e.Object.extend=function(t,n,i){if(!r.isString(t)){if(t&&r.has(t,"className"))return e.Object.extend(t.className,t,n);throw new Error("AV.Object.extend's first argument should be the className.")}"User"===t&&(t="_User");var s=null;if(r.has(e.Object._classMap,t)){var o=e.Object._classMap[t];s=o._extend(n,i)}else n=n||{},n.className=t,s=this._extend(n,i);return s.extend=function(n){if(r.isString(n)||n&&r.has(n,"className"))return e.Object.extend.apply(s,arguments);var i=[t].concat(r.toArray(arguments));return e.Object.extend.apply(s,i)},s["new"]=function(e,t){return new s(e,t)},e.Object._classMap[t]=s,s},e.Object._findUnsavedChildren=function(t,n,r){e._traverse(t,function(t){return t instanceof e.Object?(t._refreshCache(),void(t.dirty()&&n.push(t))):t instanceof e.File?void(t.url()||t.id||r.push(t)):void 0})},e.Object._canBeSerializedAsValue=function(t){var n=!0;return t instanceof e.Object||t instanceof e.File?n=!!t.id:r.isArray(t)?e._arrayEach(t,function(t){e.Object._canBeSerializedAsValue(t)||(n=!1)}):r.isObject(t)&&e._objectEach(t,function(t){e.Object._canBeSerializedAsValue(t)||(n=!1)}),n},e.Object._deepSaveAsync=function(t,n,o){var a=[],u=[];e.Object._findUnsavedChildren(t,a,u),n&&(a=r.filter(a,function(e){return e!=n}));var c=e.Promise.as();r.each(u,function(e){c=c.then(function(){return e.save()})});var l=r.uniq(a),h=r.uniq(l);return c.then(function(){return e.Promise._continueWhile(function(){return h.length>0},function(){var t=[],n=[];if(e._arrayEach(h,function(e){return t.length>20?void n.push(e):void(e._canBeSerialized()?t.push(e):n.push(e))}),h=n,0===t.length)return e.Promise.error(new i(i.OTHER_CAUSE,"Tried to save a batch with a cycle."));var a=e.Promise.when(r.map(t,function(t){return t._allPreviousSaves||e.Promise.as()})),u=new e.Promise;return e._arrayEach(t,function(e){e._allPreviousSaves=u}),a._continueWith(function(){return s("batch",null,null,"POST",{requests:r.map(t,function(e){var t=e._getSaveJSON(),n="POST",r="/1.1/classes/"+e.className;return e.id&&(r=r+"/"+e.id,n="PUT"),e._startSave(),{method:n,path:r,body:t}})},o&&o.sessionToken).then(function(n){var r;return e._arrayEach(t,function(e,t){n[t].success?e._finishSave(e.parse(n[t].success)):(r=r||n[t].error,e._cancelSave())}),r?e.Promise.error(new i(r.code,r.error)):void 0}).then(function(e){return u.resolve(e),e},function(t){return u.reject(t),e.Promise.error(t)})})})}).then(function(){return t})}}},{"./error":24,"./request":37,"./utils":45,underscore:17}],32:[function(e,t,n){var r=e("underscore");t.exports=function(e){e.Op=function(){this._initialize.apply(this,arguments)},e.Op.prototype={_initialize:function(){}},r.extend(e.Op,{_extend:e._extend,_opDecoderMap:{},_registerDecoder:function(t,n){e.Op._opDecoderMap[t]=n},_decode:function(t){var n=e.Op._opDecoderMap[t.__op];return n?n(t):void 0}}),e.Op._registerDecoder("Batch",function(t){var n=null;return e._arrayEach(t.ops,function(t){t=e.Op._decode(t),n=t._mergeWithPrevious(n)}),n}),e.Op.Set=e.Op._extend({_initialize:function(e){this._value=e},value:function(){return this._value},toJSON:function(){return e._encode(this.value())},_mergeWithPrevious:function(e){return this},_estimate:function(e){return this.value()}}),e.Op._UNSET={},e.Op.Unset=e.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(e){return this},_estimate:function(t){return e.Op._UNSET}}),e.Op._registerDecoder("Delete",function(t){return new e.Op.Unset}),e.Op.Increment=e.Op._extend({_initialize:function(e){this._amount=e},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.amount());if(t instanceof e.Op.Set)return new e.Op.Set(t.value()+this.amount());if(t instanceof e.Op.Increment)return new e.Op.Increment(this.amount()+t.amount());throw"Op is invalid after previous op."}return this},_estimate:function(e){return e?e+this.amount():this.amount()}}),e.Op._registerDecoder("Increment",function(t){return new e.Op.Increment(t.amount)}),e.Op.Add=e.Op._extend({_initialize:function(e){this._objects=e},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.objects());if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.Add)return new e.Op.Add(t.objects().concat(this.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(e){return e?e.concat(this.objects()):r.clone(this.objects())}}),e.Op._registerDecoder("Add",function(t){return new e.Op.Add(e._decode(void 0,t.objects))}),e.Op.AddUnique=e.Op._extend({_initialize:function(e){this._objects=r.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.objects());if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.AddUnique)return new e.Op.AddUnique(this._estimate(t.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(t){if(t){var n=r.clone(t);return e._arrayEach(this.objects(),function(t){if(t instanceof e.Object&&t.id){var i=r.find(n,function(n){return n instanceof e.Object&&n.id===t.id});if(i){var s=r.indexOf(n,i);n[s]=t}else n.push(t)}else r.contains(n,t)||n.push(t)}),n}return r.clone(this.objects())}}),e.Op._registerDecoder("AddUnique",function(t){return new e.Op.AddUnique(e._decode(void 0,t.objects))}),e.Op.Remove=e.Op._extend({_initialize:function(e){this._objects=r.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return t;if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.Remove)return new e.Op.Remove(r.union(t.objects(),this.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(t){if(t){var n=r.difference(t,this.objects());return e._arrayEach(this.objects(),function(t){t instanceof e.Object&&t.id&&(n=r.reject(n,function(n){return n instanceof e.Object&&n.id===t.id}))}),n}return[]}}),e.Op._registerDecoder("Remove",function(t){return new e.Op.Remove(e._decode(void 0,t.objects))}),e.Op.Relation=e.Op._extend({_initialize:function(t,n){this._targetClassName=null;var i=this,s=function(t){if(t instanceof e.Object){if(!t.id)throw"You can't add an unsaved AV.Object to a relation.";if(i._targetClassName||(i._targetClassName=t.className),i._targetClassName!==t.className)throw"Tried to create a AV.Relation with 2 different types: "+i._targetClassName+" and "+t.className+".";return t.id}return t};this.relationsToAdd=r.uniq(r.map(t,s)),this.relationsToRemove=r.uniq(r.map(n,s))},added:function(){var t=this;return r.map(this.relationsToAdd,function(n){var r=e.Object._create(t._targetClassName);return r.id=n,r})},removed:function(){var t=this;return r.map(this.relationsToRemove,function(n){var r=e.Object._create(t._targetClassName);return r.id=n,r})},toJSON:function(){var e=null,t=null,n=this,i=function(e){return{__type:"Pointer",className:n._targetClassName,objectId:e}},s=null;return this.relationsToAdd.length>0&&(s=r.map(this.relationsToAdd,i),e={__op:"AddRelation",objects:s}),this.relationsToRemove.length>0&&(s=r.map(this.relationsToRemove,i),t={__op:"RemoveRelation",objects:s}),e&&t?{__op:"Batch",ops:[e,t]}:e||t||{}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)throw"You can't modify a relation after deleting it.";if(t instanceof e.Op.Relation){if(t._targetClassName&&t._targetClassName!==this._targetClassName)throw"Related object must be of class "+t._targetClassName+", but "+this._targetClassName+" was passed in.";var n=r.union(r.difference(t.relationsToAdd,this.relationsToRemove),this.relationsToAdd),i=r.union(r.difference(t.relationsToRemove,this.relationsToAdd),this.relationsToRemove),s=new e.Op.Relation(n,i);return s._targetClassName=this._targetClassName,s}throw"Op is invalid after previous op."}return this},_estimate:function(t,n,r){if(t){if(t instanceof e.Relation){if(this._targetClassName)if(t.targetClassName){if(t.targetClassName!==this._targetClassName)throw"Related object must be a "+t.targetClassName+", but a "+this._targetClassName+" was passed in."}else t.targetClassName=this._targetClassName;return t}throw"Op is invalid after previous op."}var i=new e.Relation(n,r);i.targetClassName=this._targetClassName}}),e.Op._registerDecoder("AddRelation",function(t){return new e.Op.Relation(e._decode(void 0,t.objects),[])}),e.Op._registerDecoder("RemoveRelation",function(t){return new e.Op.Relation([],e._decode(void 0,t.objects))})}},{underscore:17}],33:[function(e,t,n){(function(n){var r=e("underscore"),i=t.exports=function(e){this._resolved=!1,this._rejected=!1,this._resolvedCallbacks=[],this._rejectedCallbacks=[],this.doResolve(e)},s=function(e){return r.isNull(e)||r.isUndefined(e)},o=!1;"undefined"!=typeof n&&n.versions&&n.versions.node&&(o=!0),r.extend(i,{_isPromisesAPlusCompliant:!o,_debugError:!1,setPromisesAPlusCompliant:function(e){i._isPromisesAPlusCompliant=e},setDebugError:function(e){i._debugError=e},is:function(e){return e&&e.then&&r.isFunction(e.then)},as:function(){var e=new i;return arguments[0]&&r.isFunction(arguments[0].then)?arguments[0].then(function(t){e.resolve.call(e,t)},function(t){e.reject.call(e,t)}):e.resolve.apply(e,arguments),e},error:function(){var e=new i;return e.reject.apply(e,arguments),e},when:function(e){var t;t=e&&s(e.length)?arguments:e;var n=r.last(arguments);n=r.isBoolean(n)?n:!1;var o=t.length,a=!1,u=[],c=[];if(u.length=t.length,c.length=t.length,0===o)return n?i.as.call(this,u):i.as.apply(this,u);var l=new i,h=function(e){return o-=1,a&&!l._rejected&&n?void l.reject.call(l,c[e]):void(0===o&&(a&&!l._rejected?l.reject.call(l,c):n?l._rejected||l.resolve.call(l,u):l.resolve.apply(l,u)))};return r.each(t,function(e,t){i.is(e)?e.then(function(e){u[t]=e,h(t)},function(e){c[t]=e,a=!0,h(t)}):(u[t]=e,h(t))}),l},race:function(e){var t;t=e&&s(e.length)?arguments:e;var n=t.length,o=!1,a=[],u=[];if(a.length=u.length=t.length,0===n)return i.as.call(this);var c=new i,l=function(e){c._resolved||c._rejected||(o?c.reject.call(c,u[e]):c.resolve.call(c,a[e]))};return r.each(t,function(e,t){i.is(e)?e.then(function(e){a[t]=e,l(t)},function(e){u[t]=e,o=!0,l(t)}):(a[t]=e,l(t))}),c},_continueWhile:function(e,t){return e()?t().then(function(){return i._continueWhile(e,t)}):i.as()}}),i.all=function(e){return i.when(e,!0)},r.extend(i.prototype,{resolve:function(e){if(this._resolved||this._rejected)throw new Error("A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._resolved=!0,this._result=arguments;var t=arguments;r.each(this._resolvedCallbacks,function(e){e.apply(this,t)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},doResolve:function(e){if(e){var t=!1,n=this;try{e(function(e){t||(t=!0,n.resolve.call(n,e))},function(e){t||(t=!0,n.reject.call(n,e))})}catch(r){if(t)return;t=!0,n.reject.call(n,r)}}},reject:function(e){if(this._resolved||this._rejected)throw new i("A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._rejected=!0,this._error=e,r.each(this._rejectedCallbacks,function(t){t(e)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},then:function(e,t){var s=new i,o=function(){var t=arguments;if(e)if(i._isPromisesAPlusCompliant)try{t=[e.apply(this,t)]}catch(n){i._debugError&&n&&console.error("Error occurred in promise resolve callback.",n.stack||n),t=[i.error(n)]}else t=[e.apply(this,t)];1===t.length&&i.is(t[0])?t[0].then(function(){s.resolve.apply(s,arguments)},function(e){s.reject(e)}):s.resolve.apply(s,t)},a=function(e){var n=[];if(t){if(i._isPromisesAPlusCompliant)try{n=[t(e)]}catch(r){i._debugError&&r&&console.error("Error occurred in promise reject callback.",r.stack||r),n=[i.error(r)]}else n=[t(e)];1===n.length&&i.is(n[0])?n[0].then(function(){s.resolve.apply(s,arguments)},function(e){s.reject(e)}):i._isPromisesAPlusCompliant?s.resolve.apply(s,n):s.reject(n[0])}else s.reject(e)},u=function(e){e.call()};i._isPromisesAPlusCompliant&&("undefined"!=typeof window&&r.isFunction(window.setImmediate)?u=function(e){window.setImmediate(e)}:"undefined"!=typeof n&&n.nextTick?u=function(e){n.nextTick(e)}:"undefined"!=typeof setTimeout&&r.isFunction(setTimeout)&&(u=function(e){setTimeout(e,0)}));var c=this;return this._resolved?u(function(){o.apply(c,c._result)}):this._rejected?u(function(){a.apply(c,[c._error])}):(this._resolvedCallbacks.push(o),this._rejectedCallbacks.push(a)),s},"catch":function(e){return this.then(void 0,e)},always:function(e){return this.then(e,e)},done:function(e){return this.then(e)},fail:function(e){return this.then(null,e)},_thenRunCallbacks:function(e,t){var n;if(r.isFunction(e)){var s=e;n={success:function(e){s(e,null)},error:function(e){s(null,e)}}}else n=r.clone(e);return n=n||{},this.then(function(e){return n.success?n.success.apply(this,arguments):t&&t.trigger("sync",t,e,n),i.as.apply(i,arguments)},function(e){return n.error?r.isUndefined(t)?n.error(e):n.error(t,e):t&&t.trigger("error",t,e,n),i.error(e)})},_continueWith:function(e){return this.then(function(){return e(arguments,null)},function(t){return e(null,t)})}}),i.prototype["finally"]=i.prototype.always,i.prototype["try"]=i.prototype.done}).call(this,e("_process"))},{_process:10,underscore:17}],34:[function(e,t,n){var r=e("./request").request;t.exports=function(e){e.Installation=e.Object.extend("_Installation"),e.Push=e.Push||{},e.Push.send=function(e,t){if(e.where&&(e.where=e.where.toJSON().where),e.where&&e.cql)throw"Both where and cql can't be set";if(e.push_time&&(e.push_time=e.push_time.toJSON()),e.expiration_time&&(e.expiration_time=e.expiration_time.toJSON()),e.expiration_time&&e.expiration_time_interval)throw"Both expiration_time and expiration_time_interval can't be set";var n=r("push",null,null,"POST",e);return n._thenRunCallbacks(t)}}},{"./request":37}],35:[function(e,t,n){var r=e("underscore"),i=e("./error"),s=e("./request").request;t.exports=function(e){e.Query=function(t){r.isString(t)&&(t=e.Object._getSubclass(t)),this.objectClass=t,this.className=t.prototype.className,this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}},e.Query.or=function(){var t=r.toArray(arguments),n=null;e._arrayEach(t,function(e){if(r.isNull(n)&&(n=e.className),n!==e.className)throw"All queries must be for the same class"});var i=new e.Query(n);return i._orQuery(t),i},e.Query.and=function(){var t=r.toArray(arguments),n=null;e._arrayEach(t,function(e){if(r.isNull(n)&&(n=e.className),n!==e.className)throw"All queries must be for the same class"});var i=new e.Query(n);return i._andQuery(t),i},e.Query.doCloudQuery=function(t,n,i){var o={cql:t};r.isArray(n)?o.pvalues=n:i=n;var a=s("cloudQuery",null,null,"GET",o,i&&i.sessionToken);return a.then(function(t){var n=new e.Query(t.className),i=r.map(t.results,function(e){var r=n._newObject(t);return r._finishFetch(n._processResult(e),!0),r});return{results:i,count:t.count,className:t.className}})._thenRunCallbacks(i)},e.Query._extend=e._extend,e.Query.prototype={_processResult:function(e){return e},get:function(t,n){if(!t){var s=new i(i.OBJECT_NOT_FOUND,"Object not found.");throw s}var o=this;return o.equalTo("objectId",t),o.first().then(function(t){if(!r.isEmpty(t))return t;var n=new i(i.OBJECT_NOT_FOUND,"Object not found.");return e.Promise.error(n)})._thenRunCallbacks(n,null)},toJSON:function(){var t={where:this._where};return this._include.length>0&&(t.include=this._include.join(",")),this._select&&(t.keys=this._select.join(",")),this._limit>=0&&(t.limit=this._limit),this._skip>0&&(t.skip=this._skip),void 0!==this._order&&(t.order=this._order),e._objectEach(this._extraOptions,function(e,n){t[n]=e}),t},_newObject:function(t){var n;return n=t&&t.className?new e.Object(t.className):new this.objectClass},_createRequest:function(e,t){return s("classes",this.className,null,"GET",e||this.toJSON(),t&&t.sessionToken)},find:function(e){var t=this,n=this._createRequest(null,e);return n.then(function(e){return r.map(e.results,function(n){var r=t._newObject(e);return r._finishFetch(t._processResult(n),!0),r})})._thenRunCallbacks(e)},destroyAll:function(t){var n=this;return n.find().then(function(t){return e.Object.destroyAll(t)})._thenRunCallbacks(t)},count:function(e){var t=this.toJSON();t.limit=0,t.count=1;var n=this._createRequest(t,e);return n.then(function(e){return e.count})._thenRunCallbacks(e)},first:function(e){var t=this,n=this.toJSON();n.limit=1;var i=this._createRequest(n,e);return i.then(function(e){return r.map(e.results,function(e){var n=t._newObject();return n._finishFetch(t._processResult(e),!0),n})[0]})._thenRunCallbacks(e)},collection:function(t,n){return n=n||{},new e.Collection(t,r.extend(n,{model:this._objectClass||this.objectClass,query:this}))},skip:function(e){return this._skip=e,this},limit:function(e){return this._limit=e,this},equalTo:function(t,n){return this._where[t]=e._encode(n),this},_addCondition:function(t,n,r){return this._where[t]||(this._where[t]={}),this._where[t][n]=e._encode(r),this},sizeEqualTo:function(e,t){this._addCondition(e,"$size",t)},notEqualTo:function(e,t){return this._addCondition(e,"$ne",t),this},lessThan:function(e,t){return this._addCondition(e,"$lt",t),this},greaterThan:function(e,t){return this._addCondition(e,"$gt",t),this},lessThanOrEqualTo:function(e,t){return this._addCondition(e,"$lte",t),this},greaterThanOrEqualTo:function(e,t){return this._addCondition(e,"$gte",t),this},containedIn:function(e,t){return this._addCondition(e,"$in",t),this},notContainedIn:function(e,t){return this._addCondition(e,"$nin",t),this},containsAll:function(e,t){return this._addCondition(e,"$all",t),this},exists:function(e){return this._addCondition(e,"$exists",!0),this},doesNotExist:function(e){return this._addCondition(e,"$exists",!1),this},matches:function(e,t,n){return this._addCondition(e,"$regex",t),n||(n=""),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),n&&n.length&&this._addCondition(e,"$options",n),this},matchesQuery:function(e,t){var n=t.toJSON();return n.className=t.className,this._addCondition(e,"$inQuery",n),this},doesNotMatchQuery:function(e,t){var n=t.toJSON();return n.className=t.className,this._addCondition(e,"$notInQuery",n),this},matchesKeyInQuery:function(e,t,n){var r=n.toJSON();return r.className=n.className,this._addCondition(e,"$select",{key:t,query:r}),this},doesNotMatchKeyInQuery:function(e,t,n){var r=n.toJSON();return r.className=n.className,this._addCondition(e,"$dontSelect",{key:t,query:r}),this},_orQuery:function(e){var t=r.map(e,function(e){return e.toJSON().where});return this._where.$or=t,this},_andQuery:function(e){var t=r.map(e,function(e){return e.toJSON().where});return this._where.$and=t,this},_quote:function(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(e,t){return this._addCondition(e,"$regex",this._quote(t)),this},startsWith:function(e,t){return this._addCondition(e,"$regex","^"+this._quote(t)),this},endsWith:function(e,t){return this._addCondition(e,"$regex",this._quote(t)+"$"),this},ascending:function(e){return this._order=e,this},addAscending:function(e){return this._order?this._order+=","+e:this._order=e,this},descending:function(e){return this._order="-"+e,this},addDescending:function(e){return this._order?this._order+=",-"+e:this._order="-"+e,e},near:function(t,n){return n instanceof e.GeoPoint||(n=new e.GeoPoint(n)),this._addCondition(t,"$nearSphere",n),this},withinRadians:function(e,t,n){return this.near(e,t),this._addCondition(e,"$maxDistance",n),this},withinMiles:function(e,t,n){return this.withinRadians(e,t,n/3958.8)},withinKilometers:function(e,t,n){return this.withinRadians(e,t,n/6371)},withinGeoBox:function(t,n,r){return n instanceof e.GeoPoint||(n=new e.GeoPoint(n)),r instanceof e.GeoPoint||(r=new e.GeoPoint(r)),this._addCondition(t,"$within",{$box:[n,r]}),this},include:function(){var t=this;return e._arrayEach(arguments,function(e){r.isArray(e)?t._include=t._include.concat(e):t._include.push(e)}),this},select:function(){var t=this;return this._select=this._select||[],e._arrayEach(arguments,function(e){r.isArray(e)?t._select=t._select.concat(e):t._select.push(e)}),this},each:function(t,n){if(n=n||{},this._order||this._skip||this._limit>=0){var i="Cannot iterate on a query with sort, skip, or limit.";return e.Promise.error(i)._thenRunCallbacks(n)}var s=(new e.Promise,new e.Query(this.objectClass));s._limit=n.batchSize||100,s._where=r.clone(this._where),s._include=r.clone(this._include),s.ascending("objectId");var o=!1;return e.Promise._continueWhile(function(){return!o},function(){return s.find().then(function(n){var i=e.Promise.as();return r.each(n,function(e){i=i.then(function(){return t(e)})}),i.then(function(){n.length>=s._limit?s.greaterThan("objectId",n[n.length-1].id):o=!0})})})._thenRunCallbacks(n)}},e.FriendShipQuery=e.Query._extend({_objectClass:e.User,_newObject:function(){return new e.User},_processResult:function(e){if(e&&e[this._friendshipTag]){var t=e[this._friendshipTag];return"Pointer"===t.__type&&"_User"===t.className&&(delete t.__type,delete t.className),t}return null}})}},{"./error":24,"./request":37,underscore:17}],36:[function(e,t,n){var r=e("underscore");t.exports=function(e){e.Relation=function(e,t){if(!r.isString(t))throw new TypeError("key must be a string");this.parent=e,this.key=t,this.targetClassName=null},e.Relation.reverseQuery=function(t,n,r){var i=new e.Query(t);return i.equalTo(n,r._toPointer()),i},e.Relation.prototype={_ensureParentAndKey:function(e,t){if(this.parent=this.parent||e,this.key=this.key||t,this.parent!==e)throw"Internal Error. Relation retrieved from two different Objects.";if(this.key!==t)throw"Internal Error. Relation retrieved from two different keys."},add:function(t){r.isArray(t)||(t=[t]);var n=new e.Op.Relation(t,[]);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},remove:function(t){r.isArray(t)||(t=[t]);var n=new e.Op.Relation([],t);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function t(){var n,t;return this.targetClassName?(n=e.Object._getSubclass(this.targetClassName),t=new e.Query(n)):(n=e.Object._getSubclass(this.parent.className),t=new e.Query(n),t._extraOptions.redirectClassNameForKey=this.key),t._addCondition("$relatedTo","object",this.parent._toPointer()),t._addCondition("$relatedTo","key",this.key),t}}}},{underscore:17}],37:[function(e,t,n){(function(n){var r=e("superagent"),i=e("debug")("request"),s=e("md5"),o=e("./promise"),a=e("./cache"),u=e("./error"),c=e("./av"),l=e("underscore"),h=void 0,f={cn:"https://api.leancloud.cn",us:"https://us-api.leancloud.cn"},d=function(e,t){var n=(new Date).getTime(),r=s(n+e);return t?r+","+n+",master":r+","+n},p=function(e){var t=["batch","classes","files","date","functions","call","login","push","search/select","requestPasswordReset","requestEmailVerify","requestPasswordResetBySmsCode","resetPasswordBySmsCode","requestMobilePhoneVerify","requestLoginSmsCode","verifyMobilePhone","requestSmsCode","verifySmsCode","users","usersByMobilePhone","cloudQuery","qiniu","fileTokens","statuses","bigquery","search/select","subscribe/statuses/count","subscribe/statuses","installations"];if(-1===t.indexOf(e)&&!/users\/[^\/]+\/updatePassword/.test(e)&&!/users\/[^\/]+\/friendship\/[^\/]+/.test(e))throw new Error("Bad router: "+e+".")},_=function(e,t,n){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],a=arguments[4];i(e,t,n,s);var u=new o,c=r(e,t).set(s).send(n).end(function(e,t){return t&&i(t.status,t.body,t.text),e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),u.reject(e)):u.resolve(t.body,t.status,t)});return a&&c.on("progress",a),u},m=function(e){var t={"X-LC-Id":c.applicationId,"Content-Type":"application/json;charset=UTF-8"};c.masterKey&&c._useMasterKey?t["X-LC-Sign"]=d(c.masterKey,!0):t["X-LC-Sign"]=d(c.applicationKey),null!==c._config.applicationProduction&&(t["X-LC-Prod"]=c._config.applicationProduction),c._config.isNode?t["User-Agent"]=c._config.userAgent||"AV/"+c.version+"; Node.js/"+n.version:t["X-LC-UA"]="AV/"+c.version;var r=new o;return e?(t["X-LC-Session"]=e,r.resolve(t)):c._config.disableCurrentUser?r.resolve(t):c.User.currentAsync().then(function(e){e&&e._sessionToken&&(t["X-LC-Session"]=e._sessionToken),r.resolve(t)}),r},v=function(e,t,n,r,i){c.serverURL&&(c._config.APIServerURL=c.serverURL,console.warn("Please use AV._config.APIServerURL to replace AV.serverURL, and it is an internal interface."));var s=c._config.APIServerURL||f.cn;if("/"!==s.charAt(s.length-1)&&(s+="/"),s+="1.1/"+e,t&&(s+="/"+t),n&&(s+="/"+n),"users"!==e&&"classes"!==e||!i||(s+="?",i._fetchWhenSave&&(delete i._fetchWhenSave,s+="&new=true"),i._where&&(s+="&where="+encodeURIComponent(JSON.stringify(i._where)),delete i._where)),"get"===r.toLowerCase()){-1===s.indexOf("?")&&(s+="?");for(var o in i)"object"===_typeof(i[o])&&(i[o]=JSON.stringify(i[o])),s+="&"+o+"="+encodeURIComponent(i[o])}return s},g=function(e,t){return"number"!=typeof t&&(t=3600),a.setAsync("APIServerURL",e,1e3*t)},b=function(e){var t=new o;if(410===e.statusCode)g(e.response.api_server,e.response.ttl).then(function(){t.resolve(e.response.location)})["catch"](function(e){t.reject(e)});else{var n={code:-1,error:e.responseText};if(e.response&&e.response.code)n=e.response;else if(e.responseText)try{n=JSON.parse(e.responseText)}catch(r){}var i=new u(n.code,n.error);t.reject(i)}return t},y=function(e){c._config.APIServerURL="https://"+e;var t=l.findKey(f,function(e){return e===c._config.APIServerURL});t&&(c._config.region=t)},w=function(){var e="https://app-router.leancloud.cn/1/route?appId="+c.applicationId;return _("get",e).then(function(e){return e.api_server?(y(e.api_server),g(e.api_server,e.ttl)):void 0},function(e){if(e.statusCode>=400&&e.statusCode<500)throw e})},A=function(){var e=arguments.length<=0||void 0===arguments[0]?"cn":arguments[0];return h=new o,c._config.APIServerURL?void h.resolve():void("cn"===e?a.getAsync("APIServerURL").then(function(e){return e?void y(e):w()}).then(function(){h.resolve()})["catch"](function(e){h.reject(e)}):(c._config.region=e,c._config.APIServerURL=f[e],h.resolve()))},x=function(e,t,n,r){var i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],s=arguments[5];if(!c.applicationId)throw new Error(" must AV.init()");if(!c.applicationKey&&!c.masterKey)throw new Error("specify a AppKey using AV.init()");return p(e),h?h.then(function(){var o=v(e,t,n,r,i);return m(s).then(function(e){return _(r,o,i,e).then(null,function(t){return b(t).then(function(t){return _(r,t,i,e)})})})}):o.error(new Error("Not initialized"))};t.exports={ajax:_,request:x,setServerUrlByRegion:A}}).call(this,e("_process"))},{"./av":19,"./cache":22,"./error":24,"./promise":33,_process:10,debug:4,md5:8,superagent:12,underscore:17}],38:[function(e,t,n){var r=e("underscore"),i=e("./error");t.exports=function(e){e.Role=e.Object.extend("_Role",{constructor:function(t,n){if(r.isString(t)?(e.Object.prototype.constructor.call(this,null,null),this.setName(t)):e.Object.prototype.constructor.call(this,t,n),void 0===n){var i=new e.ACL;i.setPublicReadAccess(!0),this.getACL()||this.setACL(i)}else{if(!(n instanceof e.ACL))throw new TypeError("acl must be an instance of AV.ACL");this.setACL(n)}},getName:function(){return this.get("name")},setName:function(e,t){return this.set("name",e,t)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(t,n){if("name"in t&&t.name!==this.getName()){var s=t.name;if(this.id&&this.id!==t.objectId)return new i(i.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!r.isString(s))return new i(i.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(s))return new i(i.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return e.Object.prototype.validate?e.Object.prototype.validate.call(this,t,n):!1}})}},{"./error":24,underscore:17}],39:[function(e,t,n){var r=e("underscore"),i=e("./request").request;t.exports=function(e){e.SearchSortBuilder=function(){this._sortFields=[]},e.SearchSortBuilder.prototype={_addField:function(e,t,n,r){var i={};return i[e]={order:t||"asc",mode:n||"avg",missing:"_"+(r||"last")},this._sortFields.push(i),this},ascending:function(e,t,n){return this._addField(e,"asc",t,n)},descending:function(e,t,n){return this._addField(e,"desc",t,n)},whereNear:function(e,t,n){n=n||{};var r={},i={lat:t.latitude,lon:t.longitude},s={order:n.order||"asc",mode:n.mode||"avg",unit:n.unit||"km"};return s[e]=i,r._geo_distance=s,this._sortFields.push(r),this},build:function(){return JSON.stringify(e._encode(this._sortFields))}},e.SearchQuery=e.Query._extend({_sid:null,_hits:0,_queryString:null,_highlights:null,_sortBuilder:null,_createRequest:function(e,t){return i("search/select",null,null,"GET",e||this.toJSON(),t&&t.sessionToken)},sid:function(e){return this._sid=e,this},queryString:function(e){return this._queryString=e,this},highlights:function(e){var t;return t=e&&r.isString(e)?arguments:e,this._highlights=t,this},sortBy:function(e){return this._sortBuilder=e,this},hits:function(){return this._hits||(this._hits=0),this._hits},_processResult:function(e){return delete e.className,delete e._app_url,delete e._deeplink,e},hasMore:function(){return!this._hitEnd},reset:function(){this._hitEnd=!1,this._sid=null,this._hits=0},find:function(e){var t=this,n=this._createRequest();return n.then(function(e){return e.sid?(t._oldSid=t._sid,t._sid=e.sid):(t._sid=null,t._hitEnd=!0),t._hits=e.hits||0,r.map(e.results,function(n){n.className&&(e.className=n.className);var r=t._newObject(e);return r.appURL=n._app_url,r._finishFetch(t._processResult(n),!0),r})})._thenRunCallbacks(e)},toJSON:function(){var t=e.SearchQuery.__super__.toJSON.call(this);if(delete t.where,this.className&&(t.clazz=this.className),this._sid&&(t.sid=this._sid),!this._queryString)throw"Please set query string.";if(t.q=this._queryString,this._highlights&&(t.highlights=this._highlights.join(",")),this._sortBuilder&&t.order)throw"sort and order can not be set at same time.";return this._sortBuilder&&(t.sort=this._sortBuilder.build()),t}})}},{"./request":37,underscore:17}],40:[function(e,t,n){var r=e("underscore"),i=e("./request").request;t.exports=function(e){e.Status=function(e,t){return this.data={},this.inboxType="default",this.query=null,e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?this.data=e:(e&&(this.data.image=e),t&&(this.data.message=t)),this},e.Status.prototype={get:function(e){return this.data[e]},set:function(e,t){return this.data[e]=t,this},destroy:function(t){if(!this.id)return e.Promise.error("The status id is not exists.")._thenRunCallbacks(t);var n=i("statuses",null,this.id,"DELETE",t&&t.sessionToken);return n._thenRunCallbacks(t)},toObject:function(){return this.id?e.Object.createWithoutData("_Status",this.id):null},_getDataJSON:function(){var t=r.clone(this.data);return e._encode(t)},send:function(t){if(!e.User.current())throw"Please signin an user.";if(!this.query)return e.Status.sendStatusToFollowers(this,t);var n=this.query.toJSON();n.className=this.query.className;var r={};r.query=n,this.data=this.data||{};var s=e.Object.createWithoutData("_User",e.User.current().id)._toPointer();this.data.source=this.data.source||s,r.data=this._getDataJSON(),r.inboxType=this.inboxType||"default";var o=i("statuses",null,null,"POST",r,t&&t.sessionToken),a=this;return o.then(function(t){return a.id=t.objectId,a.createdAt=e._parseDate(t.createdAt),a})._thenRunCallbacks(t)},_finishFetch:function(t){this.id=t.objectId,this.createdAt=e._parseDate(t.createdAt),this.updatedAt=e._parseDate(t.updatedAt),this.messageId=t.messageId,delete t.messageId,delete t.objectId,delete t.createdAt,delete t.updatedAt,this.data=e._decode(void 0,t)}},e.Status.sendStatusToFollowers=function(t,n){if(!e.User.current())throw"Please signin an user.";var r={};r.className="_Follower",r.keys="follower";var s=e.Object.createWithoutData("_User",e.User.current().id)._toPointer();r.where={user:s};var o={};o.query=r,t.data=t.data||{},t.data.source=t.data.source||s,o.data=t._getDataJSON(),o.inboxType=t.inboxType||"default";var a=i("statuses",null,null,"POST",o,n&&n.sessionToken);return a.then(function(n){return t.id=n.objectId,t.createdAt=e._parseDate(n.createdAt),t})._thenRunCallbacks(n)},e.Status.sendPrivateStatus=function(t,n,s){if(!e.User.current())throw"Please signin an user.";if(!n)throw"Invalid target user.";var o=r.isString(n)?n:n.id;if(!o)throw"Invalid target user.";var a={};a.className="_User";var u=e.Object.createWithoutData("_User",e.User.current().id)._toPointer();a.where={objectId:o};var c={};c.query=a,t.data=t.data||{},t.data.source=t.data.source||u,c.data=t._getDataJSON(),c.inboxType="private",t.inboxType="private";var l=i("statuses",null,null,"POST",c,s&&s.sessionToken);return l.then(function(n){return t.id=n.objectId,t.createdAt=e._parseDate(n.createdAt),t})._thenRunCallbacks(s)},e.Status.countUnreadStatuses=function(t){if(!e.User.current()&&null==t)throw"Please signin an user or pass the owner objectId.";t=t||e.User.current();var n=r.isString(arguments[1])?arguments[2]:arguments[1],s=r.isString(arguments[1])?arguments[1]:"default",o={};o.inboxType=e._encode(s),o.owner=e._encode(t);var a=i("subscribe/statuses/count",null,null,"GET",o,n&&n.sessionToken);return a._thenRunCallbacks(n)},e.Status.statusQuery=function(t){var n=new e.Query("_Status");return t&&n.equalTo("source",t),n},e.InboxQuery=e.Query._extend({_objectClass:e.Status,_sinceId:0,_maxId:0,_inboxType:"default",_owner:null,_newObject:function(){return new e.Status},_createRequest:function(e,t){return i("subscribe/statuses",null,null,"GET",e||this.toJSON(),t&&t.sessionToken)},sinceId:function(e){return this._sinceId=e,this},maxId:function(e){return this._maxId=e,this},owner:function(e){return this._owner=e,this},inboxType:function(e){return this._inboxType=e,this},toJSON:function(){var t=e.InboxQuery.__super__.toJSON.call(this);return t.owner=e._encode(this._owner),t.inboxType=e._encode(this._inboxType),t.sinceId=e._encode(this._sinceId),t.maxId=e._encode(this._maxId),t}}),e.Status.inboxQuery=function(t,n){var r=new e.InboxQuery(e.Status);return t&&(r._owner=t),n&&(r._inboxType=n),r}}},{"./request":37,underscore:17}],41:[function(e,t,n){var r=e("superagent"),i=e("debug")("cos"),s=e("../promise");t.exports=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var a=e.upload_url+"?sign="+encodeURIComponent(e.token),u=new s,c=r("POST",a).field("fileContent",t).field("op","upload").end(function(e,t){return t&&i(t.status,t.body,t.text),e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),u.reject(e)):void u.resolve(n)});return o.onprogress&&c.on("progress",o.onprogress),u}},{"../promise":33,debug:4,superagent:12}],42:[function(e,t,n){var r=e("superagent"),i=e("../promise"),s=e("debug")("qiniu");t.exports=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var a=e.token,u=new i,c=r("POST","https://up.qbox.me").field("file",t).field("name",n.attributes.name).field("key",n._qiniu_key).field("token",a).end(function(e,t){return t&&s(t.status,t.body,t.text),e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),u.reject(e)):void u.resolve(n)});return o.onprogress&&c.on("progress",o.onprogress),u}},{"../promise":33,debug:4,superagent:12}],43:[function(e,t,n){var r=e("superagent"),i=e("../promise");t.exports=function(e,t,n){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var o=new i,a=r("PUT",e.upload_url).set("Content-Type",n.attributes.metaData.mime_type).send(t).end(function(e,t){return e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),o.reject(e)):void o.resolve(n)});return s.onprogress&&a.on("progress",s.onprogress),o}},{"../promise":33,superagent:12}],44:[function(e,t,n){function r(e){var t=i.clone(e)||{};return delete t.success,delete t.error,t}var i=e("underscore"),s=e("./error"),o=e("./request").request;t.exports=function(e){e.User=e.Object.extend("_User",{_isCurrentUser:!1,_mergeMagicFields:function(t){t.sessionToken&&(this._sessionToken=t.sessionToken,delete t.sessionToken),e.User.__super__._mergeMagicFields.call(this,t)},_cleanupAuthData:function(){if(this.isCurrent()){var t=this.get("authData");t&&e._objectEach(this.get("authData"),function(e,n){t[n]||delete t[n]})}},_synchronizeAllAuthData:function(){var t=this.get("authData");if(t){var n=this;e._objectEach(this.get("authData"),function(e,t){n._synchronizeAuthData(t)})}},_synchronizeAuthData:function(t){if(this.isCurrent()){var n;i.isString(t)?(n=t,t=e.User._authProviders[n]):n=t.getAuthType();var r=this.get("authData");if(r&&t){var s=t.restoreAuthentication(r[n]);s||this._unlinkFrom(t)}}},_handleSaveResult:function(t){return t&&!e._config.disableCurrentUser&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),!t&&!this.isCurrent()||e._config.disableCurrentUser?e.Promise.as():e.Promise.as(e.User._saveCurrentUser(this))},_linkWith:function(t,n){var s;if(i.isString(t)?(s=t,t=e.User._authProviders[t]):s=t.getAuthType(),i.has(n,"authData")){var o=this.get("authData")||{};return o[s]=n.authData,this.set("authData",o),this.save({authData:o},r(n)).then(function(e){return e._handleSaveResult(!0).then(function(){return e})})._thenRunCallbacks(n)}var a=this,u=new e.Promise;return t.authenticate({success:function(e,t){a._linkWith(e,{authData:t,success:n.success,error:n.error}).then(function(){u.resolve(a)})},error:function(e,t){n.error&&n.error(a,t),u.reject(t)}}),u},_unlinkFrom:function(t,n){var r;i.isString(t)?(r=t,t=e.User._authProviders[t]):r=t.getAuthType();var s=i.clone(n),o=this;return s.authData=null,s.success=function(e){o._synchronizeAuthData(t),n.success&&n.success.apply(this,arguments)},this._linkWith(t,s)},_isLinked:function(e){var t;t=i.isString(e)?e:e.getAuthType();var n=this.get("authData")||{};return!!n[t]},logOut:function(){this._logOutWithAll(),this._isCurrentUser=!1},_logOutWithAll:function(){var t=this.get("authData");if(t){var n=this;e._objectEach(this.get("authData"),function(e,t){n._logOutWith(t)})}},_logOutWith:function(t){this.isCurrent()&&(i.isString(t)&&(t=e.User._authProviders[t]),t&&t.deauthenticate&&t.deauthenticate())},signUp:function(e,t){var n;t=t||{};var i=e&&e.username||this.get("username");if(!i||""===i)throw n=new s(s.OTHER_CAUSE,"Cannot sign up user with an empty name."),t&&t.error&&t.error(this,n),n;var o=e&&e.password||this.get("password");if(!o||""===o)throw n=new s(s.OTHER_CAUSE,"Cannot sign up user with an empty password."),t&&t.error&&t.error(this,n),n;return this.save(e,r(t)).then(function(e){return e._handleSaveResult(!0).then(function(){return e})})._thenRunCallbacks(t,this)},signUpOrlogInWithMobilePhone:function(e,t){var n;t=t||{};var i=e&&e.mobilePhoneNumber||this.get("mobilePhoneNumber");if(!i||""===i)throw n=new s(s.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber with an empty mobilePhoneNumber."),t&&t.error&&t.error(this,n),n;var a=e&&e.smsCode||this.get("smsCode");if(!a||""===a)throw n=new s(s.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber  with an empty smsCode."),t&&t.error&&t.error(this,n),n;var u=r(t);return u._makeRequest=function(e,t,n,r,i){return o("usersByMobilePhone",null,null,"POST",i)},this.save(e,u).then(function(e){return delete e.attributes.smsCode,delete e._serverData.smsCode,e._handleSaveResult(!0).then(function(){return e})})._thenRunCallbacks(t)},logIn:function(e){var t=this,n=o("login",null,null,"GET",this.toJSON());return n.then(function(e,n,r){var i=t.parse(e,n,r);return t._finishFetch(i),t._handleSaveResult(!0).then(function(){return i.smsCode||delete t.attributes.smsCode,t})})._thenRunCallbacks(e,this)},save:function(t,n,s){var o,a;return i.isObject(t)||i.isNull(t)||i.isUndefined(t)?(o=t,a=n):(o={},o[t]=n,a=s),a=a||{},e.Object.prototype.save.call(this,o,r(a)).then(function(e){return e._handleSaveResult(!1).then(function(){return e})})._thenRunCallbacks(a)},follow:function(e,t){if(!this.id)throw"Please signin.";if(!e)throw"Invalid target user.";var n=i.isString(e)?e:e.id;if(!n)throw"Invalid target user.";var r="users/"+this.id+"/friendship/"+n,s=o(r,null,null,"POST",null,t&&t.sessionToken);return s._thenRunCallbacks(t)},unfollow:function(e,t){if(!this.id)throw"Please signin.";if(!e)throw"Invalid target user.";var n=i.isString(e)?e:e.id;if(!n)throw"Invalid target user.";var r="users/"+this.id+"/friendship/"+n,s=o(r,null,null,"DELETE",null,t&&t.sessionToken);return s._thenRunCallbacks(t)},followerQuery:function(){return e.User.followerQuery(this.id)},followeeQuery:function(){return e.User.followeeQuery(this.id)},fetch:function(){var t=null,n={};return 1===arguments.length?t=arguments[0]:2===arguments.length&&(n=arguments[0],t=arguments[1]),e.Object.prototype.fetch.call(this,n,{}).then(function(e){return e._handleSaveResult(!1).then(function(){return e})})._thenRunCallbacks(t)},updatePassword:function(e,t,n){var r="users/"+this.id+"/updatePassword",i={old_password:e,new_password:t},s=o(r,null,null,"PUT",i,n&&n.sessionToken);return s._thenRunCallbacks(n,this)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},getMobilePhoneNumber:function(){return this.get("mobilePhoneNumber")},setMobilePhoneNumber:function(e,t){return this.set("mobilePhoneNumber",e,t)},setUsername:function(e,t){return this.set("username",e,t)},setPassword:function(e,t){return this.set("password",e,t)},getEmail:function(){return this.get("email")},setEmail:function(e,t){return this.set("email",e,t)},authenticated:function(){return!!this._sessionToken&&!e._config.disableCurrentUser&&e.User.current()&&e.User.current().id===this.id},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(t,n,r,i){r=r||{},r.username=t,r.password=n;var s=e.Object._create("_User");return s.signUp(r,i)},logIn:function(t,n,r){var i=e.Object._create("_User");return i._finishFetch({username:t,password:n}),i.logIn(r)},become:function(t,n){n=n||{};var r=e.Object._create("_User");return o("users","me",null,"GET",{useMasterKey:n.useMasterKey,session_token:t}).then(function(e,t,n){var i=r.parse(e,t,n);return r._finishFetch(i),r._handleSaveResult(!0).then(function(){return r})})._thenRunCallbacks(n,r)},logInWithMobilePhoneSmsCode:function(t,n,r){var i=e.Object._create("_User");return i._finishFetch({mobilePhoneNumber:t,smsCode:n}),i.logIn(r)},signUpOrlogInWithMobilePhone:function(t,n,r,i){r=r||{},r.mobilePhoneNumber=t,r.smsCode=n;var s=e.Object._create("_User");return s.signUpOrlogInWithMobilePhone(r,i)},logInWithMobilePhone:function(t,n,r){var i=e.Object._create("_User");return i._finishFetch({mobilePhoneNumber:t,password:n}),i.logIn(r)},signUpOrlogInWithAuthData:function(t,n,r){return e.User._logInWith(n,{authData:t})._thenRunCallbacks(r)},associateWithAuthData:function(e,t,n){return e._linkWith(t,{authData:n})},logOut:function(){return e._config.disableCurrentUser?(console.warn("UserMgr.me() was disabled in multi-user environment, call logOut() from user object instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),e.Promise.as(null)):(null!==e.User._currentUser&&(e.User._currentUser._logOutWithAll(),e.User._currentUser._isCurrentUser=!1),e.User._currentUserMatchesDisk=!0,e.User._currentUser=null,e.localStorage.removeItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY)))},followerQuery:function(t){if(!t||!i.isString(t))throw"Invalid user object id.";var n=new e.FriendShipQuery("_Follower");return n._friendshipTag="follower",n.equalTo("user",e.Object.createWithoutData("_User",t)),n},followeeQuery:function(t){if(!t||!i.isString(t))throw"Invalid user object id.";var n=new e.FriendShipQuery("_Followee");return n._friendshipTag="followee",n.equalTo("user",e.Object.createWithoutData("_User",t)),n},requestPasswordReset:function(e,t){var n={email:e},r=o("requestPasswordReset",null,null,"POST",n);return r._thenRunCallbacks(t)},requestEmailVerify:function(e,t){var n={email:e},r=o("requestEmailVerify",null,null,"POST",n);return r._thenRunCallbacks(t)},requestEmailVerfiy:function(e,t){var n={email:e},r=o("requestEmailVerify",null,null,"POST",n);return r._thenRunCallbacks(t)},requestMobilePhoneVerify:function(e,t){var n={mobilePhoneNumber:e},r=o("requestMobilePhoneVerify",null,null,"POST",n);return r._thenRunCallbacks(t)},requestPasswordResetBySmsCode:function(e,t){var n={mobilePhoneNumber:e},r=o("requestPasswordResetBySmsCode",null,null,"POST",n);return r._thenRunCallbacks(t)},resetPasswordBySmsCode:function(e,t,n){var r={password:t},i=o("resetPasswordBySmsCode",null,e,"PUT",r);return i._thenRunCallbacks(n)},verifyMobilePhone:function(e,t){var n=o("verifyMobilePhone",null,e,"POST",null);return n._thenRunCallbacks(t)},requestLoginSmsCode:function(e,t){var n={mobilePhoneNumber:e},r=o("requestLoginSmsCode",null,null,"POST",n);return r._thenRunCallbacks(t)},currentAsync:function(){return e._config.disableCurrentUser?(console.warn("AV.User.currentAsync() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),e.Promise.as(null)):e.User._currentUser?e.Promise.as(e.User._currentUser):e.User._currentUserMatchesDisk?e.Promise.as(e.User._currentUser):e.localStorage.getItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY)).then(function(t){if(!t)return null;e.User._currentUserMatchesDisk=!0,e.User._currentUser=e.Object._create("_User"),e.User._currentUser._isCurrentUser=!0;var n=JSON.parse(t);return e.User._currentUser.id=n._id,delete n._id,e.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,e.User._currentUser._finishFetch(n),e.User._currentUser._synchronizeAllAuthData(),e.User._currentUser._refreshCache(),e.User._currentUser._opSetQueue=[{}],e.User._currentUser})},current:function(){if(e._config.disableCurrentUser)return console.warn("UserMgr.me() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),null;if(e.User._currentUser)return e.User._currentUser;if(e.User._currentUserMatchesDisk)return e.User._currentUser;e.User._currentUserMatchesDisk=!0;var t=e.localStorage.getItem(e._getAVPath(e.User._CURRENT_USER_KEY));if(!t)return null;e.User._currentUser=e.Object._create("_User"),e.User._currentUser._isCurrentUser=!0;var n=JSON.parse(t);return e.User._currentUser.id=n._id,delete n._id,e.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,e.User._currentUser._finishFetch(n),e.User._currentUser._synchronizeAllAuthData(),e.User._currentUser._refreshCache(),e.User._currentUser._opSetQueue=[{}],e.User._currentUser},_saveCurrentUser:function(t){var n;return n=e.User._currentUser!==t?e.User.logOut():e.Promise.as(),n.then(function(){t._isCurrentUser=!0,e.User._currentUser=t;var n=t.toJSON();return n._id=t.id,n._sessionToken=t._sessionToken,e.localStorage.setItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY),JSON.stringify(n)).then(function(){e.User._currentUserMatchesDisk=!0})})},_registerAuthenticationProvider:function(t){e.User._authProviders[t.getAuthType()]=t,!e._config.disableCurrentUser&&e.User.current()&&e.User.current()._synchronizeAuthData(t.getAuthType())},_logInWith:function(t,n){var r=e.Object._create("_User");return r._linkWith(t,n)}})}},{"./error":24,"./request":37,underscore:17}],45:[function(e,t,n){(function(n){var r=e("underscore"),i=e("./request"),s=function(e){return r.isNull(e)||r.isUndefined(e)},o=function(e){return r.isArray(e)?e:void 0===e||null===e?[]:[e]},a=function(e){var t=e._config;r.extend(t,{region:"cn",APIServerURL:t.APIServerURL||"",isNode:!1,disableCurrentUser:!1,userAgent:null,applicationProduction:null}),"undefined"!=typeof n&&n.versions&&n.versions.node&&(t.isNode=!0);var o=function(){},a=function(e,t,n){var i;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},r.extend(i,e),o.prototype=e.prototype,i.prototype=new o,t&&r.extend(i.prototype,t),n&&r.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},u=function(t,n,r){e.applicationId&&t!==e.applicationId&&n!==e.applicationKey&&r!==e.masterKey&&console.warn("LeanCloud SDK is already initialized, please do not reinitialize it."),e.applicationId=t,e.applicationKey=n,e.masterKey=r,e._useMasterKey=!1};e.init=function(){var e=function(){console.warn("MasterKey should not be used in the browser. The permissions of MasterKey can be across all the server permissions, including the setting of ACL .")};switch(arguments.length){case 1:var n=arguments.length<=0?void 0:arguments[0];if("object"!==("undefined"==typeof n?"undefined":_typeof(n)))throw new Error("init():Parameter not correct.");!t.isNode&&n.masterKey&&e(),u(n.appId,n.appKey,n.masterKey),i.setServerUrlByRegion(n.region),t.disableCurrentUser=n.disableCurrentUser;break;case 2:case 3:t.isNode||3!==arguments.length||e(),u.apply(void 0,arguments),i.setServerUrlByRegion("cn")}},t.isNode&&(e.Cloud=e.Cloud||{},e.Cloud.useMasterKey=function(){e._useMasterKey=!0}),e.setProduction=function(e){s(e)?t.applicationProduction=null:t.applicationProduction=e?1:0},e.useAVCloudCN=function(){i.setServerUrlByRegion("cn"),console.warn("Please use AV.init(), you can set the region of server.")},e.useAVCloudUS=function(){i.setServerUrlByRegion("us"),console.warn("you can set the region of server.")},e._getAVPath=function(t){if(!e.applicationId)throw"You need to call AV.initialize before using AV.";if(t||(t=""),!r.isString(t))throw"Tried to get a localStorage path that wasn't a String.";return"/"===t[0]&&(t=t.substring(1)),"AV/"+e.applicationId+"/"+t},e._installationId=null,e._getInstallationId=function(){if(e._installationId)return e.Promise.as(e._installationId);var t=e._getAVPath("installationId");return e.localStorage.getItemAsync(t).then(function(n){if(e._installationId=n,e._installationId)return n;var r=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e._installationId=r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r(),e.localStorage.setItemAsync(t,e._installationId)})},e._parseDate=function(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),n=t.exec(e);if(!n)return null;var r=n[1]||0,i=(n[2]||1)-1,s=n[3]||0,o=n[4]||0,a=n[5]||0,u=n[6]||0,c=n[8]||0;return new Date(Date.UTC(r,i,s,o,a,u,c))},e._ajax=function(){console.warn("AV._ajax is deprecated, and will be removed in next release."),i.ajax.apply(i,arguments)},e._request=function(){console.warn("AV._request is deprecated, and will be removed in next release."),i.request.apply(i,arguments)},e._extend=function(e,t){var n=a(this,e,t);return n.extend=this.extend,n},e._getValue=function(e,t){return e&&e[t]?r.isFunction(e[t])?e[t]():e[t]:null},e._encode=function(t,n,i){if(t instanceof e.Object){if(i)throw"AV.Objects not allowed here";if(!n||r.include(n,t)||!t._hasData)return t._toPointer();if(!t.dirty())return n=n.concat(t),e._encode(t._toFullJSON(n),n,i);throw"Tried to save an object with a pointer to a new, unsaved object."}if(t instanceof e.ACL)return t.toJSON();if(r.isDate(t))return{__type:"Date",iso:t.toJSON()};if(t instanceof e.GeoPoint)return t.toJSON();if(r.isArray(t))return r.map(t,function(t){return e._encode(t,n,i)});if(r.isRegExp(t))return t.source;if(t instanceof e.Relation)return t.toJSON();if(t instanceof e.Op)return t.toJSON();if(t instanceof e.File){if(!t.url()&&!t.id)throw"Tried to save an object containing an unsaved file.";return{__type:"File",id:t.id,name:t.name(),url:t.url()}}if(r.isObject(t)){var s={};return e._objectEach(t,function(t,r){s[r]=e._encode(t,n,i)}),s}return t},e._decode=function(t,n){if(!r.isObject(n))return n;if(r.isArray(n))return e._arrayEach(n,function(t,r){n[r]=e._decode(r,t)}),n;if(n instanceof e.Object)return n;if(n instanceof e.File)return n;if(n instanceof e.Op)return n;if(n.__op)return e.Op._decode(n);var i;if("Pointer"===n.__type){i=n.className;var s=e.Object._create(i);return Object.keys(n).length>3?(delete n.__type,delete n.className,s._finishFetch(n,!0)):s._finishFetch({objectId:n.objectId},!1),s}if("Object"===n.__type){i=n.className,delete n.__type,delete n.className;var o=e.Object._create(i);return o._finishFetch(n,!0),o}if("Date"===n.__type)return e._parseDate(n.iso);if("GeoPoint"===n.__type)return new e.GeoPoint({latitude:n.latitude,longitude:n.longitude});if("ACL"===t)return n instanceof e.ACL?n:new e.ACL(n);if("Relation"===n.__type){var a=new e.Relation(null,t);return a.targetClassName=n.className,a}if("File"===n.__type){var u=new e.File(n.name);return u.attributes.metaData=n.metaData||{},u.attributes.url=n.url,u.id=n.objectId,u}return e._objectEach(n,function(t,r){n[r]=e._decode(r,t)}),n},e._encodeObjectOrArray=function(t){var n=function(t){return t&&t._toFullJSON&&(t=t._toFullJSON([])),r.mapObject(t,function(t){return e._encode(t,[])})};return r.isArray(t)?t.map(function(e){return n(e)}):n(t)},e._arrayEach=r.each,e._traverse=function(t,n,i){if(t instanceof e.Object){if(i=i||[],r.indexOf(i,t)>=0)return;return i.push(t),e._traverse(t.attributes,n,i),n(t)}return t instanceof e.Relation||t instanceof e.File?n(t):r.isArray(t)?(r.each(t,function(r,s){var o=e._traverse(r,n,i);o&&(t[s]=o)}),n(t)):r.isObject(t)?(e._each(t,function(r,s){var o=e._traverse(r,n,i);o&&(t[s]=o)}),n(t)):n(t)},e._objectEach=e._each=function(e,t){r.isObject(e)?r.each(r.keys(e),function(n){t(e[n],n)}):r.each(e,t)}};t.exports={init:a,isNullOrUndefined:s,ensureArray:o}}).call(this,e("_process"))},{"./request":37,_process:10,underscore:17}],46:[function(e,t,n){t.exports="js1.3.1"},{}]},{},[28])(28)});AV.init('IxgCFzQ09pDaAWby36G5rMO2-gzGzoHsz', 'FATyF7MWaYhnLEBORweM7Yid');!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define("leancloud-realtime",["exports"],b):b(a.AV=a.AV||{})}(this,function(a){"use strict";function b(a){return a&&"object"==typeof a&&"default"in a?a.default:a}function c(a,b){return b={exports:{}},a(b,b.exports),b.exports}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function e(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=a.signature,c=a.timestamp,d=a.nonce;if("string"!=typeof b||"number"!=typeof c||"string"!=typeof d)throw new Error("malformed signature");return{signature:b,timestamp:c,nonce:d}}function f(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var g="undefined"!=typeof window?window:"undefined"!=typeof g?g:this,h=void 0,i=window.process||{};i.env=i.env||{};var j="undefined"!=typeof window?window:"undefined"!=typeof g?g:"undefined"!=typeof self?self:{},k=c(function(a){var b=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=b)}),l=b(k),m=Object.freeze({default:l}),n=c(function(a){var b=a.exports={version:"2.4.0"};"number"==typeof __e&&(__e=b)}),o=b(n),p=n.version,q=Object.freeze({default:o,version:p}),r=c(function(a){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}}),s=b(r),t=Object.freeze({default:s}),u=c(function(a){var c=b(t);a.exports=function(a,b,d){if(c(a),void 0===b)return a;switch(d){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}}),v=b(u),w=Object.freeze({default:v}),x=c(function(a){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}}),y=b(x),z=Object.freeze({default:y}),A=c(function(a){var c=b(z);a.exports=function(a){if(!c(a))throw TypeError(a+" is not an object!");return a}}),B=b(A),C=Object.freeze({default:B}),D=c(function(a){a.exports=function(a){try{return!!a()}catch(a){return!0}}}),E=b(D),F=Object.freeze({default:E}),G=c(function(a){a.exports=!b(F)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),H=b(G),I=Object.freeze({default:H}),J=c(function(a){var c=b(z),d=b(m).document,e=c(d)&&c(d.createElement);a.exports=function(a){return e?d.createElement(a):{}}}),K=b(J),L=Object.freeze({default:K}),M=c(function(a){a.exports=!b(I)&&!b(F)(function(){return 7!=Object.defineProperty(b(L)("div"),"a",{get:function(){return 7}}).a})}),N=b(M),O=Object.freeze({default:N}),P=c(function(a){var c=b(z);a.exports=function(a,b){if(!c(a))return a;var d,e;if(b&&"function"==typeof(d=a.toString)&&!c(e=d.call(a)))return e;if("function"==typeof(d=a.valueOf)&&!c(e=d.call(a)))return e;if(!b&&"function"==typeof(d=a.toString)&&!c(e=d.call(a)))return e;throw TypeError("Can't convert object to primitive value")}}),Q=b(P),R=Object.freeze({default:Q}),S=c(function(a,c){var d=b(C),e=b(O),f=b(R),g=Object.defineProperty;c.f=b(I)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}}),T=b(S),U=S.f,V=Object.freeze({default:T,f:U}),W=c(function(a){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}}),X=b(W),Y=Object.freeze({default:X}),Z=c(function(a){var c=b(V),d=b(Y);a.exports=b(I)?function(a,b,e){return c.f(a,b,d(1,e))}:function(a,b,c){return a[b]=c,a}}),$=b(Z),_=Object.freeze({default:$}),aa=c(function(a){var c=b(m),d=b(q),e=b(w),f=b(_),g="prototype",h=function(a,b,i){var j,k,l,m=a&h.F,n=a&h.G,o=a&h.S,p=a&h.P,q=a&h.B,r=a&h.W,s=n?d:d[b]||(d[b]={}),t=s[g],u=n?c:o?c[b]:(c[b]||{})[g];n&&(i=b);for(j in i)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:i[j],s[j]=n&&"function"!=typeof u[j]?i[j]:q&&k?e(l,c):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[g]=a[g],b}(l):p&&"function"==typeof l?e(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&h.R&&t&&!t[j]&&f(t,j,l)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,a.exports=h}),ba=b(aa),ca=Object.freeze({default:ba}),da=c(function(a){var c=b(ca),d=b(q),e=b(F);a.exports=function(a,b){var f=(d.Object||{})[a]||Object[a],g={};g[a]=b(f),c(c.S+c.F*e(function(){f(1)}),"Object",g)}}),ea=b(da),fa=Object.freeze({default:ea}),ga=c(function(a){var b={}.toString;a.exports=function(a){return b.call(a).slice(8,-1)}}),ha=b(ga),ia=Object.freeze({default:ha}),ja=c(function(a){var c=b(ia);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==c(a)?a.split(""):Object(a)}}),ka=b(ja),la=Object.freeze({default:ka}),ma=c(function(a){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}}),na=b(ma),oa=Object.freeze({default:na}),pa=c(function(a){var c=b(la),d=b(oa);a.exports=function(a){return c(d(a))}}),qa=b(pa),ra=Object.freeze({default:qa}),sa=c(function(a){var b={}.hasOwnProperty;a.exports=function(a,c){return b.call(a,c)}}),ta=b(sa),ua=Object.freeze({default:ta}),va=c(function(a){var b=Math.ceil,c=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?c:b)(a)}}),wa=b(va),xa=Object.freeze({default:wa}),ya=c(function(a){var c=b(xa),d=Math.min;a.exports=function(a){return a>0?d(c(a),9007199254740991):0}}),za=b(ya),Aa=Object.freeze({default:za}),Ba=c(function(a){var c=b(xa),d=Math.max,e=Math.min;a.exports=function(a,b){return a=c(a),a<0?d(a+b,0):e(a,b)}}),Ca=b(Ba),Da=Object.freeze({default:Ca}),Ea=c(function(a){var c=b(ra),d=b(Aa),e=b(Da);a.exports=function(a){return function(b,f,g){var h,i=c(b),j=d(i.length),k=e(g,j);if(a&&f!=f){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===f)return a||k||0;return!a&&-1}}}),Fa=b(Ea),Ga=Object.freeze({default:Fa}),Ha=c(function(a){var c=b(m),d="__core-js_shared__",e=c[d]||(c[d]={});a.exports=function(a){return e[a]||(e[a]={})}}),Ia=b(Ha),Ja=Object.freeze({default:Ia}),Ka=c(function(a){var b=0,c=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++b+c).toString(36))}}),La=b(Ka),Ma=Object.freeze({default:La}),Na=c(function(a){var c=b(Ja)("keys"),d=b(Ma);a.exports=function(a){return c[a]||(c[a]=d(a))}}),Oa=b(Na),Pa=Object.freeze({default:Oa}),Qa=c(function(a){var c=b(ua),d=b(ra),e=b(Ga)(!1),f=b(Pa)("IE_PROTO");a.exports=function(a,b){var g,h=d(a),i=0,j=[];for(g in h)g!=f&&c(h,g)&&j.push(g);for(;b.length>i;)c(h,g=b[i++])&&(~e(j,g)||j.push(g));return j}}),Ra=b(Qa),Sa=Object.freeze({default:Ra}),Ta=c(function(a){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),Ua=b(Ta),Va=Object.freeze({default:Ua}),Wa=c(function(a,c){var d=b(Sa),e=b(Va).concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return d(a,e)}}),Xa=b(Wa),Ya=Wa.f,Za=Object.freeze({default:Xa,f:Ya}),$a=c(function(a){var c=b(ra),d=b(Za).f,e={}.toString,f="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],g=function(a){try{return d(a)}catch(a){return f.slice()}};a.exports.f=function(a){return f&&"[object Window]"==e.call(a)?g(a):d(c(a))}}),_a=b($a),ab=$a.f,bb=Object.freeze({default:_a,f:ab}),cb=c(function(a){b(fa)("getOwnPropertyNames",function(){return b(bb).f})});b(cb);var db=c(function(a){var c=b(q).Object;a.exports=function(a){return c.getOwnPropertyNames(a)}}),eb=b(db),fb=Object.freeze({default:eb}),gb=c(function(a){a.exports={default:b(fb),__esModule:!0}}),hb=b(gb),ib=c(function(a){var c=b(oa);a.exports=function(a){return Object(c(a))}}),jb=b(ib),kb=Object.freeze({default:jb}),lb=c(function(a){var c=b(ia);a.exports=Array.isArray||function(a){return"Array"==c(a)}}),mb=b(lb),nb=Object.freeze({default:mb}),ob=c(function(a){var c=b(Ja)("wks"),d=b(Ma),e=b(m).Symbol,f="function"==typeof e,g=a.exports=function(a){return c[a]||(c[a]=f&&e[a]||(f?e:d)("Symbol."+a))};g.store=c}),pb=b(ob),qb=Object.freeze({default:pb}),rb=c(function(a){var c=b(z),d=b(nb),e=b(qb)("species");a.exports=function(a){var b;return d(a)&&(b=a.constructor,"function"!=typeof b||b!==Array&&!d(b.prototype)||(b=void 0),c(b)&&(b=b[e],null===b&&(b=void 0))),void 0===b?Array:b}}),sb=b(rb),tb=Object.freeze({default:sb}),ub=c(function(a){var c=b(tb);a.exports=function(a,b){return new(c(a))(b)}}),vb=b(ub),wb=Object.freeze({default:vb}),xb=c(function(a){var c=b(w),d=b(la),e=b(kb),f=b(Aa),g=b(wb);a.exports=function(a,b){var h=1==a,i=2==a,j=3==a,k=4==a,l=6==a,m=5==a||l,n=b||g;return function(b,g,o){for(var p,q,r=e(b),s=d(r),t=c(g,o,3),u=f(s.length),v=0,w=h?n(b,u):i?n(b,0):void 0;u>v;v++)if((m||v in s)&&(p=s[v],q=t(p,v,r),a))if(h)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(k)return!1;return l?-1:j||k?k:w}}}),yb=b(xb),zb=Object.freeze({default:yb}),Ab=c(function(a){a.exports=function(){}}),Bb=b(Ab),Cb=Object.freeze({default:Bb}),Db=c(function(a){var c=b(ca),d=b(zb)(5),e="find",f=!0;e in[]&&Array(1)[e](function(){f=!1}),c(c.P+c.F*f,"Array",{find:function(a){return d(this,a,arguments.length>1?arguments[1]:void 0)}}),b(Cb)(e)});b(Db);var Eb=c(function(a){a.exports=b(q).Array.find}),Fb=b(Eb),Gb=Object.freeze({default:Fb}),Hb=c(function(a){a.exports={default:b(Gb),__esModule:!0}}),Ib=b(Hb),Jb=c(function(a){var c=b(xa),d=b(oa);a.exports=function(a){return function(b,e){var f,g,h=String(d(b)),i=c(e),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i),f<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}}),Kb=b(Jb),Lb=Object.freeze({default:Kb}),Mb=c(function(a){a.exports=!0}),Nb=b(Mb),Ob=Object.freeze({default:Nb}),Pb=c(function(a){a.exports=b(_)}),Qb=b(Pb),Rb=Object.freeze({default:Qb}),Sb=c(function(a){a.exports={}}),Tb=b(Sb),Ub=Object.freeze({default:Tb}),Vb=c(function(a){var c=b(Sa),d=b(Va);a.exports=Object.keys||function(a){return c(a,d)}}),Wb=b(Vb),Xb=Object.freeze({default:Wb}),Yb=c(function(a){var c=b(V),d=b(C),e=b(Xb);a.exports=b(I)?Object.defineProperties:function(a,b){d(a);for(var f,g=e(b),h=g.length,i=0;h>i;)c.f(a,f=g[i++],b[f]);return a}}),Zb=b(Yb),$b=Object.freeze({default:Zb}),_b=c(function(a){a.exports=b(m).document&&document.documentElement}),ac=b(_b),bc=Object.freeze({default:ac}),cc=c(function(a){var c=b(C),d=b($b),e=b(Va),f=b(Pa)("IE_PROTO"),g=function(){},h="prototype",i=function(){var a,c=b(L)("iframe"),d=e.length,f="<",g=">";for(c.style.display="none",b(bc).appendChild(c),c.src="javascript:",a=c.contentWindow.document,a.open(),a.write(f+"script"+g+"document.F=Object"+f+"/script"+g),a.close(),i=a.F;d--;)delete i[h][e[d]];return i()};a.exports=Object.create||function(a,b){var e;return null!==a?(g[h]=c(a),e=new g,g[h]=null,e[f]=a):e=i(),void 0===b?e:d(e,b)}}),dc=b(cc),ec=Object.freeze({default:dc}),fc=c(function(a){var c=b(V).f,d=b(ua),e=b(qb)("toStringTag");a.exports=function(a,b,f){a&&!d(a=f?a:a.prototype,e)&&c(a,e,{configurable:!0,value:b})}}),gc=b(fc),hc=Object.freeze({default:gc}),ic=c(function(a){var c=b(ec),d=b(Y),e=b(hc),f={};b(_)(f,b(qb)("iterator"),function(){return this}),a.exports=function(a,b,g){a.prototype=c(f,{next:d(1,g)}),e(a,b+" Iterator")}}),jc=b(ic),kc=Object.freeze({default:jc}),lc=c(function(a){var c=b(ua),d=b(kb),e=b(Pa)("IE_PROTO"),f=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=d(a),c(a,e)?a[e]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?f:null}}),mc=b(lc),nc=Object.freeze({default:mc}),oc=c(function(a){var c=b(Ob),d=b(ca),e=b(Rb),f=b(_),g=b(ua),h=b(Ub),i=b(kc),j=b(hc),k=b(nc),l=b(qb)("iterator"),m=!([].keys&&"next"in[].keys()),n="@@iterator",o="keys",p="values",q=function(){return this};a.exports=function(a,b,r,s,t,u,v){i(r,b,s);var w,x,y,z=function(a){if(!m&&a in D)return D[a];switch(a){case o:return function(){return new r(this,a)};case p:return function(){return new r(this,a)}}return function(){return new r(this,a)}},A=b+" Iterator",B=t==p,C=!1,D=a.prototype,E=D[l]||D[n]||t&&D[t],F=E||z(t),G=t?B?z("entries"):F:void 0,H="Array"==b?D.entries||E:E;if(H&&(y=k(H.call(new a)),y!==Object.prototype&&(j(y,A,!0),c||g(y,l)||f(y,l,q))),B&&E&&E.name!==p&&(C=!0,F=function(){return E.call(this)}),c&&!v||!m&&!C&&D[l]||f(D,l,F),h[b]=F,h[A]=q,t)if(w={values:B?F:z(p),keys:u?F:z(o),entries:G},v)for(x in w)x in D||e(D,x,w[x]);else d(d.P+d.F*(m||C),b,w);return w}}),pc=b(oc),qc=Object.freeze({default:pc}),rc=c(function(a){var c=b(Lb)(!0);b(qc)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,d=this._i;return d>=b.length?{value:void 0,done:!0}:(a=c(b,d),this._i+=a.length,{value:a,done:!1})})});b(rc);var sc=c(function(a){a.exports=function(a,b){return{value:b,done:!!a}}}),tc=b(sc),uc=Object.freeze({default:tc}),vc=c(function(a){var c=b(Cb),d=b(uc),e=b(Ub),f=b(ra);a.exports=b(qc)(Array,"Array",function(a,b){this._t=f(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,d(1)):"keys"==b?d(0,c):"values"==b?d(0,a[c]):d(0,[c,a[c]])},"values"),e.Arguments=e.Array,c("keys"),c("values"),c("entries")});b(vc);var wc=c(function(a){for(var c=b(m),d=b(_),e=b(Ub),f=b(qb)("toStringTag"),g=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],h=0;h<5;h++){var i=g[h],j=c[i],k=j&&j.prototype;k&&!k[f]&&d(k,f,i),e[i]=e.Array}});b(wc);var xc=c(function(a){var c=b(ia),d=b(qb)("toStringTag"),e="Arguments"==c(function(){return arguments}()),f=function(a,b){try{return a[b]}catch(a){}};a.exports=function(a){var b,g,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(g=f(b=Object(a),d))?g:e?c(b):"Object"==(h=c(b))&&"function"==typeof b.callee?"Arguments":h}}),yc=b(xc),zc=Object.freeze({default:yc}),Ac=c(function(a){a.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}}),Bc=b(Ac),Cc=Object.freeze({default:Bc}),Dc=c(function(a){var c=b(C);a.exports=function(a,b,d,e){try{return e?b(c(d)[0],d[1]):b(d)}catch(b){var f=a.return;throw void 0!==f&&c(f.call(a)),b}}}),Ec=b(Dc),Fc=Object.freeze({default:Ec}),Gc=c(function(a){var c=b(Ub),d=b(qb)("iterator"),e=Array.prototype;a.exports=function(a){return void 0!==a&&(c.Array===a||e[d]===a)}}),Hc=b(Gc),Ic=Object.freeze({default:Hc}),Jc=c(function(a){var c=b(zc),d=b(qb)("iterator"),e=b(Ub);a.exports=b(q).getIteratorMethod=function(a){if(void 0!=a)return a[d]||a["@@iterator"]||e[c(a)]}}),Kc=b(Jc),Lc=Object.freeze({default:Kc}),Mc=c(function(a){var c=b(w),d=b(Fc),e=b(Ic),f=b(C),g=b(Aa),h=b(Lc),i={},j={},k=a.exports=function(a,b,k,l,m){var n,o,p,q,r=m?function(){return a}:h(a),s=c(k,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(e(r)){for(n=g(a.length);n>t;t++)if(q=b?s(f(o=a[t])[0],o[1]):s(a[t]),q===i||q===j)return q}else for(p=r.call(a);!(o=p.next()).done;)if(q=d(p,s,o.value,b),q===i||q===j)return q};k.BREAK=i,k.RETURN=j}),Nc=b(Mc),Oc=Object.freeze({default:Nc}),Pc=c(function(a){var c=b(C),d=b(t),e=b(qb)("species");a.exports=function(a,b){var f,g=c(a).constructor;return void 0===g||void 0==(f=c(g)[e])?b:d(f)}}),Qc=b(Pc),Rc=Object.freeze({default:Qc}),Sc=c(function(a){a.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}}),Tc=b(Sc),Uc=Object.freeze({default:Tc}),Vc=c(function(a){var c,d,e,f=b(w),g=b(Uc),h=b(bc),i=b(L),j=b(m),k=j.process,l=j.setImmediate,n=j.clearImmediate,o=j.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};l&&n||(l=function(a){for(var b=[],d=1;arguments.length>d;)b.push(arguments[d++]);return q[++p]=function(){g("function"==typeof a?a:Function(a),b)},c(p),p},n=function(a){delete q[a]},"process"==b(ia)(k)?c=function(a){k.nextTick(f(s,a,1))}:o?(d=new o,e=d.port2,d.port1.onmessage=t,c=f(e.postMessage,e,1)):j.addEventListener&&"function"==typeof postMessage&&!j.importScripts?(c=function(a){j.postMessage(a+"","*")},j.addEventListener("message",t,!1)):c=r in i("script")?function(a){h.appendChild(i("script"))[r]=function(){h.removeChild(this),s.call(a)}}:function(a){setTimeout(f(s,a,1),0)}),a.exports={set:l,clear:n}}),Wc=b(Vc),Xc=Vc.set,Yc=Vc.clear,Zc=Object.freeze({default:Wc,set:Xc,clear:Yc}),$c=c(function(a){var c=b(m),d=b(Zc).set,e=c.MutationObserver||c.WebKitMutationObserver,f=c.process,g=c.Promise,h="process"==b(ia)(f);a.exports=function(){var a,b,i,j=function(){var c,d;for(h&&(c=f.domain)&&c.exit();a;){d=a.fn,a=a.next;try{d()}catch(c){throw a?i():b=void 0,c}}b=void 0,c&&c.enter()};if(h)i=function(){f.nextTick(j)};else if(e){var k=!0,l=document.createTextNode("");new e(j).observe(l,{characterData:!0}),i=function(){l.data=k=!k}}else if(g&&g.resolve){var m=g.resolve();i=function(){m.then(j)}}else i=function(){d.call(c,j)};return function(c){var d={fn:c,next:void 0};b&&(b.next=d),a||(a=d,i()),b=d}}}),_c=b($c),ad=Object.freeze({default:_c}),bd=c(function(a){var c=b(_);a.exports=function(a,b,d){for(var e in b)d&&a[e]?a[e]=b[e]:c(a,e,b[e]);return a}}),cd=b(bd),dd=Object.freeze({default:cd}),ed=c(function(a){var c=b(m),d=b(q),e=b(V),f=b(I),g=b(qb)("species");a.exports=function(a){var b="function"==typeof d[a]?d[a]:c[a];f&&b&&!b[g]&&e.f(b,g,{configurable:!0,get:function(){return this}})}}),fd=b(ed),gd=Object.freeze({default:fd}),hd=c(function(a){var c=b(qb)("iterator"),d=!1;try{var e=[7][c]();e.return=function(){d=!0},Array.from(e,function(){throw 2})}catch(a){}a.exports=function(a,b){if(!b&&!d)return!1;var e=!1;try{var f=[7],g=f[c]();g.next=function(){return{done:e=!0}},f[c]=function(){return g},a(f)}catch(a){}return e}}),id=b(hd),jd=Object.freeze({default:id}),kd=c(function(a){var c,d,e,f=b(Ob),g=b(m),h=b(w),i=b(zc),j=b(ca),k=b(z),l=b(t),n=b(Cc),o=b(Oc),p=b(Rc),r=b(Zc).set,s=b(ad)(),u="Promise",v=g.TypeError,x=g.process,y=g[u],x=g.process,A="process"==i(x),B=function(){},C=!!function(){try{var a=y.resolve(1),c=(a.constructor={})[b(qb)("species")]=function(a){a(B,B)};return(A||"function"==typeof PromiseRejectionEvent)&&a.then(B)instanceof c}catch(a){}}(),D=function(a,b){return a===b||a===y&&b===e},E=function(a){var b;return!(!k(a)||"function"!=typeof(b=a.then))&&b},F=function(a){return D(y,a)?new G(a):new d(a)},G=d=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw v("Bad Promise constructor");b=a,c=d}),this.resolve=l(b),this.reject=l(c)},H=function(a){try{a()}catch(a){return{error:a}}},I=function(a,b){if(!a._n){a._n=!0;var c=a._c;s(function(){for(var d=a._v,e=1==a._s,f=0,g=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject,j=b.domain;try{g?(e||(2==a._h&&L(a),a._h=1),g===!0?c=d:(j&&j.enter(),c=g(d),j&&j.exit()),c===b.promise?i(v("Promise-chain cycle")):(f=E(c))?f.call(c,h,i):h(c)):i(d)}catch(a){i(a)}};c.length>f;)g(c[f++]);a._c=[],a._n=!1,b&&!a._h&&J(a)})}},J=function(a){r.call(g,function(){var b,c,d,e=a._v;if(K(a)&&(b=H(function(){A?x.emit("unhandledRejection",e,a):(c=g.onunhandledrejection)?c({promise:a,reason:e}):(d=g.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=A||K(a)?2:1),a._a=void 0,b)throw b.error})},K=function(a){if(1==a._h)return!1;for(var b,c=a._a||a._c,d=0;c.length>d;)if(b=c[d++],b.fail||!K(b.promise))return!1;return!0},L=function(a){r.call(g,function(){var b;A?x.emit("rejectionHandled",a):(b=g.onrejectionhandled)&&b({promise:a,reason:a._v})})},M=function(a){var b=this;b._d||(b._d=!0,b=b._w||b,b._v=a,b._s=2,b._a||(b._a=b._c.slice()),I(b,!0))},N=function(a){var b,c=this;if(!c._d){c._d=!0,c=c._w||c;try{if(c===a)throw v("Promise can't be resolved itself");(b=E(a))?s(function(){var d={_w:c,_d:!1};try{b.call(a,h(N,d,1),h(M,d,1))}catch(a){M.call(d,a)}}):(c._v=a,c._s=1,I(c,!1))}catch(a){M.call({_w:c,_d:!1},a)}}};C||(y=function(a){n(this,y,u,"_h"),l(a),c.call(this);try{a(h(N,this,1),h(M,this,1))}catch(a){M.call(this,a)}},c=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},c.prototype=b(dd)(y.prototype,{then:function(a,b){var c=F(p(this,y));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=A?x.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&I(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),G=function(){var a=new c;this.promise=a,this.resolve=h(N,a,1),this.reject=h(M,a,1)}),j(j.G+j.W+j.F*!C,{Promise:y}),b(hc)(y,u),b(gd)(u),e=b(q)[u],j(j.S+j.F*!C,u,{reject:function(a){var b=F(this),c=b.reject;return c(a),b.promise}}),j(j.S+j.F*(f||!C),u,{resolve:function(a){if(a instanceof y&&D(a.constructor,this))return a;var b=F(this),c=b.resolve;return c(a),b.promise}}),j(j.S+j.F*!(C&&b(jd)(function(a){y.all(a).catch(B)})),u,{all:function(a){var b=this,c=F(b),d=c.resolve,e=c.reject,f=H(function(){var c=[],f=0,g=1;o(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f&&e(f.error),c.promise},race:function(a){var b=this,c=F(b),d=c.reject,e=H(function(){o(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})});b(kd);var ld=c(function(a){a.exports=b(q).Promise}),md=b(ld),nd=Object.freeze({default:md}),od=c(function(a){a.exports={default:b(nd),__esModule:!0}}),pd=b(od),qd=c(function(a,b){b.f=Object.getOwnPropertySymbols}),rd=b(qd),sd=qd.f,td=Object.freeze({default:rd,f:sd}),ud=c(function(a,b){b.f={}.propertyIsEnumerable}),vd=b(ud),wd=ud.f,xd=Object.freeze({default:vd,f:wd}),yd=c(function(a){var c=b(Xb),d=b(td),e=b(xd),f=b(kb),g=b(la),h=Object.assign;a.exports=!h||b(F)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=h({},a)[c]||Object.keys(h({},b)).join("")!=d})?function(a,b){for(var h=f(a),i=arguments.length,j=1,k=d.f,l=e.f;i>j;)for(var m,n=g(arguments[j++]),o=k?c(n).concat(k(n)):c(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(h[m]=n[m]);return h}:h}),zd=b(yd),Ad=Object.freeze({default:zd}),Bd=c(function(a){var c=b(ca);c(c.S+c.F,"Object",{assign:b(Ad)})});b(Bd);var Cd=c(function(a){a.exports=b(q).Object.assign}),Dd=b(Cd),Ed=Object.freeze({default:Dd}),Fd=c(function(a){a.exports={default:b(Ed),__esModule:!0}}),Gd=b(Fd),Hd=c(function(a,b){b.__esModule=!0,b.default=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}}),Id=b(Hd),Jd=c(function(a,c){c.f=b(qb)}),Kd=b(Jd),Ld=Jd.f,Md=Object.freeze({default:Kd,f:Ld}),Nd=c(function(a){a.exports=b(Md).f("iterator")}),Od=b(Nd),Pd=Object.freeze({default:Od}),Qd=c(function(a){a.exports={default:b(Pd),__esModule:!0}}),Rd=b(Qd),Sd=Object.freeze({default:Rd}),Td=c(function(a){var c=b(Ma)("meta"),d=b(z),e=b(ua),f=b(V).f,g=0,h=Object.isExtensible||function(){return!0},i=!b(F)(function(){return h(Object.preventExtensions({}))}),j=function(a){f(a,c,{value:{i:"O"+ ++g,w:{}}})},k=function(a,b){if(!d(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!e(a,c)){if(!h(a))return"F";if(!b)return"E";j(a)}return a[c].i},l=function(a,b){if(!e(a,c)){if(!h(a))return!0;if(!b)return!1;j(a)}return a[c].w},m=function(a){return i&&n.NEED&&h(a)&&!e(a,c)&&j(a),a},n=a.exports={KEY:c,NEED:!1,fastKey:k,getWeak:l,onFreeze:m}}),Ud=b(Td),Vd=Td.KEY,Wd=Td.NEED,Xd=Td.fastKey,Yd=Td.getWeak,Zd=Td.onFreeze,$d=Object.freeze({default:Ud,KEY:Vd,NEED:Wd,fastKey:Xd,getWeak:Yd,onFreeze:Zd}),_d=c(function(a){var c=b(m),d=b(q),e=b(Ob),f=b(Md),g=b(V).f;a.exports=function(a){var b=d.Symbol||(d.Symbol=e?{}:c.Symbol||{});"_"==a.charAt(0)||a in b||g(b,a,{value:f.f(a)})}}),ae=b(_d),be=Object.freeze({default:ae}),ce=c(function(a){var c=b(Xb),d=b(ra);a.exports=function(a,b){for(var e,f=d(a),g=c(f),h=g.length,i=0;h>i;)if(f[e=g[i++]]===b)return e}}),de=b(ce),ee=Object.freeze({default:de}),fe=c(function(a){var c=b(Xb),d=b(td),e=b(xd);a.exports=function(a){var b=c(a),f=d.f;if(f)for(var g,h=f(a),i=e.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}}),ge=b(fe),he=Object.freeze({default:ge}),ie=c(function(a,c){var d=b(xd),e=b(Y),f=b(ra),g=b(R),h=b(ua),i=b(O),j=Object.getOwnPropertyDescriptor;c.f=b(I)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(a){}if(h(a,b))return e(!d.f.call(a,b),a[b])}}),je=b(ie),ke=ie.f,le=Object.freeze({default:je,f:ke}),me=c(function(a){var c=b(m),d=b(ua),e=b(I),f=b(ca),g=b(Rb),h=b($d).KEY,i=b(F),j=b(Ja),k=b(hc),l=b(Ma),n=b(qb),o=b(Md),p=b(be),q=b(ee),r=b(he),s=b(nb),t=b(C),u=b(ra),v=b(R),w=b(Y),x=b(ec),y=b(bb),z=b(le),A=b(V),B=b(Xb),D=z.f,E=A.f,G=y.f,H=c.Symbol,J=c.JSON,K=J&&J.stringify,L="prototype",M=n("_hidden"),N=n("toPrimitive"),O={}.propertyIsEnumerable,P=j("symbol-registry"),Q=j("symbols"),S=j("op-symbols"),T=Object[L],U="function"==typeof H,W=c.QObject,X=!W||!W[L]||!W[L].findChild,Z=e&&i(function(){return 7!=x(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=D(T,b);d&&delete T[b],E(a,b,c),d&&a!==T&&E(T,b,d)}:E,$=function(a){var b=Q[a]=x(H[L]);return b._k=a,b},aa=U&&"symbol"==typeof H.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof H},ba=function(a,b,c){return a===T&&ba(S,b,c),t(a),b=v(b,!0),t(c),d(Q,b)?(c.enumerable?(d(a,M)&&a[M][b]&&(a[M][b]=!1),c=x(c,{enumerable:w(0,!1)})):(d(a,M)||E(a,M,w(1,{})),a[M][b]=!0),Z(a,b,c)):E(a,b,c)},da=function(a,b){t(a);for(var c,d=r(b=u(b)),e=0,f=d.length;f>e;)ba(a,c=d[e++],b[c]);return a},ea=function(a,b){return void 0===b?x(a):da(x(a),b)},fa=function(a){var b=O.call(this,a=v(a,!0));return!(this===T&&d(Q,a)&&!d(S,a))&&(!(b||!d(this,a)||!d(Q,a)||d(this,M)&&this[M][a])||b)},ga=function(a,b){if(a=u(a),b=v(b,!0),a!==T||!d(Q,b)||d(S,b)){var c=D(a,b);return!c||!d(Q,b)||d(a,M)&&a[M][b]||(c.enumerable=!0),c}},ha=function(a){for(var b,c=G(u(a)),e=[],f=0;c.length>f;)d(Q,b=c[f++])||b==M||b==h||e.push(b);return e},ia=function(a){for(var b,c=a===T,e=G(c?S:u(a)),f=[],g=0;e.length>g;)!d(Q,b=e[g++])||c&&!d(T,b)||f.push(Q[b]);return f};U||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor!");var a=l(arguments.length>0?arguments[0]:void 0),b=function(c){this===T&&b.call(S,c),d(this,M)&&d(this[M],a)&&(this[M][a]=!1),Z(this,a,w(1,c))};return e&&X&&Z(T,a,{configurable:!0,set:b}),$(a)},g(H[L],"toString",function(){return this._k}),z.f=ga,A.f=ba,b(Za).f=y.f=ha,b(xd).f=fa,b(td).f=ia,e&&!b(Ob)&&g(T,"propertyIsEnumerable",fa,!0),o.f=function(a){return $(n(a))}),f(f.G+f.W+f.F*!U,{Symbol:H});for(var ja="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ka=0;ja.length>ka;)n(ja[ka++]);for(var ja=B(n.store),ka=0;ja.length>ka;)p(ja[ka++]);f(f.S+f.F*!U,"Symbol",{for:function(a){return d(P,a+="")?P[a]:P[a]=H(a)},keyFor:function(a){if(aa(a))return q(P,a);throw TypeError(a+" is not a symbol!")},useSetter:function(){X=!0},useSimple:function(){X=!1}}),f(f.S+f.F*!U,"Object",{create:ea,defineProperty:ba,defineProperties:da,getOwnPropertyDescriptor:ga,getOwnPropertyNames:ha,getOwnPropertySymbols:ia}),J&&f(f.S+f.F*(!U||i(function(){var a=H();return"[null]"!=K([a])||"{}"!=K({a:a})||"{}"!=K(Object(a))})),"JSON",{stringify:function(a){if(void 0!==a&&!aa(a)){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);return b=d[1],"function"==typeof b&&(c=b),!c&&s(b)||(b=function(a,b){if(c&&(b=c.call(this,a,b)),!aa(b))return b}),d[1]=b,K.apply(J,d)}}}),H[L][N]||b(_)(H[L],N,H[L].valueOf),k(H,"Symbol"),k(Math,"Math",!0),k(c.JSON,"JSON",!0)});b(me);var ne=c(function(a){b(be)("asyncIterator")});b(ne);var oe=c(function(a){b(be)("observable")});b(oe);var pe=c(function(a){a.exports=b(q).Symbol}),qe=b(pe),re=Object.freeze({default:qe}),se=c(function(a){a.exports={default:b(re),__esModule:!0}}),te=b(se),ue=Object.freeze({default:te}),ve=c(function(a,c){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=b(Sd),f=d(e),g=b(ue),h=d(g),i="function"==typeof h.default&&"symbol"==typeof f.default?function(a){return typeof a}:function(a){return a&&"function"==typeof h.default&&a.constructor===h.default?"symbol":typeof a};c.default="function"==typeof h.default&&"symbol"===i(f.default)?function(a){return"undefined"==typeof a?"undefined":i(a)}:function(a){return a&&"function"==typeof h.default&&a.constructor===h.default?"symbol":"undefined"==typeof a?"undefined":i(a)}}),we=b(ve),xe=Object.freeze({default:we}),ye=c(function(a,c){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=b(xe),f=d(e);c.default=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==("undefined"==typeof b?"undefined":(0,f.default)(b))&&"function"!=typeof b?a:b}}),ze=b(ye),Ae=c(function(a){var c=b(z),d=b(C),e=function(a,b){if(d(a),!c(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,c,d){try{d=b(w)(Function.call,b(le).f(Object.prototype,"__proto__").set,2),d(a,[]),c=!(a instanceof Array)}catch(a){c=!0}return function(a,b){return e(a,b),c?a.__proto__=b:d(a,b),a}}({},!1):void 0),check:e}}),Be=b(Ae),Ce=Ae.set,De=Ae.check,Ee=Object.freeze({default:Be,set:Ce,check:De}),Fe=c(function(a){var c=b(ca);c(c.S,"Object",{setPrototypeOf:b(Ee).set})});b(Fe);var Ge=c(function(a){a.exports=b(q).Object.setPrototypeOf}),He=b(Ge),Ie=Object.freeze({default:He}),Je=c(function(a){a.exports={default:b(Ie),__esModule:!0}}),Ke=b(Je),Le=Object.freeze({default:Ke}),Me=c(function(a){var c=b(ca);c(c.S,"Object",{create:b(ec)})});b(Me);var Ne=c(function(a){var c=b(q).Object;a.exports=function(a,b){return c.create(a,b)}}),Oe=b(Ne),Pe=Object.freeze({default:Oe}),Qe=c(function(a){a.exports={default:b(Pe),__esModule:!0}}),Re=b(Qe),Se=Object.freeze({default:Re}),Te=c(function(a,c){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=b(Le),f=d(e),g=b(Se),h=d(g),i=b(xe),j=d(i);c.default=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof b?"undefined":(0,j.default)(b)));a.prototype=(0,h.default)(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(f.default?(0,f.default)(a,b):a.__proto__=b)}}),Ue=b(Te),Ve=c(function(a){function b(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*j;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*h;case"minutes":case"minute":case"mins":case"min":case"m":return c*g;case"seconds":case"second":case"secs":case"sec":case"s":return c*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function c(a){return a>=i?Math.round(a/i)+"d":a>=h?Math.round(a/h)+"h":a>=g?Math.round(a/g)+"m":a>=f?Math.round(a/f)+"s":a+"ms";}function d(a){return e(a,i,"day")||e(a,h,"hour")||e(a,g,"minute")||e(a,f,"second")||a+" ms"}function e(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var f=1e3,g=60*f,h=60*g,i=24*h,j=365.25*i;a.exports=function(a,e){return e=e||{},"string"==typeof a?b(a):e.long?d(a):c(a)}}),We=b(Ve),Xe=Object.freeze({default:We}),Ye=c(function(a,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=a.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=b(Xe),c.names=[],c.skips=[],c.formatters={};var j,k=0}),Ze=b(Ye),$e=Ye.formatters,_e=Ye.skips,af=Ye.names,bf=Ye.humanize,cf=Ye.enabled,df=Ye.enable,ef=Ye.disable,ff=Ye.coerce,gf=Object.freeze({default:Ze,formatters:$e,skips:_e,names:af,humanize:bf,enabled:cf,enable:df,disable:ef,coerce:ff}),hf=c(function(a,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function h(){var a;try{a=c.storage.debug}catch(a){}return a}function i(){try{return window.localStorage}catch(a){}}c=a.exports=b(gf),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())}),jf=b(hf),kf=c(function(a){function b(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function c(){}var d=Object.prototype.hasOwnProperty,e="function"!=typeof Object.create&&"~";c.prototype._events=void 0,c.prototype.eventNames=function(){var a,b=this._events,c=[];if(!b)return c;for(a in b)d.call(b,a)&&c.push(e?a.slice(1):a);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(b)):c},c.prototype.listeners=function(a,b){var c=e?e+a:a,d=this._events&&this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var f=0,g=d.length,h=new Array(g);f<g;f++)h[f]=d[f].fn;return h},c.prototype.emit=function(a,b,c,d,f,g){var h=e?e+a:a;if(!this._events||!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if("function"==typeof k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,f),!0;case 6:return k.fn.call(k.context,b,c,d,f,g),!0}for(j=1,i=new Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;default:if(!i)for(m=1,i=new Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},c.prototype.on=function(a,c,d){var f=new b(c,d||this),g=e?e+a:a;return this._events||(this._events=e?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],f]:this._events[g].push(f):this._events[g]=f,this},c.prototype.once=function(a,c,d){var f=new b(c,d||this,(!0)),g=e?e+a:a;return this._events||(this._events=e?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],f]:this._events[g].push(f):this._events[g]=f,this},c.prototype.removeListener=function(a,b,c,d){var f=e?e+a:a;if(!this._events||!this._events[f])return this;var g=this._events[f],h=[];if(b)if(g.fn)(g.fn!==b||d&&!g.once||c&&g.context!==c)&&h.push(g);else for(var i=0,j=g.length;i<j;i++)(g[i].fn!==b||d&&!g[i].once||c&&g[i].context!==c)&&h.push(g[i]);return h.length?this._events[f]=1===h.length?h[0]:h:delete this._events[f],this},c.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[e?e+a:a]:this._events=e?{}:Object.create(null),this):this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=e,"undefined"!=typeof a&&(a.exports=c)}),lf=b(kf),mf=c(function(a){a.exports=function(a,b){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return a.apply(b,c)}}}),nf=b(mf),of=Object.freeze({default:nf}),pf=c(function(a){function c(a){return"[object Array]"===w.call(a)}function d(a){return"[object ArrayBuffer]"===w.call(a)}function e(a){return"undefined"!=typeof FormData&&a instanceof FormData}function f(a){var b;return b="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer&&a.buffer instanceof ArrayBuffer}function g(a){return"string"==typeof a}function h(a){return"number"==typeof a}function i(a){return"undefined"==typeof a}function j(a){return null!==a&&"object"===("undefined"==typeof a?"undefined":we(a))}function k(a){return"[object Date]"===w.call(a)}function l(a){return"[object File]"===w.call(a)}function m(a){return"[object Blob]"===w.call(a)}function n(a){return"[object Function]"===w.call(a)}function o(a){return j(a)&&n(a.pipe)}function p(a){return"undefined"!=typeof URLSearchParams&&a instanceof URLSearchParams}function q(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function r(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function s(a,b){if(null!==a&&"undefined"!=typeof a)if("object"===("undefined"==typeof a?"undefined":we(a))||c(a)||(a=[a]),c(a))for(var d=0,e=a.length;d<e;d++)b.call(null,a[d],d,a);else for(var f in a)a.hasOwnProperty(f)&&b.call(null,a[f],f,a)}function t(){function a(a,c){"object"===we(b[c])&&"object"===("undefined"==typeof a?"undefined":we(a))?b[c]=t(b[c],a):b[c]=a}for(var b={},c=0,d=arguments.length;c<d;c++)s(arguments[c],a);return b}function u(a,b,c){return s(b,function(b,d){c&&"function"==typeof b?a[d]=v(b,c):a[d]=b}),a}var v=b(of),w=Object.prototype.toString;a.exports={isArray:c,isArrayBuffer:d,isFormData:e,isArrayBufferView:f,isString:g,isNumber:h,isObject:j,isUndefined:i,isDate:k,isFile:l,isBlob:m,isFunction:n,isStream:o,isURLSearchParams:p,isStandardBrowserEnv:r,forEach:s,merge:t,extend:u,trim:q}}),qf=b(pf),rf=pf.isArray,sf=pf.isArrayBuffer,tf=pf.isFormData,uf=pf.isArrayBufferView,vf=pf.isString,wf=pf.isNumber,xf=pf.isObject,yf=pf.isUndefined,zf=pf.isDate,Af=pf.isFile,Bf=pf.isBlob,Cf=pf.isFunction,Df=pf.isStream,Ef=pf.isURLSearchParams,Ff=pf.isStandardBrowserEnv,Gf=pf.forEach,Hf=pf.merge,If=pf.extend,Jf=pf.trim,Kf=Object.freeze({default:qf,isArray:rf,isArrayBuffer:sf,isFormData:tf,isArrayBufferView:uf,isString:vf,isNumber:wf,isObject:xf,isUndefined:yf,isDate:zf,isFile:Af,isBlob:Bf,isFunction:Cf,isStream:Df,isURLSearchParams:Ef,isStandardBrowserEnv:Ff,forEach:Gf,merge:Hf,extend:If,trim:Jf}),Lf=c(function(a){var c=b(q),d=c.JSON||(c.JSON={stringify:JSON.stringify});a.exports=function(a){return d.stringify.apply(d,arguments)}}),Mf=b(Lf),Nf=Object.freeze({default:Mf}),Of=c(function(a){a.exports={default:b(Nf),__esModule:!0}}),Pf=b(Of),Qf=c(function(a){var c=b(Kf);a.exports=function(a,b){c.forEach(a,function(c,d){d!==b&&d.toUpperCase()===b.toUpperCase()&&(a[b]=c,delete a[d])})}}),Rf=b(Qf),Sf=Object.freeze({default:Rf}),Tf=c(function(a){function c(a,b){!d.isUndefined(a)&&d.isUndefined(a["Content-Type"])&&(a["Content-Type"]=b)}var d=b(Kf),e=b(Sf),f=/^\)\]\}',?\n/,g={"Content-Type":"application/x-www-form-urlencoded"};a.exports={transformRequest:[function(a,b){return e(b,"Content-Type"),d.isFormData(a)||d.isArrayBuffer(a)||d.isStream(a)||d.isFile(a)||d.isBlob(a)?a:d.isArrayBufferView(a)?a.buffer:d.isURLSearchParams(a)?(c(b,"application/x-www-form-urlencoded;charset=utf-8"),a.toString()):d.isObject(a)?(c(b,"application/json;charset=utf-8"),Pf(a)):a}],transformResponse:[function(a){if("string"==typeof a){a=a.replace(f,"");try{a=JSON.parse(a)}catch(a){}}return a}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:d.merge(g),post:d.merge(g),put:d.merge(g)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(a){return a>=200&&a<300}}}),Uf=b(Tf),Vf=Tf.transformRequest,Wf=Tf.transformResponse,Xf=Tf.headers,Yf=Tf.timeout,Zf=Tf.xsrfCookieName,$f=Tf.xsrfHeaderName,_f=Tf.maxContentLength,ag=Tf.validateStatus,bg=Object.freeze({default:Uf,transformRequest:Vf,transformResponse:Wf,headers:Xf,timeout:Yf,xsrfCookieName:Zf,xsrfHeaderName:$f,maxContentLength:_f,validateStatus:ag}),cg=c(function(a){function c(){this.handlers=[]}var d=b(Kf);c.prototype.use=function(a,b){return this.handlers.push({fulfilled:a,rejected:b}),this.handlers.length-1},c.prototype.eject=function(a){this.handlers[a]&&(this.handlers[a]=null)},c.prototype.forEach=function(a){d.forEach(this.handlers,function(b){null!==b&&a(b)})},a.exports=c}),dg=b(cg),eg=Object.freeze({default:dg}),fg=c(function(a){var c=b(Kf);a.exports=function(a,b,d){return c.forEach(d,function(c){a=c(a,b)}),a}}),gg=b(fg),hg=Object.freeze({default:gg}),ig=c(function(a){a.exports=function(a,b,c,d){return a.config=b,c&&(a.code=c),a.response=d,a}}),jg=b(ig),kg=Object.freeze({default:jg}),lg=c(function(a){var c=b(kg);a.exports=function(a,b,d,e){var f=new Error(a);return c(f,b,d,e)}}),mg=b(lg),ng=Object.freeze({default:mg}),og=c(function(a){var c=b(ng);a.exports=function(a,b,d){var e=d.config.validateStatus;d.status&&e&&!e(d.status)?b(c("Request failed with status code "+d.status,d.config,null,d)):a(d)}}),pg=b(og),qg=Object.freeze({default:pg}),rg=c(function(a){function c(a){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var d=b(Kf);a.exports=function(a,b,e){if(!b)return a;var f;if(e)f=e(b);else if(d.isURLSearchParams(b))f=b.toString();else{var g=[];d.forEach(b,function(a,b){null!==a&&"undefined"!=typeof a&&(d.isArray(a)&&(b+="[]"),d.isArray(a)||(a=[a]),d.forEach(a,function(a){d.isDate(a)?a=a.toISOString():d.isObject(a)&&(a=Pf(a)),g.push(c(b)+"="+c(a))}))}),f=g.join("&")}return f&&(a+=(a.indexOf("?")===-1?"?":"&")+f),a}}),sg=b(rg),tg=Object.freeze({default:sg}),ug=c(function(a){var c=b(Kf);a.exports=function(a){var b,d,e,f={};return a?(c.forEach(a.split("\n"),function(a){e=a.indexOf(":"),b=c.trim(a.substr(0,e)).toLowerCase(),d=c.trim(a.substr(e+1)),b&&(f[b]=f[b]?f[b]+", "+d:d)}),f):f}}),vg=b(ug),wg=Object.freeze({default:vg}),xg=c(function(a){var c=b(Kf);a.exports=c.isStandardBrowserEnv()?function(){function a(a){var b=a;return d&&(e.setAttribute("href",b),b=e.href),e.setAttribute("href",b),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}var b,d=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");return b=a(window.location.href),function(d){var e=c.isString(d)?a(d):d;return e.protocol===b.protocol&&e.host===b.host}}():function(){return function(){return!0}}()}),yg=b(xg),zg=Object.freeze({default:yg}),Ag=c(function(a){function b(){this.message="String contains an invalid character"}function c(a){for(var c,e,f=String(a),g="",h=0,i=d;f.charAt(0|h)||(i="=",h%1);g+=i.charAt(63&c>>8-h%1*8)){if(e=f.charCodeAt(h+=.75),e>255)throw new b;c=c<<8|e}return g}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.prototype=new Error,b.prototype.code=5,b.prototype.name="InvalidCharacterError",a.exports=c}),Bg=b(Ag),Cg=Object.freeze({default:Bg}),Dg=c(function(a){var c=b(Kf);a.exports=c.isStandardBrowserEnv()?function(){return{write:function(a,b,d,e,f,g){var h=[];h.push(a+"="+encodeURIComponent(b)),c.isNumber(d)&&h.push("expires="+new Date(d).toGMTString()),c.isString(e)&&h.push("path="+e),c.isString(f)&&h.push("domain="+f),g===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(a){var b=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return b?decodeURIComponent(b[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()}),Eg=b(Dg),Fg=Object.freeze({default:Eg}),Gg=c(function(a){var c=b(Kf),d=b(qg),e=b(tg),f=b(wg),g=b(zg),h=b(ng),j="undefined"!=typeof window&&window.btoa||b(Cg);a.exports=function(a){return new pd(function(k,l){var m=a.data,n=a.headers;c.isFormData(m)&&delete n["Content-Type"];var o=new XMLHttpRequest,p="onreadystatechange",q=!1;if("test"===i.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in o||g(a.url)||(o=new window.XDomainRequest,p="onload",q=!0,o.onprogress=function(){},o.ontimeout=function(){}),a.auth){var r=a.auth.username||"",s=a.auth.password||"";n.Authorization="Basic "+j(r+":"+s)}if(o.open(a.method.toUpperCase(),e(a.url,a.params,a.paramsSerializer),!0),o.timeout=a.timeout,o[p]=function(){if(o&&(4===o.readyState||q)&&0!==o.status){var b="getAllResponseHeaders"in o?f(o.getAllResponseHeaders()):null,c=a.responseType&&"text"!==a.responseType?o.response:o.responseText,e={data:c,status:1223===o.status?204:o.status,statusText:1223===o.status?"No Content":o.statusText,headers:b,config:a,request:o};d(k,l,e),o=null}},o.onerror=function(){l(h("Network Error",a)),o=null},o.ontimeout=function(){l(h("timeout of "+a.timeout+"ms exceeded",a,"ECONNABORTED")),o=null},c.isStandardBrowserEnv()){var t=b(Fg),u=a.withCredentials||g(a.url)?t.read(a.xsrfCookieName):void 0;u&&(n[a.xsrfHeaderName]=u)}if("setRequestHeader"in o&&c.forEach(n,function(a,b){"undefined"==typeof m&&"content-type"===b.toLowerCase()?delete n[b]:o.setRequestHeader(b,a)}),a.withCredentials&&(o.withCredentials=!0),a.responseType)try{o.responseType=a.responseType}catch(a){if("json"!==o.responseType)throw a}"function"==typeof a.progress&&("post"===a.method||"put"===a.method?o.upload.addEventListener("progress",a.progress):"get"===a.method&&o.addEventListener("progress",a.progress)),void 0===m&&(m=null),o.send(m)})}}),Hg=b(Gg),Ig=Object.freeze({default:Hg}),Jg=c(function(a){var c=b(Kf),d=b(hg);a.exports=function(a){a.headers=a.headers||{},a.data=d(a.data,a.headers,a.transformRequest),a.headers=c.merge(a.headers.common||{},a.headers[a.method]||{},a.headers||{}),c.forEach(["delete","get","head","post","put","patch","common"],function(b){delete a.headers[b]});var e;return"function"==typeof a.adapter?e=a.adapter:"undefined"!=typeof XMLHttpRequest?e=b(Ig):"undefined"!=typeof i&&(e=b(Ig)),pd.resolve(a).then(e).then(function(b){return b.data=d(b.data,b.headers,a.transformResponse),b},function(b){return b&&b.response&&(b.response.data=d(b.response.data,b.response.headers,a.transformResponse)),pd.reject(b)})}}),Kg=b(Jg),Lg=Object.freeze({default:Kg}),Mg=c(function(a){a.exports=function(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)}}),Ng=b(Mg),Og=Object.freeze({default:Ng}),Pg=c(function(a){a.exports=function(a,b){return a.replace(/\/+$/,"")+"/"+b.replace(/^\/+/,"")}}),Qg=b(Pg),Rg=Object.freeze({default:Qg}),Sg=c(function(a){function c(a){this.defaults=e.merge(d,a),this.interceptors={request:new f,response:new f}}var d=b(bg),e=b(Kf),f=b(eg),g=b(Lg),h=b(Og),i=b(Rg);c.prototype.request=function(a){"string"==typeof a&&(a=e.merge({url:arguments[0]},arguments[1])),a=e.merge(d,this.defaults,{method:"get"},a),a.baseURL&&!h(a.url)&&(a.url=i(a.baseURL,a.url));var b=[g,void 0],c=pd.resolve(a);for(this.interceptors.request.forEach(function(a){b.unshift(a.fulfilled,a.rejected)}),this.interceptors.response.forEach(function(a){b.push(a.fulfilled,a.rejected)});b.length;)c=c.then(b.shift(),b.shift());return c},e.forEach(["delete","get","head"],function(a){c.prototype[a]=function(b,c){return this.request(e.merge(c||{},{method:a,url:b}))}}),e.forEach(["post","put","patch"],function(a){c.prototype[a]=function(b,c,d){return this.request(e.merge(d||{},{method:a,url:b,data:c}))}}),a.exports=c}),Tg=b(Sg),Ug=Object.freeze({default:Tg}),Vg=c(function(a){a.exports=function(a){return function(b){return a.apply(null,b)}}}),Wg=b(Vg),Xg=Object.freeze({default:Wg}),Yg=c(function(a){function c(a){var b=new f(a),c=e(f.prototype.request,b);return d.extend(c,f.prototype,b),d.extend(c,b),c}var d=b(Kf),e=b(of),f=b(Ug),g=a.exports=c();g.Axios=f,g.create=function(a){return c(a)},g.all=function(a){return pd.all(a)},g.spread=b(Xg)}),Zg=b(Yg),$g=Object.freeze({default:Zg}),_g=c(function(a){a.exports=b($g)}),ah=b(_g),bh=c(function(a){var b;if(j.crypto&&crypto.getRandomValues){var c=new Uint8Array(16);b=function(){return crypto.getRandomValues(c),c}}if(!b){var d=new Array(16);b=function(){for(var a,b=0;b<16;b++)0===(3&b)&&(a=4294967296*Math.random()),d[b]=a>>>((3&b)<<3)&255;return d}}a.exports=b}),ch=b(bh),dh=Object.freeze({default:ch}),eh=c(function(a){function c(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){e<16&&(b[d+e++]=i[a])});e<16;)b[d+e++]=0;return b}function d(a,b){var c=b||0,d=h;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function e(a,b,c){var e=b&&c||0,f=b||[];a=a||{};var g=void 0!==a.clockseq?a.clockseq:m,h=void 0!==a.msecs?a.msecs:(new Date).getTime(),i=void 0!==a.nsecs?a.nsecs:o+1,j=h-n+(i-o)/1e4;if(j<0&&void 0===a.clockseq&&(g=g+1&16383),(j<0||h>n)&&void 0===a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");n=h,o=i,m=g,h+=122192928e5;var k=(1e4*(268435455&h)+i)%4294967296;f[e++]=k>>>24&255,f[e++]=k>>>16&255,f[e++]=k>>>8&255,f[e++]=255&k;var p=h/4294967296*1e4&268435455;f[e++]=p>>>8&255,f[e++]=255&p,f[e++]=p>>>24&15|16,f[e++]=p>>>16&255,f[e++]=g>>>8|128,f[e++]=255&g;for(var q=a.node||l,r=0;r<6;r++)f[e+r]=q[r];return b?b:d(f)}function f(a,b,c){var e=b&&c||0;"string"==typeof a&&(b="binary"==a?new Array(16):null,a=null),a=a||{};var f=a.random||(a.rng||g)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,b)for(var h=0;h<16;h++)b[e+h]=f[h];return b||d(f)}for(var g=b(dh),h=[],i={},j=0;j<256;j++)h[j]=(j+256).toString(16).substr(1),i[h[j]]=j;var k=g(),l=[1|k[0],k[1],k[2],k[3],k[4],k[5]],m=16383&(k[6]<<8|k[7]),n=0,o=0,p=f;p.v1=e,p.v4=f,p.parse=c,p.unparse=d,a.exports=p}),fh=b(eh),gh=c(function(a){var c=b(ra),d=b(le).f;b(fa)("getOwnPropertyDescriptor",function(){return function(a,b){return d(c(a),b)}})});b(gh);var hh=c(function(a){var c=b(q).Object;a.exports=function(a,b){return c.getOwnPropertyDescriptor(a,b)}}),ih=b(hh),jh=Object.freeze({default:ih}),kh=c(function(a){a.exports={default:b(jh),__esModule:!0}}),lh=b(kh),mh=c(function(a,b){!function(){var c={VERSION:"2.3.5",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(a,b){var d="string"==typeof a.initial?{state:a.initial}:a.initial,e=a.terminal||a.final,f=b||a.target||{},g=a.events||[],h=a.callbacks||{},i={},j={},k=function(a){var b=a.from instanceof Array?a.from:a.from?[a.from]:[c.WILDCARD];i[a.name]=i[a.name]||{};for(var d=0;d<b.length;d++)j[b[d]]=j[b[d]]||[],j[b[d]].push(a.name),i[a.name][b[d]]=a.to||b[d]};d&&(d.event=d.event||"startup",k({name:d.event,from:"none",to:d.state}));for(var l=0;l<g.length;l++)k(g[l]);for(var m in i)i.hasOwnProperty(m)&&(f[m]=c.buildEvent(m,i[m]));for(var m in h)h.hasOwnProperty(m)&&(f[m]=h[m]);return f.current="none",f.is=function(a){return a instanceof Array?a.indexOf(this.current)>=0:this.current===a},f.can=function(a){return!this.transition&&(i[a].hasOwnProperty(this.current)||i[a].hasOwnProperty(c.WILDCARD))},f.cannot=function(a){return!this.can(a)},f.transitions=function(){return j[this.current]},f.isFinished=function(){return this.is(e)},f.error=a.error||function(a,b,c,d,e,f,g){throw g||f},d&&!d.defer&&f[d.event](),f},doCallback:function(a,b,d,e,f,g){if(b)try{return b.apply(a,[d,e,f].concat(g))}catch(b){return a.error(d,e,f,g,c.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",b)}},beforeAnyEvent:function(a,b,d,e,f){return c.doCallback(a,a.onbeforeevent,b,d,e,f)},afterAnyEvent:function(a,b,d,e,f){return c.doCallback(a,a.onafterevent||a.onevent,b,d,e,f)},leaveAnyState:function(a,b,d,e,f){return c.doCallback(a,a.onleavestate,b,d,e,f)},enterAnyState:function(a,b,d,e,f){return c.doCallback(a,a.onenterstate||a.onstate,b,d,e,f)},changeState:function(a,b,d,e,f){return c.doCallback(a,a.onchangestate,b,d,e,f)},beforeThisEvent:function(a,b,d,e,f){return c.doCallback(a,a["onbefore"+b],b,d,e,f)},afterThisEvent:function(a,b,d,e,f){return c.doCallback(a,a["onafter"+b]||a["on"+b],b,d,e,f)},leaveThisState:function(a,b,d,e,f){return c.doCallback(a,a["onleave"+d],b,d,e,f)},enterThisState:function(a,b,d,e,f){return c.doCallback(a,a["onenter"+e]||a["on"+e],b,d,e,f)},beforeEvent:function(a,b,d,e,f){if(!1===c.beforeThisEvent(a,b,d,e,f)||!1===c.beforeAnyEvent(a,b,d,e,f))return!1},afterEvent:function(a,b,d,e,f){c.afterThisEvent(a,b,d,e,f),c.afterAnyEvent(a,b,d,e,f)},leaveState:function(a,b,d,e,f){var g=c.leaveThisState(a,b,d,e,f),h=c.leaveAnyState(a,b,d,e,f);return!1!==g&&!1!==h&&(c.ASYNC===g||c.ASYNC===h?c.ASYNC:void 0)},enterState:function(a,b,d,e,f){c.enterThisState(a,b,d,e,f),c.enterAnyState(a,b,d,e,f)},buildEvent:function(a,b){return function(){var d=this.current,e=b[d]||b[c.WILDCARD]||d,f=Array.prototype.slice.call(arguments);if(this.transition)return this.error(a,d,e,f,c.Error.PENDING_TRANSITION,"event "+a+" inappropriate because previous transition did not complete");if(this.cannot(a))return this.error(a,d,e,f,c.Error.INVALID_TRANSITION,"event "+a+" inappropriate in current state "+this.current);if(!1===c.beforeEvent(this,a,d,e,f))return c.Result.CANCELLED;if(d===e)return c.afterEvent(this,a,d,e,f),c.Result.NOTRANSITION;var g=this;this.transition=function(){return g.transition=null,g.current=e,c.enterState(g,a,d,e,f),c.changeState(g,a,d,e,f),c.afterEvent(g,a,d,e,f),c.Result.SUCCEEDED},this.transition.cancel=function(){g.transition=null,c.afterEvent(g,a,d,e,f)};var h=c.leaveState(this,a,d,e,f);return!1===h?(this.transition=null,c.Result.CANCELLED):c.ASYNC===h?c.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof b?("undefined"!=typeof a&&a.exports&&(b=a.exports=c),b.StateMachine=c):"function"==typeof h&&h.amd?h(function(a){return c}):"undefined"!=typeof window?window.StateMachine=c:"undefined"!=typeof self&&(self.StateMachine=c)}()}),nh=b(mh),oh=g.WebSocket||g.MozWebSocket,ph=c(function(a){var c=b(dd),d=b($d).getWeak,e=b(C),f=b(z),g=b(Cc),h=b(Oc),i=b(zb),j=b(ua),k=i(5),l=i(6),m=0,n=function(a){return a._l||(a._l=new o)},o=function(){this.a=[]},p=function(a,b){return k(a.a,function(a){return a[0]===b})};o.prototype={get:function(a){var b=p(this,a);if(b)return b[1]},has:function(a){return!!p(this,a)},set:function(a,b){var c=p(this,a);c?c[1]=b:this.a.push([a,b])},delete:function(a){var b=l(this.a,function(b){return b[0]===a});return~b&&this.a.splice(b,1),!!~b}},a.exports={getConstructor:function(a,b,e,i){var k=a(function(a,c){g(a,k,b,"_i"),a._i=m++,a._l=void 0,void 0!=c&&h(c,e,a[i],a)});return c(k.prototype,{delete:function(a){if(!f(a))return!1;var b=d(a);return b===!0?n(this).delete(a):b&&j(b,this._i)&&delete b[this._i]},has:function(a){if(!f(a))return!1;var b=d(a);return b===!0?n(this).has(a):b&&j(b,this._i)}}),k},def:function(a,b,c){var f=d(e(b),!0);return f===!0?n(a).set(b,c):f[a._i]=c,a},ufstore:n}}),qh=b(ph),rh=ph.getConstructor,sh=ph.def,th=ph.ufstore,uh=Object.freeze({default:qh,getConstructor:rh,def:sh,ufstore:th}),vh=c(function(a){var c=b(m),d=b(ca),e=b($d),f=b(F),g=b(_),h=b(dd),i=b(Oc),j=b(Cc),k=b(z),l=b(hc),n=b(V).f,o=b(zb)(0),p=b(I);a.exports=function(a,b,m,q,r,s){var t=c[a],u=t,v=r?"set":"add",w=u&&u.prototype,x={};return p&&"function"==typeof u&&(s||w.forEach&&!f(function(){(new u).entries().next()}))?(u=b(function(b,c){j(b,u,a,"_c"),b._c=new t,void 0!=c&&i(c,r,b[v],b)}),o("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(a){var b="add"==a||"set"==a;a in w&&(!s||"clear"!=a)&&g(u.prototype,a,function(c,d){if(j(this,u,a),!b&&s&&!k(c))return"get"==a&&void 0;var e=this._c[a](0===c?0:c,d);return b?this:e})}),"size"in w&&n(u.prototype,"size",{get:function(){return this._c.size}})):(u=q.getConstructor(b,a,r,v),h(u.prototype,m),e.NEED=!0),l(u,a),x[a]=u,d(d.G+d.W+d.F,x),s||q.setStrong(u,a,r),u}}),wh=b(vh),xh=Object.freeze({default:wh}),yh=c(function(a){var c,d=b(zb)(0),e=b(Rb),f=b($d),g=b(Ad),h=b(uh),i=b(z),j=f.getWeak,k=Object.isExtensible,l=h.ufstore,m={},n=function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},o={get:function(a){if(i(a)){var b=j(a);return b===!0?l(this).get(a):b?b[this._i]:void 0}},set:function(a,b){return h.def(this,a,b)}},p=a.exports=b(xh)("WeakMap",n,o,h,!0,!0);7!=(new p).set((Object.freeze||Object)(m),7).get(m)&&(c=h.getConstructor(n),g(c.prototype,o),f.NEED=!0,d(["delete","has","get","set"],function(a){var b=p.prototype,d=b[a];e(b,a,function(b,e){if(i(b)&&!k(b)){this._f||(this._f=new c);var f=this._f[a](b,e);return"set"==a?this:f}return d.call(this,b,e)})}))});b(yh);var zh=c(function(a){a.exports=b(q).WeakMap}),Ah=b(zh),Bh=Object.freeze({default:Ah}),Ch=c(function(a){a.exports={default:b(Bh),__esModule:!0}}),Dh=b(Ch),Eh=c(function(a){var c=b(V),d=b(Y);a.exports=function(a,b,e){b in a?c.f(a,b,d(0,e)):a[b]=e}}),Fh=b(Eh),Gh=Object.freeze({default:Fh}),Hh=c(function(a){var c=b(w),d=b(ca),e=b(kb),f=b(Fc),g=b(Ic),h=b(Aa),i=b(Gh),j=b(Lc);d(d.S+d.F*!b(jd)(function(a){Array.from(a)}),"Array",{from:function(a){var b,d,k,l,m=e(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=j(m);if(q&&(p=c(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&g(s))for(b=h(m.length),d=new n(b);b>r;r++)i(d,r,q?p(m[r],r):m[r]);else for(l=s.call(m),d=new n;!(k=l.next()).done;r++)i(d,r,q?f(l,p,[k.value,r],!0):k.value);return d.length=r,d}})});b(Hh);var Ih=c(function(a){a.exports=b(q).Array.from}),Jh=b(Ih),Kh=Object.freeze({default:Jh}),Lh=c(function(a){a.exports={default:b(Kh),__esModule:!0}}),Mh=b(Lh),Nh=Object.freeze({default:Mh}),Oh=c(function(a,c){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=b(Nh),f=d(e);c.default=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return(0,f.default)(a)}}),Ph=b(Oh),Qh=c(function(a){var c=b(V).f,d=b(ec),e=b(dd),f=b(w),g=b(Cc),h=b(oa),i=b(Oc),j=b(qc),k=b(uc),l=b(gd),m=b(I),n=b($d).fastKey,o=m?"_s":"size",p=function(a,b){var c,d=n(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};a.exports={getConstructor:function(a,b,j,k){var l=a(function(a,c){g(a,l,b,"_i"),a._i=d(null),a._f=void 0,a._l=void 0,a[o]=0,void 0!=c&&i(c,j,a[k],a)});return e(l.prototype,{clear:function(){for(var a=this,b=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete b[c.i];a._f=a._l=void 0,a[o]=0},delete:function(a){var b=this,c=p(b,a);if(c){var d=c.n,e=c.p;delete b._i[c.i],c.r=!0,e&&(e.n=d),d&&(d.p=e),b._f==c&&(b._f=d),b._l==c&&(b._l=e),b[o]--}return!!c},forEach:function(a){g(this,l,"forEach");for(var b,c=f(a,arguments.length>1?arguments[1]:void 0,3);b=b?b.n:this._f;)for(c(b.v,b.k,this);b&&b.r;)b=b.p},has:function(a){return!!p(this,a)}}),m&&c(l.prototype,"size",{get:function(){return h(this[o])}}),l},def:function(a,b,c){var d,e,f=p(a,b);return f?f.v=c:(a._l=f={i:e=n(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[o]++,"F"!==e&&(a._i[e]=f)),a},getEntry:p,setStrong:function(a,b,c){j(a,b,function(a,b){this._t=a,this._k=b,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?k(0,c.k):"values"==b?k(0,c.v):k(0,[c.k,c.v]):(a._t=void 0,k(1))},c?"entries":"values",!c,!0),l(b)}}}),Rh=b(Qh),Sh=Qh.getConstructor,Th=Qh.def,Uh=Qh.getEntry,Vh=Qh.setStrong,Wh=Object.freeze({default:Rh,getConstructor:Sh,def:Th,getEntry:Uh,setStrong:Vh}),Xh=c(function(a){var c=b(Wh);a.exports=b(xh)("Set",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return c.def(this,a=0===a?0:a,a)}},c)});b(Xh);var Yh=c(function(a){var c=b(Oc);a.exports=function(a,b){var d=[];return c(a,!1,d.push,d,b),d}}),Zh=b(Yh),$h=Object.freeze({default:Zh}),_h=c(function(a){var c=b(zc),d=b($h);a.exports=function(a){return function(){if(c(this)!=a)throw TypeError(a+"#toJSON isn't generic");return d(this)}}}),ai=b(_h),bi=Object.freeze({default:ai}),ci=c(function(a){var c=b(ca);c(c.P+c.R,"Set",{toJSON:b(bi)("Set")})});b(ci);var di=c(function(a){a.exports=b(q).Set}),ei=b(di),fi=Object.freeze({default:ei}),gi=c(function(a){a.exports={default:b(fi),__esModule:!0}}),hi=b(gi),ii=c(function(a){var c=b(ca);c(c.S+c.F*!b(I),"Object",{defineProperty:b(V).f})});b(ii);var ji=c(function(a){var c=b(q).Object;a.exports=function(a,b,d){return c.defineProperty(a,b,d)}}),ki=b(ji),li=Object.freeze({default:ki}),mi=c(function(a){a.exports={default:b(li),__esModule:!0}}),ni=b(mi),oi=Object.freeze({default:ni}),pi=c(function(a,c){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=b(oi),f=d(e);c.default=function(a,b,c){return b in a?(0,f.default)(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}}),qi=b(pi),ri=c(function(a){var c=b(kb),d=b(Xb);b(fa)("keys",function(){return function(a){return d(c(a))}})});b(ri);var si,ti=c(function(a){a.exports=b(q).Object.keys}),ui=b(ti),vi=Object.freeze({default:ui}),wi=c(function(a){a.exports={default:b(vi),__esModule:!0}}),xi=b(wi),yi=c(function(a){function b(a){return c(Object(a))}var c=Object.getPrototypeOf;a.exports=b}),zi=b(yi),Ai=Object.freeze({default:zi}),Bi=c(function(a){function b(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}a.exports=b}),Ci=b(Bi),Di=Object.freeze({default:Ci}),Ei=c(function(a){function b(a){return!!a&&"object"==typeof a}a.exports=b}),Fi=b(Ei),Gi=Object.freeze({default:Fi}),Hi=c(function(a){function c(a){if(!f(a)||l.call(a)!=g||e(a))return!1;var b=d(a);if(null===b)return!0;var c=j.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&i.call(c)==k}var d=b(Ai),e=b(Di),f=b(Gi),g="[object Object]",h=Object.prototype,i=Function.prototype.toString,j=h.hasOwnProperty,k=i.call(Object),l=h.toString;a.exports=c}),Ii=b(Hi),Ji=function a(b){var c=new pd(b[0]);return 1===b.length?c:c.catch(function(){return a(b.slice(1))})},Ki=function(a){return function(b){return a(b),b}},Li=jf("LC:Cache"),Mi=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?"anonymous":arguments[0];Id(this,a),this.name=b,this._map={}}return a.prototype.get=function(a){var b=this._map[a];if(b){var c=b.expiredAt&&b.expiredAt<Date.now();if(!c)return Li("["+this.name+"] hit: "+a+" "+b.value),b.value;Li("["+this.name+"] expired: "+a),delete this._map[a]}return Li("["+this.name+"] missed: "+a),null},a.prototype.set=function(a,b,c){Li("["+this.name+"] set: "+a+" "+b+" "+c);var d=this._map[a]={value:b};"number"==typeof c&&(d.expiredAt=Date.now()+c)},a}(),Ni=function(a){return a?"string"==typeof a?new Date(a):"Date"===a.__type&&a.iso?new Date(a.iso):a:a},Oi=function(a,b){return xi(b).reduce(function(c,d){var e=a[d]||d;return Gd(c,qi({},e,b[d]))},{})},Pi=g.navigator&&g.navigator.userAgent&&g.navigator.userAgent.indexOf("MSIE 10.")!==-1,Qi=function a(b,c){return b[c]||(b.__proto__?a(b.__proto__,c):void 0)},Ri=function(a,b){return Mh(new hi([].concat(Ph(a),Ph(b))))},Si=function(a,b){return Mh(function(b){return new hi(a.filter(function(a){return!b.has(a)}))}(new hi(b)))},Ti=new Dh,Ui=function(a){return Ti.has(a)||Ti.set(a,{}),Ti.get(a)},Vi=function a(b){if(!Ii(b))return b;var c=Gd({},b);for(var d in c)if({}.hasOwnProperty.call(c,d)){var e=c[d];null===e?delete c[d]:c[d]=a(e)}return c},Wi=function(a){return Vi(JSON.parse(Pf(a)))},Xi=function(a){return Array.isArray(a)?a:void 0===a||null===a?[]:[a]},Yi=jf("LC:WebSocketPlus"),Zi=6e4,$i=18e4,_i=function(a){return Math.min(1e3<<a,3e5)},aj=function(a,b,c){return Gd({},c,{value:function(){var a;if(!this.is("connected")){var d=this.current;throw console.warn(b+" should not be called when the connection is "+d),(this.is("offline")||this.is("reconnecting"))&&console.warn("disconnect and reconnect event should be handled to avoid such calls."),new Error("Connection unavailable")}for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=c.value).call.apply(a,[this].concat(f))}})},bj=(si=function(a){function b(c,d){if(Id(this,b),Yi("initializing WebSocketPlus"),"undefined"==typeof oh)throw new Error("WebSocket is undefined. Polyfill is required in this runtime.");var e=ze(this,a.call(this));return"function"!=typeof c?e._getUrls=function(){return pd.resolve(c)}:e._getUrls=c,e._protocol=d,e.init(),e._createWs(e._getUrls,e._protocol).then(function(){return e.open()},function(a){return e.throw(a)}).catch(e.throw.bind(e)),e.__postponeTimers=e._postponeTimers.bind(e),e}return Ue(b,a),b.prototype._createWs=function(a,b){var c=this;return a().then(function(a){var d=a;return d instanceof Array||(d=[d]),Ji(d.map(function(a){return function(d,e){Yi("connect ["+a+"] "+b);var f=b?new oh(a,b):new oh(a);f.binaryType=c.binaryType||"arraybuffer",f.onopen=function(){return d(f)},f.onerror=function(b){return e(b instanceof Error?b:new Error("Failed to connect ["+a+"]"))}}})).then(function(a){return c._ws=a,c._ws.onclose=c._handleClose.bind(c),c._ws.onmessage=c._handleMessage.bind(c),a})})},b.prototype._destroyWs=function(){var a=this._ws;a&&(a.onopen=a.onclose=a.onerror=a.onmessage=null,this._ws=null,a.close())},b.prototype.onopen=function(){Yi("open"),this.emit("open")},b.prototype.onconnected=function(){this._startConnectionKeeper()},b.prototype.onleaveconnected=function(){this._stopConnectionKeeper()},b.prototype.onbeforedisconnect=function(){Yi("disconnect"),this.emit("disconnect")},b.prototype.ondisconnect=function(){this._destroyWs()},b.prototype.onreconnect=function(){Yi("reconnect"),this.emit("reconnect")},b.prototype.onoffline=function(a,b,c){var d=this,e=arguments.length<=3||void 0===arguments[3]?0:arguments[3],f=_i.call(null,e);Yi("schedule attempt="+e+" delay="+f),this.emit("schedule",e,f),this.__scheduledRetry&&clearTimeout(this.__scheduledRetry),this.__scheduledRetry=setTimeout(function(){d.is("offline")&&d.retry(e)},f)},b.prototype.onretry=function(a,b,c){var d=this,e=arguments.length<=3||void 0===arguments[3]?0:arguments[3];Yi("retry attempt="+e),this.emit("retry",e),this._createWs(this._getUrls,this._protocol).then(function(){return d.reconnect()},function(){return d.fail(e+1)})},b.prototype.onclose=function(){Yi("close"),this._ws&&this._ws.close()},b.prototype.onerror=function(a,b,c,d){Yi("error",d),this.emit("error",d)},b.prototype._ping=function(){Yi("ping");try{this.ping()}catch(a){console.warn("websocket ping error: "+a.message)}},b.prototype.ping=function(){this._ws.ping?this._ws.ping():console.warn("The WebSocket implement does not support sending ping frame.\n        Override ping method to use application defined ping/pong mechanism.")},b.prototype._postponeTimers=function(){var a=this;Yi("_postponeTimers"),this._clearTimers(),this._heartbeatTimer=setInterval(this._ping.bind(this),Zi),this._timeoutTimer=setTimeout(function(){Yi("timeout"),a.disconnect()},$i)},b.prototype._clearTimers=function(){this._heartbeatTimer&&clearInterval(this._heartbeatTimer),this._timeoutTimer&&clearTimeout(this._timeoutTimer)},b.prototype._startConnectionKeeper=function(){Yi("start connection keeper");var a=this._ws.addListener||this._ws.addEventListener;a.call(this._ws,"message",this.__postponeTimers),this._postponeTimers()},b.prototype._stopConnectionKeeper=function(){Yi("stop connection keeper");var a=this._ws.removeListener||this._ws.removeEventListener;a.call(this._ws,"message",this.__postponeTimers),this._clearTimers()},b.prototype._handleClose=function(a){Yi("ws closed ["+a.code+"] "+a.reason),this.isFinished()||this.handleClose(a)},b.prototype.handleClose=function(){this.disconnect()},b.prototype.send=function(a){Yi("send",a),this._ws.send(a)},b.prototype._handleMessage=function(a){Yi("message",a.data),this.handleMessage(a.data)},b.prototype.handleMessage=function(a){this.emit("message",a)},b}(lf),d(si.prototype,"_ping",[aj],lh(si.prototype,"_ping"),si.prototype),d(si.prototype,"send",[aj],lh(si.prototype,"send"),si.prototype),si);nh.create({target:bj.prototype,initial:{state:"initialized",event:"init",defer:!0},terminal:"closed",events:[{name:"open",from:"initialized",to:"connected"},{name:"disconnect",from:"connected",to:"offline"},{name:"retry",from:"offline",to:"reconnecting"},{name:"fail",from:"reconnecting",to:"offline"},{name:"reconnect",from:"reconnecting",to:"connected"},{name:"close",from:["connected","offline","reconnecting"],to:"closed"},{name:"throw",from:"*",to:"error"}]});var cj,dj,ej,fj,gj,hj={code:4100,message:"App not exists or realtime message service is disabled."},ij={code:4103,message:"Malformed clientId."},jj={code:4110,message:"Access denied by domain whitelist."},kj={code:4111},lj=function(a){var b=a.code,c=a.reason,d=a.appCode,e=a.detail,f=new Error(c||e);return Gd(f,{code:b,appCode:d,detail:e})},mj=c(function(a){!function(b,c){"function"==typeof h&&h.amd?h([],c):"object"==typeof a&&a&&a.exports?a.exports=c():(b.dcodeIO=b.dcodeIO||{}).Long=c()}(j,function(){function a(a,b,c){this.low=0|a,this.high=0|b,this.unsigned=!!c}function b(a){return(a&&a.__isLong__)===!0}function c(a,b){var c,d,f;return b?(a>>>=0,(f=0<=a&&a<256)&&(d=i[a])?d:(c=e(a,(0|a)<0?-1:0,!0),f&&(i[a]=c),c)):(a|=0,(f=-128<=a&&a<128)&&(d=h[a])?d:(c=e(a,a<0?-1:0,!1),f&&(h[a]=c),c))}function d(a,b){if(isNaN(a)||!isFinite(a))return b?q:p;if(b){if(a<0)return q;if(a>=m)return v}else{if(a<=-n)return w;if(a+1>=n)return u}return a<0?d(-a,b).neg():e(a%l|0,a/l|0,b)}function e(b,c,d){return new a(b,c,d)}function f(a,b,c){if(0===a.length)throw Error("empty string");if("NaN"===a||"Infinity"===a||"+Infinity"===a||"-Infinity"===a)return p;if("number"==typeof b?(c=b,b=!1):b=!!b,c=c||10,c<2||36<c)throw RangeError("radix");var e;if((e=a.indexOf("-"))>0)throw Error("interior hyphen");if(0===e)return f(a.substring(1),b,c).neg();for(var g=d(j(c,8)),h=p,i=0;i<a.length;i+=8){var k=Math.min(8,a.length-i),l=parseInt(a.substring(i,i+k),c);if(k<8){var m=d(j(c,k));h=h.mul(m).add(d(l))}else h=h.mul(g),h=h.add(d(l))}return h.unsigned=b,h}function g(b){return b instanceof a?b:"number"==typeof b?d(b):"string"==typeof b?f(b):e(b.low,b.high,b.unsigned)}a.__isLong__,Object.defineProperty(a.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),a.isLong=b;var h={},i={};a.fromInt=c,a.fromNumber=d,a.fromBits=e;var j=Math.pow;a.fromString=f,a.fromValue=g;var k=1<<24,l=4294967296,m=0x10000000000000000,n=m/2,o=c(k),p=c(0);a.ZERO=p;var q=c(0,!0);a.UZERO=q;var r=c(1);a.ONE=r;var s=c(1,!0);a.UONE=s;var t=c(-1);a.NEG_ONE=t;var u=e(-1,2147483647,!1);a.MAX_VALUE=u;var v=e(-1,-1,!0);a.MAX_UNSIGNED_VALUE=v;var w=e(0,-2147483648,!1);a.MIN_VALUE=w;var x=a.prototype;return x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},x.toString=function(a){if(a=a||10,a<2||36<a)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var b=d(a),c=this.div(b),e=c.mul(b).sub(this);return c.toString(a)+e.toInt().toString(a)}return"-"+this.neg().toString(a)}for(var f=d(j(a,6),this.unsigned),g=this,h="";;){var i=g.div(f),k=g.sub(i.mul(f)).toInt()>>>0,l=k.toString(a);if(g=i,g.isZero())return l+h;for(;l.length<6;)l="0"+l;h=""+l+h}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var a=0!=this.high?this.high:this.low,b=31;b>0&&0==(a&1<<b);b--);return 0!=this.high?b+33:b+1},x.isZero=function(){return 0===this.high&&0===this.low},x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1===(1&this.low)},x.isEven=function(){return 0===(1&this.low)},x.equals=function(a){return b(a)||(a=g(a)),(this.unsigned===a.unsigned||this.high>>>31!==1||a.high>>>31!==1)&&(this.high===a.high&&this.low===a.low)},x.eq=x.equals,x.notEquals=function(a){return!this.eq(a)},x.neq=x.notEquals,x.lessThan=function(a){return this.comp(a)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(a){return this.comp(a)<=0},x.lte=x.lessThanOrEqual,x.greaterThan=function(a){return this.comp(a)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(a){return this.comp(a)>=0},x.gte=x.greaterThanOrEqual,x.compare=function(a){if(b(a)||(a=g(a)),this.eq(a))return 0;var c=this.isNegative(),d=a.isNegative();return c&&!d?-1:!c&&d?1:this.unsigned?a.high>>>0>this.high>>>0||a.high===this.high&&a.low>>>0>this.low>>>0?-1:1:this.sub(a).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(r)},x.neg=x.negate,x.add=function(a){b(a)||(a=g(a));var c=this.high>>>16,d=65535&this.high,f=this.low>>>16,h=65535&this.low,i=a.high>>>16,j=65535&a.high,k=a.low>>>16,l=65535&a.low,m=0,n=0,o=0,p=0;return p+=h+l,o+=p>>>16,p&=65535,o+=f+k,n+=o>>>16,o&=65535,n+=d+j,m+=n>>>16,n&=65535,m+=c+i,m&=65535,e(o<<16|p,m<<16|n,this.unsigned)},x.subtract=function(a){return b(a)||(a=g(a)),this.add(a.neg())},x.sub=x.subtract,x.multiply=function(a){if(this.isZero())return p;if(b(a)||(a=g(a)),a.isZero())return p;if(this.eq(w))return a.isOdd()?w:p;if(a.eq(w))return this.isOdd()?w:p;if(this.isNegative())return a.isNegative()?this.neg().mul(a.neg()):this.neg().mul(a).neg();if(a.isNegative())return this.mul(a.neg()).neg();if(this.lt(o)&&a.lt(o))return d(this.toNumber()*a.toNumber(),this.unsigned);var c=this.high>>>16,f=65535&this.high,h=this.low>>>16,i=65535&this.low,j=a.high>>>16,k=65535&a.high,l=a.low>>>16,m=65535&a.low,n=0,q=0,r=0,s=0;return s+=i*m,r+=s>>>16,s&=65535,r+=h*m,q+=r>>>16,r&=65535,r+=i*l,q+=r>>>16,r&=65535,q+=f*m,n+=q>>>16,q&=65535,q+=h*l,n+=q>>>16,q&=65535,q+=i*k,n+=q>>>16,q&=65535,n+=c*m+f*l+h*k+i*j,n&=65535,e(r<<16|s,n<<16|q,this.unsigned)},x.mul=x.multiply,x.divide=function(a){if(b(a)||(a=g(a)),a.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?q:p;var c,e,f;if(this.unsigned)a.unsigned||(a=a.toUnsigned());else{if(this.eq(w)){if(a.eq(r)||a.eq(t))return w;if(a.eq(w))return r;var h=this.shr(1);return c=h.div(a).shl(1),c.eq(p)?a.isNegative()?r:t:(e=this.sub(a.mul(c)),f=c.add(e.div(a)))}if(a.eq(w))return this.unsigned?q:p;if(this.isNegative())return a.isNegative()?this.neg().div(a.neg()):this.neg().div(a).neg();if(a.isNegative())return this.div(a.neg()).neg()}if(this.unsigned){if(a.gt(this))return q;if(a.gt(this.shru(1)))return s;f=q}else f=p;for(e=this;e.gte(a);){c=Math.max(1,Math.floor(e.toNumber()/a.toNumber()));for(var i=Math.ceil(Math.log(c)/Math.LN2),k=i<=48?1:j(2,i-48),l=d(c),m=l.mul(a);m.isNegative()||m.gt(e);)c-=k,l=d(c,this.unsigned),m=l.mul(a);l.isZero()&&(l=r),f=f.add(l),e=e.sub(m)}return f},x.div=x.divide,x.modulo=function(a){return b(a)||(a=g(a)),this.sub(this.div(a).mul(a))},x.mod=x.modulo,x.not=function(){return e(~this.low,~this.high,this.unsigned)},x.and=function(a){return b(a)||(a=g(a)),e(this.low&a.low,this.high&a.high,this.unsigned)},x.or=function(a){return b(a)||(a=g(a)),e(this.low|a.low,this.high|a.high,this.unsigned)},x.xor=function(a){return b(a)||(a=g(a)),e(this.low^a.low,this.high^a.high,this.unsigned)},x.shiftLeft=function(a){return b(a)&&(a=a.toInt()),0===(a&=63)?this:a<32?e(this.low<<a,this.high<<a|this.low>>>32-a,this.unsigned):e(0,this.low<<a-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(a){return b(a)&&(a=a.toInt()),0===(a&=63)?this:a<32?e(this.low>>>a|this.high<<32-a,this.high>>a,this.unsigned):e(this.high>>a-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(a){if(b(a)&&(a=a.toInt()),a&=63,0===a)return this;var c=this.high;if(a<32){var d=this.low;return e(d>>>a|c<<32-a,c>>>a,this.unsigned)}return 32===a?e(c,0,this.unsigned):e(c>>>a-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.toSigned=function(){return this.unsigned?e(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:e(this.low,this.high,!0)},a})}),nj=b(mj),oj=Object.freeze({default:nj}),pj=c(function(a){!function(c,d){"function"==typeof h&&h.amd?h(["long"],d):"object"==typeof a&&a&&a.exports?a.exports=function(){var a;try{a=b(oj)}catch(a){}return d(a)}():(c.dcodeIO=c.dcodeIO||{}).ByteBuffer=d(c.dcodeIO.Long)}(j,function(a){function b(a){var b=0;return function(){return b<a.length?a.charCodeAt(b++):null}}function c(){var a=[],b=[];return function(){return 0===arguments.length?b.join("")+i.apply(String,a):(a.length+arguments.length>1024&&(b.push(i.apply(String,a)),a.length=0),void Array.prototype.push.apply(a,arguments))}}function d(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)}function e(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}var f=function(a,b,c){if("undefined"==typeof a&&(a=f.DEFAULT_CAPACITY),"undefined"==typeof b&&(b=f.DEFAULT_ENDIAN),"undefined"==typeof c&&(c=f.DEFAULT_NOASSERT),!c){if(a=0|a,a<0)throw RangeError("Illegal capacity");b=!!b,c=!!c}this.buffer=0===a?h:new ArrayBuffer(a),this.view=0===a?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=a,this.littleEndian=b,this.noAssert=c};f.VERSION="5.0.1",f.LITTLE_ENDIAN=!0,f.BIG_ENDIAN=!1,f.DEFAULT_CAPACITY=16,f.DEFAULT_ENDIAN=f.BIG_ENDIAN,f.DEFAULT_NOASSERT=!1,f.Long=a||null;var g=f.prototype;g.__isByteBuffer__,Object.defineProperty(g,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var h=new ArrayBuffer(0),i=String.fromCharCode;f.accessor=function(){return Uint8Array},f.allocate=function(a,b,c){return new f(a,b,c)},f.concat=function(a,b,c,d){"boolean"!=typeof b&&"string"==typeof b||(d=c,c=b,b=void 0);for(var e,g=0,h=0,i=a.length;h<i;++h)f.isByteBuffer(a[h])||(a[h]=f.wrap(a[h],b)),e=a[h].limit-a[h].offset,e>0&&(g+=e);if(0===g)return new f(0,c,d);var j,k=new f(g,c,d);for(h=0;h<i;)j=a[h++],e=j.limit-j.offset,e<=0||(k.view.set(j.view.subarray(j.offset,j.limit),k.offset),k.offset+=e);return k.limit=k.offset,k.offset=0,k},f.isByteBuffer=function(a){return(a&&a.__isByteBuffer__)===!0},f.type=function(){return ArrayBuffer},f.wrap=function(a,b,c,d){if("string"!=typeof b&&(d=c,c=b,b=void 0),"string"==typeof a)switch("undefined"==typeof b&&(b="utf8"),b){case"base64":return f.fromBase64(a,c);case"hex":return f.fromHex(a,c);case"binary":return f.fromBinary(a,c);case"utf8":return f.fromUTF8(a,c);case"debug":return f.fromDebug(a,c);default:throw Error("Unsupported encoding: "+b)}if(null===a||"object"!=typeof a)throw TypeError("Illegal buffer");var e;if(f.isByteBuffer(a))return e=g.clone.call(a),e.markedOffset=-1,e;if(a instanceof Uint8Array)e=new f(0,c,d),a.length>0&&(e.buffer=a.buffer,e.offset=a.byteOffset,e.limit=a.byteOffset+a.byteLength,e.view=new Uint8Array(a.buffer));else if(a instanceof ArrayBuffer)e=new f(0,c,d),a.byteLength>0&&(e.buffer=a,e.offset=0,e.limit=a.byteLength,e.view=a.byteLength>0?new Uint8Array(a):null);else{if("[object Array]"!==Object.prototype.toString.call(a))throw TypeError("Illegal buffer");e=new f(a.length,c,d),e.limit=a.length;for(var h=0;h<a.length;++h)e.view[h]=a[h]}return e},g.writeBitSet=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if(!(a instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var d,e=b,f=a.length,g=f>>3,h=0;for(b+=this.writeVarint32(f,b);g--;)d=1&!!a[h++]|(1&!!a[h++])<<1|(1&!!a[h++])<<2|(1&!!a[h++])<<3|(1&!!a[h++])<<4|(1&!!a[h++])<<5|(1&!!a[h++])<<6|(1&!!a[h++])<<7,this.writeByte(d,b++);if(h<f){var i=0;for(d=0;h<f;)d|=(1&!!a[h++])<<i++;this.writeByte(d,b++)}return c?(this.offset=b,this):b-e},g.readBitSet=function(a){var b="undefined"==typeof a;b&&(a=this.offset);var c,d=this.readVarint32(a),e=d.value,f=e>>3,g=0,h=[];for(a+=d.length;f--;)c=this.readByte(a++),h[g++]=!!(1&c),h[g++]=!!(2&c),h[g++]=!!(4&c),h[g++]=!!(8&c),h[g++]=!!(16&c),h[g++]=!!(32&c),h[g++]=!!(64&c),h[g++]=!!(128&c);if(g<e){var i=0;for(c=this.readByte(a++);g<e;)h[g++]=!!(c>>i++&1)}return b&&(this.offset=a),h},g.readBytes=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+a>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+"+a+") <= "+this.buffer.byteLength)}var d=this.slice(b,b+a);return c&&(this.offset+=a),d},g.writeBytes=g.append,g.writeInt8=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view[b]=a,c&&(this.offset+=1),this},g.writeByte=g.writeInt8,g.readInt8=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.view[a];return 128===(128&c)&&(c=-(255-c+1)),b&&(this.offset+=1),c},g.readByte=g.readInt8,g.writeUint8=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view[b]=a,c&&(this.offset+=1),this},g.writeUInt8=g.writeUint8,g.readUint8=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.view[a];return b&&(this.offset+=1),c},g.readUInt8=g.readUint8,g.writeInt16=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.littleEndian?(this.view[b+1]=(65280&a)>>>8,this.view[b]=255&a):(this.view[b]=(65280&a)>>>8,this.view[b+1]=255&a),c&&(this.offset+=2),this},g.writeShort=g.writeInt16,g.readInt16=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a],c|=this.view[a+1]<<8):(c=this.view[a]<<8,c|=this.view[a+1]),32768===(32768&c)&&(c=-(65535-c+1)),b&&(this.offset+=2),c},g.readShort=g.readInt16,g.writeUint16=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.littleEndian?(this.view[b+1]=(65280&a)>>>8,this.view[b]=255&a):(this.view[b]=(65280&a)>>>8,this.view[b+1]=255&a),c&&(this.offset+=2),this},g.writeUInt16=g.writeUint16,g.readUint16=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a],c|=this.view[a+1]<<8):(c=this.view[a]<<8,c|=this.view[a+1]),b&&(this.offset+=2),c},g.readUInt16=g.readUint16,g.writeInt32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.littleEndian?(this.view[b+3]=a>>>24&255,this.view[b+2]=a>>>16&255,this.view[b+1]=a>>>8&255,this.view[b]=255&a):(this.view[b]=a>>>24&255,this.view[b+1]=a>>>16&255,this.view[b+2]=a>>>8&255,this.view[b+3]=255&a),c&&(this.offset+=4),this},g.writeInt=g.writeInt32,g.readInt32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a+2]<<16,c|=this.view[a+1]<<8,c|=this.view[a],c+=this.view[a+3]<<24>>>0):(c=this.view[a+1]<<16,c|=this.view[a+2]<<8,c|=this.view[a+3],c+=this.view[a]<<24>>>0),c|=0,b&&(this.offset+=4),c},g.readInt=g.readInt32,g.writeUint32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.littleEndian?(this.view[b+3]=a>>>24&255,this.view[b+2]=a>>>16&255,this.view[b+1]=a>>>8&255,this.view[b]=255&a):(this.view[b]=a>>>24&255,this.view[b+1]=a>>>16&255,this.view[b+2]=a>>>8&255,this.view[b+3]=255&a),c&&(this.offset+=4),this},g.writeUInt32=g.writeUint32,g.readUint32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a+2]<<16,c|=this.view[a+1]<<8,c|=this.view[a],c+=this.view[a+3]<<24>>>0):(c=this.view[a+1]<<16,c|=this.view[a+2]<<8,c|=this.view[a+3],c+=this.view[a]<<24>>>0),b&&(this.offset+=4),c},g.readUInt32=g.readUint32,a&&(g.writeInt64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b)),c+=8;var e=this.buffer.byteLength;c>e&&this.resize((e*=2)>c?e:c),c-=8;var f=b.low,g=b.high;return this.littleEndian?(this.view[c+3]=f>>>24&255,this.view[c+2]=f>>>16&255,this.view[c+1]=f>>>8&255,this.view[c]=255&f,c+=4,this.view[c+3]=g>>>24&255,this.view[c+2]=g>>>16&255,this.view[c+1]=g>>>8&255,this.view[c]=255&g):(this.view[c]=g>>>24&255,this.view[c+1]=g>>>16&255,this.view[c+2]=g>>>8&255,this.view[c+3]=255&g,c+=4,this.view[c]=f>>>24&255,this.view[c+1]=f>>>16&255,this.view[c+2]=f>>>8&255,this.view[c+3]=255&f),d&&(this.offset+=8),this},g.writeLong=g.writeInt64,g.readInt64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}var d=0,e=0;this.littleEndian?(d=this.view[b+2]<<16,d|=this.view[b+1]<<8,d|=this.view[b],d+=this.view[b+3]<<24>>>0,b+=4,e=this.view[b+2]<<16,e|=this.view[b+1]<<8,e|=this.view[b],e+=this.view[b+3]<<24>>>0):(e=this.view[b+1]<<16,e|=this.view[b+2]<<8,e|=this.view[b+3],e+=this.view[b]<<24>>>0,b+=4,d=this.view[b+1]<<16,d|=this.view[b+2]<<8,d|=this.view[b+3],d+=this.view[b]<<24>>>0);var f=new a(d,e,(!1));return c&&(this.offset+=8),f},g.readLong=g.readInt64,g.writeUint64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b)),c+=8;var e=this.buffer.byteLength;c>e&&this.resize((e*=2)>c?e:c),c-=8;var f=b.low,g=b.high;return this.littleEndian?(this.view[c+3]=f>>>24&255,this.view[c+2]=f>>>16&255,this.view[c+1]=f>>>8&255,this.view[c]=255&f,c+=4,this.view[c+3]=g>>>24&255,this.view[c+2]=g>>>16&255,this.view[c+1]=g>>>8&255,this.view[c]=255&g):(this.view[c]=g>>>24&255,this.view[c+1]=g>>>16&255,this.view[c+2]=g>>>8&255,this.view[c+3]=255&g,c+=4,this.view[c]=f>>>24&255,this.view[c+1]=f>>>16&255,this.view[c+2]=f>>>8&255,this.view[c+3]=255&f),d&&(this.offset+=8),this},g.writeUInt64=g.writeUint64,g.readUint64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}var d=0,e=0;this.littleEndian?(d=this.view[b+2]<<16,d|=this.view[b+1]<<8,d|=this.view[b],d+=this.view[b+3]<<24>>>0,b+=4,e=this.view[b+2]<<16,e|=this.view[b+1]<<8,e|=this.view[b],e+=this.view[b+3]<<24>>>0):(e=this.view[b+1]<<16,e|=this.view[b+2]<<8,e|=this.view[b+3],e+=this.view[b]<<24>>>0,b+=4,d=this.view[b+1]<<16,d|=this.view[b+2]<<8,d|=this.view[b+3],d+=this.view[b]<<24>>>0);var f=new a(d,e,(!0));return c&&(this.offset+=8),f},g.readUInt64=g.readUint64),g.writeFloat32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,e(this.view,a,b,this.littleEndian,23,4),c&&(this.offset+=4),this},g.writeFloat=g.writeFloat32,g.readFloat32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=d(this.view,a,this.littleEndian,23,4);return b&&(this.offset+=4),c},g.readFloat=g.readFloat32,g.writeFloat64=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=8;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=8,e(this.view,a,b,this.littleEndian,52,8),c&&(this.offset+=8),this},g.writeDouble=g.writeFloat64,g.readFloat64=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+8) <= "+this.buffer.byteLength)}var c=d(this.view,a,this.littleEndian,52,8);return b&&(this.offset+=8),c},g.readDouble=g.readFloat64,f.MAX_VARINT32_BYTES=5,f.calculateVarint32=function(a){return a>>>=0,a<128?1:a<16384?2:a<1<<21?3:a<1<<28?4:5},f.zigZagEncode32=function(a){return((a|=0)<<1^a>>31)>>>0},f.zigZagDecode32=function(a){return a>>>1^-(1&a)|0},g.writeVarint32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var d,e=f.calculateVarint32(a);b+=e;var g=this.buffer.byteLength;for(b>g&&this.resize((g*=2)>b?g:b),b-=e,a>>>=0;a>=128;)d=127&a|128,this.view[b++]=d,a>>>=7;return this.view[b++]=a,c?(this.offset=b,this):e},g.writeVarint32ZigZag=function(a,b){return this.writeVarint32(f.zigZagEncode32(a),b)},g.readVarint32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c,d=0,e=0;do{if(!this.noAssert&&a>this.limit){var f=Error("Truncated");throw f.truncated=!0,f}c=this.view[a++],d<5&&(e|=(127&c)<<7*d),++d}while(0!==(128&c));return e|=0,b?(this.offset=a,e):{value:e,length:d}},g.readVarint32ZigZag=function(a){var b=this.readVarint32(a);return"object"==typeof b?b.value=f.zigZagDecode32(b.value):b=f.zigZagDecode32(b),b},a&&(f.MAX_VARINT64_BYTES=10,f.calculateVarint64=function(b){"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b));var c=b.toInt()>>>0,d=b.shiftRightUnsigned(28).toInt()>>>0,e=b.shiftRightUnsigned(56).toInt()>>>0;return 0==e?0==d?c<16384?c<128?1:2:c<1<<21?3:4:d<16384?d<128?5:6:d<1<<21?7:8:e<128?9:10},f.zigZagEncode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):b.unsigned!==!1&&(b=b.toSigned()),b.shiftLeft(1).xor(b.shiftRight(63)).toUnsigned()},f.zigZagDecode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):b.unsigned!==!1&&(b=b.toSigned()),b.shiftRightUnsigned(1).xor(b.and(a.ONE).toSigned().negate()).toSigned()},g.writeVarint64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):b.unsigned!==!1&&(b=b.toSigned());var e=f.calculateVarint64(b),g=b.toInt()>>>0,h=b.shiftRightUnsigned(28).toInt()>>>0,i=b.shiftRightUnsigned(56).toInt()>>>0;c+=e;var j=this.buffer.byteLength;switch(c>j&&this.resize((j*=2)>c?j:c),c-=e,e){case 10:this.view[c+9]=i>>>7&1;case 9:this.view[c+8]=9!==e?128|i:127&i;case 8:this.view[c+7]=8!==e?h>>>21|128:h>>>21&127;case 7:this.view[c+6]=7!==e?h>>>14|128:h>>>14&127;case 6:this.view[c+5]=6!==e?h>>>7|128:h>>>7&127;case 5:this.view[c+4]=5!==e?128|h:127&h;case 4:this.view[c+3]=4!==e?g>>>21|128:g>>>21&127;case 3:this.view[c+2]=3!==e?g>>>14|128:g>>>14&127;case 2:this.view[c+1]=2!==e?g>>>7|128:g>>>7&127;case 1:this.view[c]=1!==e?128|g:127&g}return d?(this.offset+=e,this):e},g.writeVarint64ZigZag=function(a,b){return this.writeVarint64(f.zigZagEncode64(a),b)},g.readVarint64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,b<0||b+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+1) <= "+this.buffer.byteLength)}var d=b,e=0,f=0,g=0,h=0;if(h=this.view[b++],e=127&h,128&h&&(h=this.view[b++],e|=(127&h)<<7,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],e|=(127&h)<<14,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],e|=(127&h)<<21,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f=127&h,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f|=(127&h)<<7,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f|=(127&h)<<14,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f|=(127&h)<<21,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],g=127&h,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],g|=(127&h)<<7,128&h||this.noAssert&&"undefined"==typeof h))))))))))throw Error("Buffer overrun");var i=a.fromBits(e|f<<28,f>>>4|g<<24,!1);return c?(this.offset=b,i):{value:i,length:b-d}},g.readVarint64ZigZag=function(b){var c=this.readVarint64(b);return c&&c.value instanceof a?c.value=f.zigZagDecode64(c.value):c=f.zigZagDecode64(c),c}),g.writeCString=function(a,c){var d="undefined"==typeof c;d&&(c=this.offset);var e,f=a.length;if(!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");for(e=0;e<f;++e)if(0===a.charCodeAt(e))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}f=k.calculateUTF16asUTF8(b(a))[1],c+=f+1;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=f+1,k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),this.view[c++]=0,d?(this.offset=c,this):f},g.readCString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var d,e=a,f=-1;return k.decodeUTF8toUTF16(function(){if(0===f)return null;if(a>=this.limit)throw RangeError("Illegal range: Truncated data, "+a+" < "+this.limit);return f=this.view[a++],0===f?null:f}.bind(this),d=c(),!0),b?(this.offset=a,d()):{string:d(),length:a-e}},g.writeIString=function(a,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=k.calculateUTF16asUTF8(b(a),this.noAssert)[1],c+=4+e;var g=this.buffer.byteLength;if(c>g&&this.resize((g*=2)>c?g:c),c-=4+e,this.littleEndian?(this.view[c+3]=e>>>24&255,this.view[c+2]=e>>>16&255,this.view[c+1]=e>>>8&255,this.view[c]=255&e):(this.view[c]=e>>>24&255,this.view[c+1]=e>>>16&255,this.view[c+2]=e>>>8&255,this.view[c+3]=255&e),c+=4,k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),c!==f+4+e)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+4+e));return d?(this.offset=c,this):c-f},g.readIString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=a,d=this.readUint32(a),e=this.readUTF8String(d,f.METRICS_BYTES,a+=4);return a+=e.length,b?(this.offset=a,e.string):{string:e.string,length:a-c}},f.METRICS_CHARS="c",f.METRICS_BYTES="b",g.writeUTF8String=function(a,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=k.calculateUTF16asUTF8(b(a))[1],c+=e;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=e,k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),d?(this.offset=c,this):c-f},g.writeString=g.writeUTF8String,f.calculateUTF8Chars=function(a){return k.calculateUTF16asUTF8(b(a))[0]},f.calculateUTF8Bytes=function(a){return k.calculateUTF16asUTF8(b(a))[1]},f.calculateString=f.calculateUTF8Bytes,g.readUTF8String=function(a,b,d){"number"==typeof b&&(d=b,b=void 0);var e="undefined"==typeof d;if(e&&(d=this.offset),"undefined"==typeof b&&(b=f.METRICS_CHARS),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal length: "+a+" (not an integer)");if(a|=0,"number"!=typeof d||d%1!==0)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,d<0||d+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+0) <= "+this.buffer.byteLength)}var g,h=0,i=d;if(b===f.METRICS_CHARS){if(g=c(),k.decodeUTF8(function(){return h<a&&d<this.limit?this.view[d++]:null}.bind(this),function(a){++h,k.UTF8toUTF16(a,g)}),h!==a)throw RangeError("Illegal range: Truncated data, "+h+" == "+a);return e?(this.offset=d,g()):{string:g(),length:d-i}}if(b===f.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof d||d%1!==0)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,d<0||d+a>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+"+a+") <= "+this.buffer.byteLength)}var j=d+a;if(k.decodeUTF8toUTF16(function(){return d<j?this.view[d++]:null}.bind(this),g=c(),this.noAssert),d!==j)throw RangeError("Illegal range: Truncated data, "+d+" == "+j);return e?(this.offset=d,g()):{string:g(),length:d-i}}throw TypeError("Unsupported metrics: "+b)},g.readString=g.readUTF8String,g.writeVString=function(a,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,g,h=c;e=k.calculateUTF16asUTF8(b(a),this.noAssert)[1],g=f.calculateVarint32(e),c+=g+e;var i=this.buffer.byteLength;if(c>i&&this.resize((i*=2)>c?i:c),c-=g+e,c+=this.writeVarint32(e,c),k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),c!==h+e+g)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+e+g));return d?(this.offset=c,this):c-h},g.readVString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=a,d=this.readVarint32(a),e=this.readUTF8String(d.value,f.METRICS_BYTES,a+=d.length);return a+=e.length,b?(this.offset=a,e.string):{string:e.string,length:a-c}},g.append=function(a,b,c){"number"!=typeof b&&"string"==typeof b||(c=b,b=void 0);var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}a instanceof f||(a=f.wrap(a,b));var e=a.limit-a.offset;if(e<=0)return this;c+=e;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=e,this.view.set(a.view.subarray(a.offset,a.limit),c),a.offset+=e,d&&(this.offset+=e),this},g.appendTo=function(a,b){return a.append(this,b),this},g.assert=function(a){return this.noAssert=!a,this},g.capacity=function(){return this.buffer.byteLength},g.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},g.clone=function(a){var b=new f(0,this.littleEndian,this.noAssert);return a?(b.buffer=new ArrayBuffer(this.buffer.byteLength),b.view=new Uint8Array(b.buffer)):(b.buffer=this.buffer,b.view=this.view),b.offset=this.offset,b.markedOffset=this.markedOffset,b.limit=this.limit,b},g.compact=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(0===a&&b===this.buffer.byteLength)return this;var c=b-a;if(0===c)return this.buffer=h,this.view=null,this.markedOffset>=0&&(this.markedOffset-=a),this.offset=0,this.limit=0,this;var d=new ArrayBuffer(c),e=new Uint8Array(d);return e.set(this.view.subarray(a,b)),this.buffer=d,this.view=e,this.markedOffset>=0&&(this.markedOffset-=a),this.offset=0,this.limit=c,this},g.copy=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(a===b)return new f(0,this.littleEndian,this.noAssert);var c=b-a,d=new f(c,this.littleEndian,this.noAssert);return d.offset=0,d.limit=c,d.markedOffset>=0&&(d.markedOffset-=a),this.copyTo(d,0,a,b),d},g.copyTo=function(a,b,c,d){var e,g;if(!this.noAssert&&!f.isByteBuffer(a))throw TypeError("Illegal target: Not a ByteBuffer");if(b=(g="undefined"==typeof b)?a.offset:0|b,c=(e="undefined"==typeof c)?this.offset:0|c,d="undefined"==typeof d?this.limit:0|d,b<0||b>a.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+b+" <= "+a.buffer.byteLength);if(c<0||d>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+c+" <= "+this.buffer.byteLength);var h=d-c;return 0===h?a:(a.ensureCapacity(b+h),a.view.set(this.view.subarray(c,d),b),e&&(this.offset+=h),g&&(a.offset+=h),this)},g.ensureCapacity=function(a){var b=this.buffer.byteLength;return b<a?this.resize((b*=2)>a?b:a):this},g.fill=function(a,b,c){var d="undefined"==typeof b;if(d&&(b=this.offset),"string"==typeof a&&a.length>0&&(a=a.charCodeAt(0)),"undefined"==typeof b&&(b=this.offset),"undefined"==typeof c&&(c=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal begin: Not an integer");if(b>>>=0,"number"!=typeof c||c%1!==0)throw TypeError("Illegal end: Not an integer");if(c>>>=0,b<0||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}if(b>=c)return this;for(;b<c;)this.view[b++]=a;return d&&(this.offset=b),this},g.flip=function(){return this.limit=this.offset,this.offset=0,this},g.mark=function(a){if(a="undefined"==typeof a?this.offset:a,!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,a<0||a+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=a,this},g.order=function(a){if(!this.noAssert&&"boolean"!=typeof a)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!a,this},g.LE=function(a){return this.littleEndian="undefined"==typeof a||!!a,this},g.BE=function(a){return this.littleEndian="undefined"!=typeof a&&!a,this},g.prepend=function(a,b,c){"number"!=typeof b&&"string"==typeof b||(c=b,b=void 0);var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,c<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}a instanceof f||(a=f.wrap(a,b));var e=a.limit-a.offset;if(e<=0)return this;var g=e-c;if(g>0){var h=new ArrayBuffer(this.buffer.byteLength+g),i=new Uint8Array(h);i.set(this.view.subarray(c,this.buffer.byteLength),e),this.buffer=h,this.view=i,this.offset+=g,this.markedOffset>=0&&(this.markedOffset+=g),this.limit+=g,c+=g}else{new Uint8Array(this.buffer)}return this.view.set(a.view.subarray(a.offset,a.limit),c-e),a.offset=a.limit,d&&(this.offset-=e),this},g.prependTo=function(a,b){return a.prepend(this,b),this},g.printDebug=function(a){"function"!=typeof a&&(a=console.log.bind(console)),a(this.toString()+"\n-------\n"+this.toDebug(!0))},g.remaining=function(){return this.limit-this.offset},g.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},g.resize=function(a){if(!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal capacity: "+a+" (not an integer)");if(a|=0,a<0)throw RangeError("Illegal capacity: 0 <= "+a)}if(this.buffer.byteLength<a){var b=new ArrayBuffer(a),c=new Uint8Array(b);c.set(this.view),this.buffer=b,this.view=c}return this},g.reverse=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}return a===b?this:(Array.prototype.reverse.call(this.view.subarray(a,b)),this)},g.skip=function(a){if(!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal length: "+a+" (not an integer)");a|=0}var b=this.offset+a;if(!this.noAssert&&(b<0||b>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+a+" <= "+this.buffer.byteLength);return this.offset=b,this},g.slice=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var c=this.clone();return c.offset=a,c.limit=b,c},g.toBuffer=function(a){var b=this.offset,c=this.limit;if(!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: Not an integer");if(b>>>=0,"number"!=typeof c||c%1!==0)throw TypeError("Illegal limit: Not an integer");if(c>>>=0,b<0||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}if(!a&&0===b&&c===this.buffer.byteLength)return this.buffer;if(b===c)return h;var d=new ArrayBuffer(c-b);return new Uint8Array(d).set(new Uint8Array(this.buffer).subarray(b,c),0),d},g.toArrayBuffer=g.toBuffer,g.toString=function(a,b,c){if("undefined"==typeof a)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof a&&(a="utf8",b=a,c=b),a){case"utf8":return this.toUTF8(b,c);case"base64":return this.toBase64(b,c);case"hex":return this.toHex(b,c);case"binary":return this.toBinary(b,c);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+a)}};var j=function(){for(var a={},b=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],c=[],d=0,e=b.length;d<e;++d)c[b[d]]=d;return a.encode=function(a,c){for(var d,e;null!==(d=a());)c(b[d>>2&63]),e=(3&d)<<4,null!==(d=a())?(e|=d>>4&15,c(b[63&(e|d>>4&15)]),e=(15&d)<<2,null!==(d=a())?(c(b[63&(e|d>>6&3)]),c(b[63&d])):(c(b[63&e]),c(61))):(c(b[63&e]),c(61),c(61))},a.decode=function(a,b){function d(a){throw Error("Illegal character code: "+a)}for(var e,f,g;null!==(e=a());)if(f=c[e],"undefined"==typeof f&&d(e),null!==(e=a())&&(g=c[e],"undefined"==typeof g&&d(e),b(f<<2>>>0|(48&g)>>4),null!==(e=a()))){if(f=c[e],"undefined"==typeof f){if(61===e)break;d(e)}if(b((15&g)<<4>>>0|(60&f)>>2),null!==(e=a())){if(g=c[e],"undefined"==typeof g){if(61===e)break;d(e)}b((3&f)<<6>>>0|g)}}},a.test=function(a){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(a)},a}();g.toBase64=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),a=0|a,b=0|b,a<0||b>this.capacity||a>b)throw RangeError("begin, end");var d;return j.encode(function(){return a<b?this.view[a++]:null}.bind(this),d=c()),d()},f.fromBase64=function(a,c){if("string"!=typeof a)throw TypeError("str");var d=new f(a.length/4*3,c),e=0;return j.decode(b(a),function(a){d.view[e++]=a}),d.limit=e,d},f.btoa=function(a){return f.fromBinary(a).toBase64()},f.atob=function(a){return f.fromBase64(a).toBinary()},g.toBinary=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),a|=0,b|=0,a<0||b>this.capacity()||a>b)throw RangeError("begin, end");if(a===b)return"";for(var c=[],d=[];a<b;)c.push(this.view[a++]),c.length>=1024&&(d.push(String.fromCharCode.apply(String,c)),c=[]);return d.join("")+String.fromCharCode.apply(String,c)},f.fromBinary=function(a,b){if("string"!=typeof a)throw TypeError("str");for(var c,d=0,e=a.length,g=new f(e,b);d<e;){if(c=a.charCodeAt(d),c>255)throw RangeError("illegal char code: "+c);g.view[d++]=c}return g.limit=e,g},g.toDebug=function(a){for(var b,c=-1,d=this.buffer.byteLength,e="",f="",g="";c<d;){if(c!==-1&&(b=this.view[c],e+=b<16?"0"+b.toString(16).toUpperCase():b.toString(16).toUpperCase(),a&&(f+=b>32&&b<127?String.fromCharCode(b):".")),++c,a&&c>0&&c%16===0&&c!==d){for(;e.length<51;)e+=" ";g+=e+f+"\n",e=f=""}e+=c===this.offset&&c===this.limit?c===this.markedOffset?"!":"|":c===this.offset?c===this.markedOffset?"[":"<":c===this.limit?c===this.markedOffset?"]":">":c===this.markedOffset?"'":a||0!==c&&c!==d?" ":""}if(a&&" "!==e){for(;e.length<51;)e+=" ";g+=e+f+"\n"}return a?g:e},f.fromDebug=function(a,b,c){for(var d,e,g=a.length,h=new f((g+1)/3|0,b,c),i=0,j=0,k=!1,l=!1,m=!1,n=!1,o=!1;i<g;){switch(d=a.charAt(i++)){case"!":if(!c){if(l||m||n){o=!0;break}l=m=n=!0}h.offset=h.markedOffset=h.limit=j,k=!1;break;case"|":if(!c){if(l||n){o=!0;break}l=n=!0}h.offset=h.limit=j,k=!1;break;case"[":if(!c){if(l||m){o=!0;break}l=m=!0}h.offset=h.markedOffset=j,k=!1;break;case"<":if(!c){if(l){o=!0;break}l=!0}h.offset=j,k=!1;break;case"]":if(!c){if(n||m){o=!0;break}n=m=!0}h.limit=h.markedOffset=j,k=!1;break;case">":if(!c){if(n){o=!0;break}n=!0}h.limit=j,k=!1;break;case"'":if(!c){if(m){o=!0;break}m=!0}h.markedOffset=j,k=!1;break;case" ":k=!1;break;default:if(!c&&k){o=!0;break}if(e=parseInt(d+a.charAt(i++),16),!c&&(isNaN(e)||e<0||e>255))throw TypeError("Illegal str: Not a debug encoded string");h.view[j++]=e,k=!0}if(o)throw TypeError("Illegal str: Invalid symbol at "+i)}if(!c){if(!l||!n)throw TypeError("Illegal str: Missing offset or limit");if(j<h.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+j+" < "+g)}return h},g.toHex=function(a,b){if(a="undefined"==typeof a?this.offset:a,b="undefined"==typeof b?this.limit:b,!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}for(var c,d=new Array(b-a);a<b;)c=this.view[a++],c<16?d.push("0",c.toString(16)):d.push(c.toString(16));return d.join("")},f.fromHex=function(a,b,c){if(!c){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if(a.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var d,e=a.length,g=new f(e/2|0,b),h=0,i=0;h<e;h+=2){if(d=parseInt(a.substring(h,h+2),16),!c&&(!isFinite(d)||d<0||d>255))throw TypeError("Illegal str: Contains non-hex characters");g.view[i++]=d}return g.limit=i,g};var k=function(){var a={};return a.MAX_CODEPOINT=1114111,a.encodeUTF8=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)c<128?b(127&c):c<2048?(b(c>>6&31|192),b(63&c|128)):c<65536?(b(c>>12&15|224),b(c>>6&63|128),b(63&c|128)):(b(c>>18&7|240),b(c>>12&63|128),b(c>>6&63|128),b(63&c|128)),c=null},a.decodeUTF8=function(a,b){for(var c,d,e,f,g=function(a){a=a.slice(0,a.indexOf(null));var b=Error(a.toString());throw b.name="TruncatedError",b.bytes=a,b};null!==(c=a());)if(0===(128&c))b(c);else if(192===(224&c))null===(d=a())&&g([c,d]),b((31&c)<<6|63&d);else if(224===(240&c))(null===(d=a())||null===(e=a()))&&g([c,d,e]),b((15&c)<<12|(63&d)<<6|63&e);else{if(240!==(248&c))throw RangeError("Illegal starting byte: "+c);(null===(d=a())||null===(e=a())||null===(f=a()))&&g([c,d,e,f]),b((7&c)<<18|(63&d)<<12|(63&e)<<6|63&f)}},a.UTF16toUTF8=function(a,b){for(var c,d=null;;){if(null===(c=null!==d?d:a()))break;c>=55296&&c<=57343&&null!==(d=a())&&d>=56320&&d<=57343?(b(1024*(c-55296)+d-56320+65536),d=null):b(c)}null!==d&&b(d)},a.UTF8toUTF16=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)c<=65535?b(c):(c-=65536,b((c>>10)+55296),b(c%1024+56320)),c=null},a.encodeUTF16toUTF8=function(b,c){a.UTF16toUTF8(b,function(b){a.encodeUTF8(b,c)})},a.decodeUTF8toUTF16=function(b,c){a.decodeUTF8(b,function(b){a.UTF8toUTF16(b,c)})},a.calculateCodePoint=function(a){return a<128?1:a<2048?2:a<65536?3:4},a.calculateUTF8=function(a){for(var b,c=0;null!==(b=a());)c+=b<128?1:b<2048?2:b<65536?3:4;return c},a.calculateUTF16asUTF8=function(b){var c=0,d=0;return a.UTF16toUTF8(b,function(a){++c,d+=a<128?1:a<2048?2:a<65536?3:4}),[c,d]},a}();return g.toUTF8=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var d;try{k.decodeUTF8toUTF16(function(){return a<b?this.view[a++]:null}.bind(this),d=c())}catch(c){if(a!==b)throw RangeError("Illegal range: Truncated data, "+a+" != "+b)}return d()},f.fromUTF8=function(a,c,d){if(!d&&"string"!=typeof a)throw TypeError("Illegal str: Not a string");var e=new f(k.calculateUTF16asUTF8(b(a),!0)[1],c,d),g=0;return k.encodeUTF16toUTF8(b(a),function(a){e.view[g++]=a}),e.limit=g,e},f})}),qj=b(pj),rj=Object.freeze({default:qj}),sj={},tj=Object.freeze({default:sj}),uj=c(function(a){!function(c,d){"function"==typeof h&&h.amd?h(["bytebuffer"],d):"object"==typeof a&&a&&a.exports?a.exports=d(b(rj),!0):(c.dcodeIO=c.dcodeIO||{}).ProtoBuf=d(c.dcodeIO.ByteBuffer)}(j,function(a,c){var d={};return d.ByteBuffer=a,d.Long=a.Long||null,d.VERSION="5.0.1",d.WIRE_TYPES={},d.WIRE_TYPES.VARINT=0,d.WIRE_TYPES.BITS64=1,d.WIRE_TYPES.LDELIM=2,d.WIRE_TYPES.STARTGROUP=3,d.WIRE_TYPES.ENDGROUP=4,d.WIRE_TYPES.BITS32=5,d.PACKABLE_WIRE_TYPES=[d.WIRE_TYPES.VARINT,d.WIRE_TYPES.BITS64,d.WIRE_TYPES.BITS32],d.TYPES={int32:{name:"int32",wireType:d.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:d.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:d.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:d.WIRE_TYPES.VARINT,defaultValue:d.Long?d.Long.ZERO:void 0},uint64:{name:"uint64",wireType:d.WIRE_TYPES.VARINT,defaultValue:d.Long?d.Long.UZERO:void 0},sint64:{name:"sint64",wireType:d.WIRE_TYPES.VARINT,defaultValue:d.Long?d.Long.ZERO:void 0},bool:{name:"bool",wireType:d.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:d.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:d.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:d.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:d.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:d.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:d.WIRE_TYPES.BITS64,defaultValue:d.Long?d.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:d.WIRE_TYPES.BITS64,defaultValue:d.Long?d.Long.ZERO:void 0},float:{name:"float",wireType:d.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:d.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:d.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:d.WIRE_TYPES.STARTGROUP,defaultValue:null}},d.MAP_KEY_TYPES=[d.TYPES.int32,d.TYPES.sint32,d.TYPES.sfixed32,d.TYPES.uint32,d.TYPES.fixed32,d.TYPES.int64,d.TYPES.sint64,d.TYPES.sfixed64,d.TYPES.uint64,d.TYPES.fixed64,d.TYPES.bool,d.TYPES.string,d.TYPES.bytes],d.ID_MIN=1,d.ID_MAX=536870911,d.convertFieldsToCamelCase=!1,d.populateAccessors=!0,d.populateDefaults=!0,d.Util=function(){var a={};return a.IS_NODE=!("object"!=typeof i||i+""!="[object process]"||i.browser),a.XHR=function(){for(var a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=null,c=0;c<a.length;c++){try{b=a[c]()}catch(a){continue}break}if(!b)throw Error("XMLHttpRequest is not supported");return b},a.fetch=function(c,d){if(d&&"function"!=typeof d&&(d=null),a.IS_NODE){var e=b(tj);if(d)e.readFile(c,function(a,b){d(a?null:""+b)});else try{return e.readFileSync(c)}catch(a){return null}}else{var f=a.XHR();if(f.open("GET",c,!!d),f.setRequestHeader("Accept","text/plain"),"function"==typeof f.overrideMimeType&&f.overrideMimeType("text/plain"),!d)return f.send(null),200==f.status||0==f.status&&"string"==typeof f.responseText?f.responseText:null;if(f.onreadystatechange=function(){4==f.readyState&&d(200==f.status||0==f.status&&"string"==typeof f.responseText?f.responseText:null)},4==f.readyState)return;f.send(null)}},a.toCamelCase=function(a){return a.replace(/_([a-zA-Z])/g,function(a,b){return b.toUpperCase()})},a}(),d.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},d.Reflect=function(b){function c(c){if("string"==typeof c&&(c=b.TYPES[c]),"undefined"==typeof c.defaultValue)throw Error("default value for type "+c.name+" is not supported");return c==b.TYPES.bytes?new a(0):c.defaultValue}function d(a,c){if(a&&"number"==typeof a.low&&"number"==typeof a.high&&"boolean"==typeof a.unsigned&&a.low===a.low&&a.high===a.high)return new b.Long(a.low,a.high,"undefined"==typeof c?a.unsigned:c);if("string"==typeof a)return b.Long.fromString(a,c||!1,10);if("number"==typeof a)return b.Long.fromNumber(a,c||!1);throw Error("not convertible to Long")}function e(a,c){var d=c.readVarint32(),f=7&d,g=d>>>3;switch(f){case b.WIRE_TYPES.VARINT:do d=c.readUint8();while(128===(128&d));break;case b.WIRE_TYPES.BITS64:c.offset+=8;break;case b.WIRE_TYPES.LDELIM:d=c.readVarint32(),c.offset+=d;break;case b.WIRE_TYPES.STARTGROUP:e(g,c);break;case b.WIRE_TYPES.ENDGROUP:if(g===a)return!1;throw Error("Illegal GROUPEND after unknown group: "+g+" ("+a+" expected)");case b.WIRE_TYPES.BITS32:c.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+a+": "+f)}return!0}var f={},g=function(a,b,c){this.builder=a,this.parent=b,this.name=c,this.className;},h=g.prototype;h.fqn=function(){for(var a=this.name,b=this;;){if(b=b.parent,null==b)break;a=b.name+"."+a}return a},h.toString=function(a){return(a?this.className+" ":"")+this.fqn()},h.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},f.T=g;var i=function(a,b,c,d,e){g.call(this,a,b,c),this.className="Namespace",this.children=[],this.options=d||{},this.syntax=e||"proto2"},j=i.prototype=Object.create(g.prototype);j.getChildren=function(a){if(a=a||null,null==a)return this.children.slice();for(var b=[],c=0,d=this.children.length;c<d;++c)this.children[c]instanceof a&&b.push(this.children[c]);return b},j.addChild=function(a){var b;if(b=this.getChild(a.name))if(b instanceof m.Field&&b.name!==b.originalName&&null===this.getChild(b.originalName))b.name=b.originalName;else{if(!(a instanceof m.Field&&a.name!==a.originalName&&null===this.getChild(a.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+a.name);a.name=a.originalName}this.children.push(a)},j.getChild=function(a){for(var b="number"==typeof a?"id":"name",c=0,d=this.children.length;c<d;++c)if(this.children[c][b]===a)return this.children[c];return null},j.resolve=function(a,b){var c="string"==typeof a?a.split("."):a,d=this,e=0;if(""===c[e]){for(;null!==d.parent;)d=d.parent;e++}var g;do{do{if(!(d instanceof f.Namespace)){d=null;break}if(g=d.getChild(c[e]),!g||!(g instanceof f.T)||b&&!(g instanceof f.Namespace)){d=null;break}d=g,e++}while(e<c.length);if(null!=d)break;if(null!==this.parent)return this.parent.resolve(a,b)}while(null!=d);return d},j.qn=function(a){var b=[],c=a;do b.unshift(c.name),c=c.parent;while(null!==c);for(var d=1;d<=b.length;d++){var e=b.slice(b.length-d);if(a===this.resolve(e,a instanceof f.Namespace))return e.join(".")}return a.fqn()},j.build=function(){for(var a,b={},c=this.children,d=0,e=c.length;d<e;++d)a=c[d],a instanceof i&&(b[a.name]=a.build());return Object.defineProperty&&Object.defineProperty(b,"$options",{value:this.buildOpt()}),b},j.buildOpt=function(){for(var a={},b=Object.keys(this.options),c=0,d=b.length;c<d;++c){var e=b[c],f=this.options[b[c]];a[e]=f}return a},j.getOption=function(a){return"undefined"==typeof a?this.options:"undefined"!=typeof this.options[a]?this.options[a]:null},f.Namespace=i;var k=function(a,c,d,e){if(this.type=a,this.resolvedType=c,this.isMapKey=d,this.syntax=e,d&&b.MAP_KEY_TYPES.indexOf(a)<0)throw Error("Invalid map key type: "+a.name)},l=k.prototype;k.defaultFieldValue=c,l.verifyValue=function(c){function e(a,b){throw Error("Illegal value for "+f.toString(!0)+" of type "+f.type.name+": "+a+" ("+b+")")}var f=this;switch(this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:return("number"!=typeof c||c===c&&c%1!==0)&&e(typeof c,"not an integer"),c>4294967295?0|c:c;case b.TYPES.uint32:case b.TYPES.fixed32:return("number"!=typeof c||c===c&&c%1!==0)&&e(typeof c,"not an integer"),c<0?c>>>0:c;case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:if(b.Long)try{return d(c,!1)}catch(a){e(typeof c,a.message)}else e(typeof c,"requires Long.js");case b.TYPES.uint64:case b.TYPES.fixed64:if(b.Long)try{return d(c,!0)}catch(a){e(typeof c,a.message)}else e(typeof c,"requires Long.js");case b.TYPES.bool:return"boolean"!=typeof c&&e(typeof c,"not a boolean"),c;case b.TYPES.float:case b.TYPES.double:return"number"!=typeof c&&e(typeof c,"not a number"),c;case b.TYPES.string:return"string"==typeof c||c&&c instanceof String||e(typeof c,"not a string"),""+c;case b.TYPES.bytes:return a.isByteBuffer(c)?c:a.wrap(c,"base64");case b.TYPES.enum:var g=this.resolvedType.getChildren(b.Reflect.Enum.Value);for(i=0;i<g.length;i++){if(g[i].name==c)return g[i].id;if(g[i].id==c)return g[i].id}if("proto3"===this.syntax)return("number"!=typeof c||c===c&&c%1!==0)&&e(typeof c,"not an integer"),(c>4294967295||c<0)&&e(typeof c,"not in range for uint32"),c;e(c,"not a valid enum value");case b.TYPES.group:case b.TYPES.message:if(c&&"object"==typeof c||e(typeof c,"object expected"),c instanceof this.resolvedType.clazz)return c;if(c instanceof b.Builder.Message){var h={};for(var i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);c=h}return new this.resolvedType.clazz(c)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+c+" (undefined type "+this.type+")")},l.calculateLength=function(c,d){if(null===d)return 0;var e;switch(this.type){case b.TYPES.int32:return d<0?a.calculateVarint64(d):a.calculateVarint32(d);case b.TYPES.uint32:return a.calculateVarint32(d);case b.TYPES.sint32:return a.calculateVarint32(a.zigZagEncode32(d));case b.TYPES.fixed32:case b.TYPES.sfixed32:case b.TYPES.float:return 4;case b.TYPES.int64:case b.TYPES.uint64:return a.calculateVarint64(d);case b.TYPES.sint64:return a.calculateVarint64(a.zigZagEncode64(d));case b.TYPES.fixed64:case b.TYPES.sfixed64:return 8;case b.TYPES.bool:return 1;case b.TYPES.enum:return a.calculateVarint32(d);case b.TYPES.double:return 8;case b.TYPES.string:return e=a.calculateUTF8Bytes(d),a.calculateVarint32(e)+e;case b.TYPES.bytes:if(d.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+d.remaining()+" bytes remaining");return a.calculateVarint32(d.remaining())+d.remaining();case b.TYPES.message:return e=this.resolvedType.calculate(d),a.calculateVarint32(e)+e;case b.TYPES.group:return e=this.resolvedType.calculate(d),e+a.calculateVarint32(c<<3|b.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+d+" (unknown type)")},l.encodeValue=function(c,d,e){if(null===d)return e;switch(this.type){case b.TYPES.int32:d<0?e.writeVarint64(d):e.writeVarint32(d);break;case b.TYPES.uint32:e.writeVarint32(d);break;case b.TYPES.sint32:e.writeVarint32ZigZag(d);break;case b.TYPES.fixed32:e.writeUint32(d);break;case b.TYPES.sfixed32:e.writeInt32(d);break;case b.TYPES.int64:case b.TYPES.uint64:e.writeVarint64(d);break;case b.TYPES.sint64:e.writeVarint64ZigZag(d);break;case b.TYPES.fixed64:e.writeUint64(d);break;case b.TYPES.sfixed64:e.writeInt64(d);break;case b.TYPES.bool:"string"==typeof d?e.writeVarint32("false"===d.toLowerCase()?0:!!d):e.writeVarint32(d?1:0);break;case b.TYPES.enum:e.writeVarint32(d);break;case b.TYPES.float:e.writeFloat32(d);break;case b.TYPES.double:e.writeFloat64(d);break;case b.TYPES.string:e.writeVString(d);break;case b.TYPES.bytes:if(d.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+d.remaining()+" bytes remaining");var f=d.offset;e.writeVarint32(d.remaining()),e.append(d),d.offset=f;break;case b.TYPES.message:var g=(new a).LE();this.resolvedType.encode(d,g),e.writeVarint32(g.offset),e.append(g.flip());break;case b.TYPES.group:this.resolvedType.encode(d,e),e.writeVarint32(c<<3|b.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+d+" (unknown type)")}return e},l.decode=function(a,c,d){if(c!=this.type.wireType)throw Error("Unexpected wire type for element");var e,f;switch(this.type){case b.TYPES.int32:return 0|a.readVarint32();case b.TYPES.uint32:return a.readVarint32()>>>0;case b.TYPES.sint32:return 0|a.readVarint32ZigZag();case b.TYPES.fixed32:return a.readUint32()>>>0;case b.TYPES.sfixed32:return 0|a.readInt32();case b.TYPES.int64:return a.readVarint64();case b.TYPES.uint64:return a.readVarint64().toUnsigned();case b.TYPES.sint64:return a.readVarint64ZigZag();case b.TYPES.fixed64:return a.readUint64();case b.TYPES.sfixed64:return a.readInt64();case b.TYPES.bool:return!!a.readVarint32();case b.TYPES.enum:return a.readVarint32();case b.TYPES.float:return a.readFloat();case b.TYPES.double:return a.readDouble();case b.TYPES.string:return a.readVString();case b.TYPES.bytes:if(f=a.readVarint32(),a.remaining()<f)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+f+" required but got only "+a.remaining());return e=a.clone(),e.limit=e.offset+f,a.offset+=f,e;case b.TYPES.message:return f=a.readVarint32(),this.resolvedType.decode(a,f);case b.TYPES.group:return this.resolvedType.decode(a,-1,d)}throw Error("[INTERNAL] Illegal decode type")},l.valueFromString=function(c){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:case b.TYPES.uint32:case b.TYPES.fixed32:return this.verifyValue(parseInt(c));case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:case b.TYPES.uint64:case b.TYPES.fixed64:return this.verifyValue(c);case b.TYPES.bool:return"true"===c;case b.TYPES.string:return this.verifyValue(c);case b.TYPES.bytes:return a.fromBinary(c)}},l.valueToString=function(a){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===b.TYPES.bytes?a.toString("binary"):a.toString()},f.Element=k;var m=function(a,b,c,d,e,f){i.call(this,a,b,c,d,f),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!e,this._fields=null,this._fieldsById=null,this._fieldsByName=null},n=m.prototype=Object.create(i.prototype);n.build=function(c){if(this.clazz&&!c)return this.clazz;var d=function(b,c){function d(c,e,f,g){if(null===c||"object"!=typeof c){if(g&&g instanceof b.Reflect.Enum){var h=b.Reflect.Enum.getName(g.object,c);if(null!==h)return h}return c}if(a.isByteBuffer(c))return e?c.toBase64():c.toBuffer();if(b.Long.isLong(c))return f?c.toString():b.Long.fromValue(c);var i;if(Array.isArray(c))return i=[],c.forEach(function(a,b){i[b]=d(a,e,f,g)}),i;if(i={},c instanceof b.Map){for(var j=c.entries(),k=j.next();!k.done;k=j.next())i[c.keyElem.valueToString(k.value[0])]=d(k.value[1],e,f,c.valueElem.resolvedType);return i}var l=c.$type,m=void 0;for(var n in c)c.hasOwnProperty(n)&&(l&&(m=l.getChild(n))?i[n]=d(c[n],e,f,m.resolvedType):i[n]=d(c[n],e,f));return i}var e=c.getChildren(b.Reflect.Message.Field),f=c.getChildren(b.Reflect.Message.OneOf),g=function(d,h){b.Builder.Message.call(this);for(var i=0,j=f.length;i<j;++i)this[f[i].name]=null;for(i=0,j=e.length;i<j;++i){var k=e[i];this[k.name]=k.repeated?[]:k.map?new b.Map(k):null,!k.required&&"proto3"!==c.syntax||null===k.defaultValue||(this[k.name]=k.defaultValue)}if(arguments.length>0){var l;if(1!==arguments.length||null===d||"object"!=typeof d||!("function"!=typeof d.encode||d instanceof g)||Array.isArray(d)||d instanceof b.Map||a.isByteBuffer(d)||d instanceof ArrayBuffer||b.Long&&d instanceof b.Long)for(i=0,j=arguments.length;i<j;++i)"undefined"!=typeof(l=arguments[i])&&this.$set(e[i].name,l);else this.$set(d)}},h=g.prototype=Object.create(b.Builder.Message.prototype);h.add=function(a,d,e){var f=c._fieldsByName[a];if(!e){if(!f)throw Error(this+"#"+a+" is undefined");if(!(f instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+f.toString(!0));if(!f.repeated)throw Error(this+"#"+a+" is not a repeated field");d=f.verifyValue(d,!0)}return null===this[a]&&(this[a]=[]),this[a].push(d),this},h.$add=h.add,h.set=function(a,d,e){if(a&&"object"==typeof a){e=d;for(var f in a)a.hasOwnProperty(f)&&"undefined"!=typeof(d=a[f])&&this.$set(f,d,e);return this}var g=c._fieldsByName[a];if(e)this[a]=d;else{if(!g)throw Error(this+"#"+a+" is not a field: undefined");if(!(g instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+g.toString(!0));this[g.name]=d=g.verifyValue(d)}if(g&&g.oneof){var h=this[g.oneof.name];null!==d?(null!==h&&h!==g.name&&(this[h]=null),this[g.oneof.name]=g.name):h===a&&(this[g.oneof.name]=null)}return this},h.$set=h.set,h.get=function(a,d){if(d)return this[a];var e=c._fieldsByName[a];if(!(e&&e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: undefined");if(!(e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+e.toString(!0));return this[e.name]},h.$get=h.get;for(var i=0;i<e.length;i++){var j=e[i];j instanceof b.Reflect.Message.ExtensionField||c.builder.options.populateAccessors&&function(a){var b=a.originalName.replace(/(_[a-zA-Z])/g,function(a){return a.toUpperCase().replace("_","")});b=b.substring(0,1).toUpperCase()+b.substring(1);var d=a.originalName.replace(/([A-Z])/g,function(a){return"_"+a}),e=function(b,c){return this[a.name]=c?b:a.verifyValue(b),this},f=function(){return this[a.name]};null===c.getChild("set"+b)&&(h["set"+b]=e),null===c.getChild("set_"+d)&&(h["set_"+d]=e),null===c.getChild("get"+b)&&(h["get"+b]=f),null===c.getChild("get_"+d)&&(h["get_"+d]=f)}(j)}h.encode=function(b,d){"boolean"==typeof b&&(d=b,b=void 0);var e=!1;b||(b=new a,e=!0);var f=b.littleEndian;try{return c.encode(this,b.LE(),d),(e?b.flip():b).LE(f)}catch(a){throw b.LE(f),a}},g.encode=function(a,b,c){return new g(a).encode(b,c)},h.calculate=function(){return c.calculate(this)},h.encodeDelimited=function(b,d){var e=!1;b||(b=new a,e=!0);var f=(new a).LE();return c.encode(this,f,d).flip(),b.writeVarint32(f.remaining()),b.append(f),e?b.flip():b},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toArrayBuffer()),a}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBuffer()),a}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBase64()),a}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toHex()),a}},h.toHex=h.encodeHex,h.toRaw=function(a,b){return d(this,!!a,!!b,this.$type)},h.encodeJSON=function(){return JSON.stringify(d(this,!0,!0,this.$type))},g.decode=function(b,d,e){"string"==typeof d&&(e=d,d=-1),"string"==typeof b&&(b=a.wrap(b,e?e:"base64")),b=a.isByteBuffer(b)?b:a.wrap(b);var f=b.littleEndian;try{var g=c.decode(b.LE());return b.LE(f),g}catch(a){throw b.LE(f),a}},g.decodeDelimited=function(b,d){if("string"==typeof b&&(b=a.wrap(b,d?d:"base64")),b=a.isByteBuffer(b)?b:a.wrap(b),b.remaining()<1)return null;var e=b.offset,f=b.readVarint32();if(b.remaining()<f)return b.offset=e,null;try{var g=c.decode(b.slice(b.offset,b.offset+f).LE());return b.offset+=f,g}catch(a){throw b.offset+=f,a}},g.decode64=function(a){return g.decode(a,"base64")},g.decodeHex=function(a){return g.decode(a,"hex")},g.decodeJSON=function(a){return new g(JSON.parse(a))},h.toString=function(){return c.toString()};return Object.defineProperty&&(Object.defineProperty(g,"$options",{value:c.buildOpt()}),Object.defineProperty(h,"$options",{value:g.$options}),Object.defineProperty(g,"$type",{value:c}),Object.defineProperty(h,"$type",{value:c})),g}(b,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var e,f=0,g=this.children.length;f<g;f++)if(e=this.children[f],e instanceof s||e instanceof m||e instanceof w){if(d.hasOwnProperty(e.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+e.toString(!0)+" cannot override static property '"+e.name+"'");d[e.name]=e.build()}else if(e instanceof m.Field)e.build(),this._fields.push(e),this._fieldsById[e.id]=e,this._fieldsByName[e.name]=e;else if(!(e instanceof m.OneOf||e instanceof v))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[f].toString(!0));return this.clazz=d},n.encode=function(a,b,c){for(var d,e,f=null,g=0,h=this._fields.length;g<h;++g)d=this._fields[g],e=a[d.name],d.required&&null===e?null===f&&(f=d):d.encode(c?e:d.verifyValue(e),b,a);if(null!==f){var i=Error("Missing at least one required field for "+this.toString(!0)+": "+f);throw i.encoded=b,i}return b},n.calculate=function(a){for(var b,c,d=0,e=0,f=this._fields.length;e<f;++e){if(b=this._fields[e],c=a[b.name],b.required&&null===c)throw Error("Missing at least one required field for "+this.toString(!0)+": "+b);d+=b.calculate(c,a)}return d},n.decode=function(a,c,d){c="number"==typeof c?c:-1;for(var f,g,h,i,j=a.offset,k=new this.clazz;a.offset<j+c||c===-1&&a.remaining()>0;){if(f=a.readVarint32(),g=7&f,h=f>>>3,g===b.WIRE_TYPES.ENDGROUP){if(h!==d)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+h+" ("+(d?d+" expected":"not a group")+")");break}if(i=this._fieldsById[h]){if(i.repeated&&!i.options.packed)k[i.name].push(i.decode(g,a));else if(i.map){var l=i.decode(g,a);k[i.name].set(l[0],l[1])}else if(k[i.name]=i.decode(g,a),i.oneof){var m=k[i.oneof.name];null!==m&&m!==i.name&&(k[m]=null),k[i.oneof.name]=i.name}}else switch(g){case b.WIRE_TYPES.VARINT:a.readVarint32();break;case b.WIRE_TYPES.BITS32:a.offset+=4;break;case b.WIRE_TYPES.BITS64:a.offset+=8;break;case b.WIRE_TYPES.LDELIM:var n=a.readVarint32();a.offset+=n;break;case b.WIRE_TYPES.STARTGROUP:for(;e(h,a););break;default:throw Error("Illegal wire type for unknown field "+h+" in "+this.toString(!0)+"#decode: "+g)}}for(var o=0,p=this._fields.length;o<p;++o)if(i=this._fields[o],null===k[i.name])if("proto3"===this.syntax)k[i.name]=i.defaultValue;else{if(i.required){var q=Error("Missing at least one required field for "+this.toString(!0)+": "+i.name);throw q.decoded=k,q}b.populateDefaults&&null!==i.defaultValue&&(k[i.name]=i.defaultValue)}return k},f.Message=m;var o=function(a,c,d,e,f,h,i,j,k,l){g.call(this,a,c,h),this.className="Message.Field",this.required="required"===d,this.repeated="repeated"===d,this.map="map"===d,this.keyType=e||null,this.type=f,this.resolvedType=null,this.id=i,this.options=j||{},this.defaultValue=null,this.oneof=k||null,this.syntax=l||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof m.ExtensionField||(this.name=b.Util.toCamelCase(this.name))},p=o.prototype=Object.create(g.prototype);p.build=function(){this.element=new k(this.type,this.resolvedType,(!1),this.syntax),this.map&&(this.keyElement=new k(this.keyType,(void 0),(!0),this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?"undefined"!=typeof this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=k.defaultFieldValue(this.type)},p.verifyValue=function(a,c){function d(a,b){throw Error("Illegal value for "+e.toString(!0)+" of type "+e.type.name+": "+a+" ("+b+")")}c=c||!1;var e=this;if(null===a)return this.required&&d(typeof a,"required"),"proto3"===this.syntax&&this.type!==b.TYPES.message&&d(typeof a,"proto3 field without field presence cannot be null"),null;var f;if(this.repeated&&!c){Array.isArray(a)||(a=[a]);var g=[];for(f=0;f<a.length;f++)g.push(this.element.verifyValue(a[f]));return g}return this.map&&!c?a instanceof b.Map?a:(a instanceof Object||d(typeof a,"expected ProtoBuf.Map or raw object for map field"),new b.Map(this,a)):(!this.repeated&&Array.isArray(a)&&d(typeof a,"no array expected"),this.element.verifyValue(a))},p.hasWirePresence=function(a,c){if("proto3"!==this.syntax)return null!==a;if(this.oneof&&c[this.oneof.name]===this.name)return!0;switch(this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:case b.TYPES.uint32:case b.TYPES.fixed32:return 0!==a;case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:case b.TYPES.uint64:case b.TYPES.fixed64:return 0!==a.low||0!==a.high;case b.TYPES.bool:return a;case b.TYPES.float:case b.TYPES.double:return 0!==a;case b.TYPES.string:return a.length>0;case b.TYPES.bytes:return a.remaining()>0;case b.TYPES.enum:return 0!==a;case b.TYPES.message:return null!==a;default:return!0}},p.encode=function(c,d,e){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return d;try{if(this.repeated){var f;if(this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){d.writeVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),d.ensureCapacity(d.offset+=1);var g=d.offset;for(f=0;f<c.length;f++)this.element.encodeValue(this.id,c[f],d);var h=d.offset-g,i=a.calculateVarint32(h);if(i>1){var j=d.slice(g,d.offset);g+=i-1,d.offset=g,d.append(j)}d.writeVarint32(h,g-i)}else for(f=0;f<c.length;f++)d.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,c[f],d)}else this.map?c.forEach(function(c,e,f){var g=a.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,e)+a.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,c);d.writeVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),d.writeVarint32(g),d.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,e,d),d.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,c,d)},this):this.hasWirePresence(c,e)&&(d.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,c,d))}catch(a){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+a+")")}return d},p.calculate=function(c,d){if(c=this.verifyValue(c),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return 0;var e=0;try{if(this.repeated){var f,g;if(this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(e+=a.calculateVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),g=0,f=0;f<c.length;f++)g+=this.element.calculateLength(this.id,c[f]);e+=a.calculateVarint32(g),e+=g}else for(f=0;f<c.length;f++)e+=a.calculateVarint32(this.id<<3|this.type.wireType),e+=this.element.calculateLength(this.id,c[f])}else this.map?c.forEach(function(c,d,f){var g=a.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,d)+a.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,c);e+=a.calculateVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),e+=a.calculateVarint32(g),e+=g},this):this.hasWirePresence(c,d)&&(e+=a.calculateVarint32(this.id<<3|this.type.wireType),e+=this.element.calculateLength(this.id,c))}catch(a){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+a+")")}return e},p.decode=function(a,c,d){var e,f,g=!this.map&&a==this.type.wireType||!d&&this.repeated&&this.options.packed&&a==b.WIRE_TYPES.LDELIM||this.map&&a==b.WIRE_TYPES.LDELIM;if(!g)throw Error("Illegal wire type for field "+this.toString(!0)+": "+a+" ("+this.type.wireType+" expected)");if(a==b.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!d){f=c.readVarint32(),f=c.offset+f;for(var h=[];c.offset<f;)h.push(this.decode(this.type.wireType,c,!0));return h}if(this.map){var i=k.defaultFieldValue(this.keyType);if(e=k.defaultFieldValue(this.type),f=c.readVarint32(),c.remaining()<f)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+f+" required but got only "+c.remaining());var j=c.clone();for(j.limit=j.offset+f,c.offset+=f;j.remaining()>0;){var l=j.readVarint32();a=7&l;var m=l>>>3;if(1===m)i=this.keyElement.decode(j,a,m);else{if(2!==m)throw Error("Unexpected tag in map field key/value submessage");e=this.element.decode(j,a,m)}}return[i,e]}return this.element.decode(c,a,this.id)},f.Message.Field=o;var q=function(a,b,c,d,e,f,g){o.call(this,a,b,c,null,d,e,f,g),this.extension};q.prototype=Object.create(o.prototype),f.Message.ExtensionField=q;var r=function(a,b,c){g.call(this,a,b,c),this.fields=[]};f.Message.OneOf=r;var s=function(a,b,c,d,e){i.call(this,a,b,c,d,e),this.className="Enum",this.object=null};s.getName=function(a,b){for(var c,d=Object.keys(a),e=0;e<d.length;++e)if(a[c=d[e]]===b)return c;return null};var t=s.prototype=Object.create(i.prototype);t.build=function(a){if(this.object&&!a)return this.object;for(var c=new b.Builder.Enum,d=this.getChildren(s.Value),e=0,f=d.length;e<f;++e)c[d[e].name]=d[e].id;return Object.defineProperty&&Object.defineProperty(c,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=c},f.Enum=s;var u=function(a,b,c,d){g.call(this,a,b,c),this.className="Enum.Value",this.id=d};u.prototype=Object.create(g.prototype),f.Enum.Value=u;var v=function(a,b,c,d){g.call(this,a,b,c),this.field=d};v.prototype=Object.create(g.prototype),f.Extension=v;var w=function(a,b,c,d){i.call(this,a,b,c,d),this.className="Service",this.clazz=null},x=w.prototype=Object.create(i.prototype);x.build=function(c){return this.clazz&&!c?this.clazz:this.clazz=function(b,c){for(var d=function(a){b.Builder.Service.call(this),this.rpcImpl=a||function(a,b,c){setTimeout(c.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},e=d.prototype=Object.create(b.Builder.Service.prototype),f=c.getChildren(b.Reflect.Service.RPCMethod),g=0;g<f.length;g++)!function(b){e[b.name]=function(d,e){try{try{d=b.resolvedRequestType.clazz.decode(a.wrap(d))}catch(a){if(!(a instanceof TypeError))throw a}if(null===d||"object"!=typeof d)throw Error("Illegal arguments");d instanceof b.resolvedRequestType.clazz||(d=new b.resolvedRequestType.clazz(d)),this.rpcImpl(b.fqn(),d,function(a,d){if(a)return void e(a);null===d&&(d="");try{d=b.resolvedResponseType.clazz.decode(d)}catch(a){}return d&&d instanceof b.resolvedResponseType.clazz?void e(null,d):void e(Error("Illegal response type received in service method "+c.name+"#"+b.name))})}catch(a){setTimeout(e.bind(this,a),0)}},d[b.name]=function(a,c,e){new d(a)[b.name](c,e)},Object.defineProperty&&(Object.defineProperty(d[b.name],"$options",{value:b.buildOpt()}),Object.defineProperty(e[b.name],"$options",{value:d[b.name].$options}))}(f[g]);return Object.defineProperty&&(Object.defineProperty(d,"$options",{value:c.buildOpt()}),Object.defineProperty(e,"$options",{value:d.$options}),Object.defineProperty(d,"$type",{value:c}),Object.defineProperty(e,"$type",{value:c})),d}(b,this)},f.Service=w;var y=function(a,b,c,d){g.call(this,a,b,c),this.className="Service.Method",this.options=d||{}},z=y.prototype=Object.create(g.prototype);z.buildOpt=j.buildOpt,f.Service.Method=y;var A=function(a,b,c,d,e,f,g,h){y.call(this,a,b,c,h),this.className="Service.RPCMethod",this.requestName=d,this.responseName=e,this.requestStream=f,this.responseStream=g,this.resolvedRequestType=null,this.resolvedResponseType=null};return A.prototype=Object.create(y.prototype),f.Service.RPCMethod=A,f}(d),d.Builder=function(a,c,d){function e(a){a.messages&&a.messages.forEach(function(b){b.syntax=a.syntax,e(b)}),a.enums&&a.enums.forEach(function(b){b.syntax=a.syntax})}var f=function(a){this.ns=new d.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=a||{}},g=f.prototype;return f.isMessage=function(a){return"string"==typeof a.name&&("undefined"==typeof a.values&&"undefined"==typeof a.rpc)},f.isMessageField=function(a){return"string"==typeof a.rule&&"string"==typeof a.name&&"string"==typeof a.type&&"undefined"!=typeof a.id},f.isEnum=function(a){return"string"==typeof a.name&&!("undefined"==typeof a.values||!Array.isArray(a.values)||0===a.values.length)},f.isService=function(a){return!("string"!=typeof a.name||"object"!=typeof a.rpc||!a.rpc)},f.isExtend=function(a){return"string"==typeof a.ref},g.reset=function(){return this.ptr=this.ns,this},g.define=function(a){if("string"!=typeof a||!c.TYPEREF.test(a))throw Error("illegal namespace: "+a);return a.split(".").forEach(function(a){var b=this.ptr.getChild(a);null===b&&this.ptr.addChild(b=new d.Namespace(this,this.ptr,a)),this.ptr=b},this),this},g.create=function(b){if(!b)return this;if(Array.isArray(b)){if(0===b.length)return this;b=b.slice()}else b=[b];for(var c=[b];c.length>0;){if(b=c.pop(),!Array.isArray(b))throw Error("not a valid namespace: "+JSON.stringify(b));for(;b.length>0;){var e=b.shift();if(f.isMessage(e)){var g=new d.Message(this,this.ptr,e.name,e.options,e.isGroup,e.syntax),h={};e.oneofs&&Object.keys(e.oneofs).forEach(function(a){g.addChild(h[a]=new d.Message.OneOf(this,g,a))},this),e.fields&&e.fields.forEach(function(a){if(null!==g.getChild(0|a.id))throw Error("duplicate or invalid field id in "+g.name+": "+a.id);if(a.options&&"object"!=typeof a.options)throw Error("illegal field options in "+g.name+"#"+a.name);var b=null;if("string"==typeof a.oneof&&!(b=h[a.oneof]))throw Error("illegal oneof in "+g.name+"#"+a.name+": "+a.oneof);a=new d.Message.Field(this,g,a.rule,a.keytype,a.type,a.name,a.id,a.options,b,e.syntax),b&&b.fields.push(a),g.addChild(a)},this);var i=[];if(e.enums&&e.enums.forEach(function(a){i.push(a)}),e.messages&&e.messages.forEach(function(a){i.push(a)}),e.services&&e.services.forEach(function(a){i.push(a)}),e.extensions&&("number"==typeof e.extensions[0]?g.extensions=[e.extensions]:g.extensions=e.extensions),this.ptr.addChild(g),i.length>0){c.push(b),b=i,i=null,this.ptr=g,g=null;continue}i=null}else if(f.isEnum(e))g=new d.Enum(this,this.ptr,e.name,e.options,e.syntax),e.values.forEach(function(a){g.addChild(new d.Enum.Value(this,g,a.name,a.id))},this),this.ptr.addChild(g);else if(f.isService(e))g=new d.Service(this,this.ptr,e.name,e.options),Object.keys(e.rpc).forEach(function(a){var b=e.rpc[a];g.addChild(new d.Service.RPCMethod(this,g,a,b.request,b.response,(!!b.request_stream),(!!b.response_stream),b.options))},this),this.ptr.addChild(g);else{if(!f.isExtend(e))throw Error("not definition: "+JSON.stringify(e));if(g=this.ptr.resolve(e.ref,!0))e.fields.forEach(function(b){if(null!==g.getChild(0|b.id))throw Error("duplicate extended field id in "+g.name+": "+b.id);if(g.extensions){var c=!1;if(g.extensions.forEach(function(a){b.id>=a[0]&&b.id<=a[1]&&(c=!0)}),!c)throw Error("illegal extended field id in "+g.name+": "+b.id+" (not within valid ranges)")}var e=b.name;this.options.convertFieldsToCamelCase&&(e=a.Util.toCamelCase(e));var f=new d.Message.ExtensionField(this,g,b.rule,b.type,this.ptr.fqn()+"."+e,b.id,b.options),h=new d.Extension(this,this.ptr,b.name,f);f.extension=h,this.ptr.addChild(h),g.addChild(f)},this);else if(!/\.?google\.protobuf\./.test(e.ref))throw Error("extended message "+e.ref+" is not defined")}e=null,g=null}b=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},g.import=function(c,d){var f="/";if("string"==typeof d){if(a.Util.IS_NODE&&(d=b(tj).resolve(d)),this.files[d]===!0)return this.reset();this.files[d]=!0}else if("object"==typeof d){var g=d.root;a.Util.IS_NODE&&(g=b(tj).resolve(g)),(g.indexOf("\\")>=0||d.file.indexOf("\\")>=0)&&(f="\\");var h=g+f+d.file;if(this.files[h]===!0)return this.reset();this.files[h]=!0}if(c.imports&&c.imports.length>0){var i,j=!1;"object"==typeof d?(this.importRoot=d.root,j=!0,i=this.importRoot,d=d.file,(i.indexOf("\\")>=0||d.indexOf("\\")>=0)&&(f="\\")):"string"==typeof d?this.importRoot?i=this.importRoot:d.indexOf("/")>=0?(i=d.replace(/\/[^\/]*$/,""),""===i&&(i="/")):d.indexOf("\\")>=0?(i=d.replace(/\\[^\\]*$/,""),f="\\"):i=".":i=null;for(var k=0;k<c.imports.length;k++)if("string"==typeof c.imports[k]){if(!i)throw Error("cannot determine import root");var l=c.imports[k];if("google/protobuf/descriptor.proto"===l)continue;if(l=i+f+l,this.files[l]===!0)continue;/\.proto$/i.test(l)&&!a.DotProto&&(l=l.replace(/\.proto$/,".json"));var m=a.Util.fetch(l);if(null===m)throw Error("failed to import '"+l+"' in '"+d+"': file not found");/\.json$/i.test(l)?this.import(JSON.parse(m+""),l):this.import(a.DotProto.Parser.parse(m),l)}else d?/\.(\w+)$/.test(d)?this.import(c.imports[k],d.replace(/^(.+)\.(\w+)$/,function(a,b,c){return b+"_import"+k+"."+c})):this.import(c.imports[k],d+"_import"+k):this.import(c.imports[k]);j&&(this.importRoot=null)}c.package&&this.define(c.package),c.syntax&&e(c);var n=this.ptr;return c.options&&Object.keys(c.options).forEach(function(a){n.options[a]=c.options[a]}),c.messages&&(this.create(c.messages),this.ptr=n),c.enums&&(this.create(c.enums),this.ptr=n),c.services&&(this.create(c.services),this.ptr=n),c.extends&&this.create(c.extends),this.reset()},g.resolveAll=function(){var b;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof d.Namespace)this.ptr.children.forEach(function(a){this.ptr=a,this.resolveAll()},this);else if(this.ptr instanceof d.Message.Field){if(c.TYPE.test(this.ptr.type))this.ptr.type=a.TYPES[this.ptr.type];else{if(!c.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(b=(this.ptr instanceof d.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0),!b)throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=b,b instanceof d.Enum){if(this.ptr.type=a.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==b.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(b instanceof d.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=b.isGroup?a.TYPES.group:a.TYPES.message}}if(this.ptr.map){if(!c.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=a.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof a.Reflect.Service.Method){if(!(this.ptr instanceof a.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(b=this.ptr.parent.resolve(this.ptr.requestName,!0),!(b&&b instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=b,b=this.ptr.parent.resolve(this.ptr.responseName,!0),!(b&&b instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=b}else if(!(this.ptr instanceof a.Reflect.Message.OneOf||this.ptr instanceof a.Reflect.Extension||this.ptr instanceof a.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},g.build=function(a){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!a)return this.result;for(var b="string"==typeof a?a.split("."):a,c=this.result,d=0;d<b.length;d++){if(!c[b[d]]){c=null;break}c=c[b[d]]}return c},g.lookup=function(a,b){return a?this.ns.resolve(a,b):this.ns},g.toString=function(){return"Builder"},f.Message=function(){},f.Enum=function(){},f.Service=function(){},f}(d,d.Lang,d.Reflect),d.Map=function(a,b){function c(a){var b=0;return{next:function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}}var d=function(a,c){if(!a.map)throw Error("field is not a map");if(this.field=a,this.keyElem=new b.Element(a.keyType,null,(!0),a.syntax),this.valueElem=new b.Element(a.type,a.resolvedType,(!1),a.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),c)for(var d=Object.keys(c),e=0;e<d.length;e++){var f=this.keyElem.valueFromString(d[e]),g=this.valueElem.verifyValue(c[d[e]]);this.map[this.keyElem.valueToString(f)]={key:f,value:g}}},e=d.prototype;return e.clear=function(){this.map={}},e.delete=function(a){var b=this.keyElem.valueToString(this.keyElem.verifyValue(a)),c=b in this.map;return delete this.map[b],c},e.entries=function(){for(var a,b=[],d=Object.keys(this.map),e=0;e<d.length;e++)b.push([(a=this.map[d[e]]).key,a.value]);return c(b)},e.keys=function(){for(var a=[],b=Object.keys(this.map),d=0;d<b.length;d++)a.push(this.map[b[d]].key);return c(a)},e.values=function(){for(var a=[],b=Object.keys(this.map),d=0;d<b.length;d++)a.push(this.map[b[d]].value);return c(a)},e.forEach=function(a,b){for(var c,d=Object.keys(this.map),e=0;e<d.length;e++)a.call(b,(c=this.map[d[e]]).value,c.key,this)},e.set=function(a,b){var c=this.keyElem.verifyValue(a),d=this.valueElem.verifyValue(b);return this.map[this.keyElem.valueToString(c)]={key:c,value:d},this},e.get=function(a){var b=this.keyElem.valueToString(this.keyElem.verifyValue(a));if(b in this.map)return this.map[b].value},e.has=function(a){var b=this.keyElem.valueToString(this.keyElem.verifyValue(a));return b in this.map},d}(d,d.Reflect),d.newBuilder=function(a){return a=a||{},"undefined"==typeof a.convertFieldsToCamelCase&&(a.convertFieldsToCamelCase=d.convertFieldsToCamelCase),"undefined"==typeof a.populateAccessors&&(a.populateAccessors=d.populateAccessors),new d.Builder(a)},d.loadJson=function(a,b,c){return("string"==typeof b||b&&"string"==typeof b.file&&"string"==typeof b.root)&&(c=b,b=null),b&&"object"==typeof b||(b=d.newBuilder()),"string"==typeof a&&(a=JSON.parse(a)),b.import(a,c),b.resolveAll(),b},d.loadJsonFile=function(a,b,c){if(b&&"object"==typeof b?(c=b,b=null):b&&"function"==typeof b||(b=null),b)return d.Util.fetch("string"==typeof a?a:a.root+"/"+a.file,function(e){if(null===e)return void b(Error("Failed to fetch file"));try{b(null,d.loadJson(JSON.parse(e),c,a))}catch(a){b(a)}});var e=d.Util.fetch("object"==typeof a?a.root+"/"+a.file:a);return null===e?null:d.loadJson(JSON.parse(e),c,a)},d})}),vj=b(uj),wj=Object.freeze({default:vj}),xj=c(function(a){a.exports=b(wj).newBuilder({}).import({package:"push_server.messages",options:{objc_class_prefix:"AVIM"},messages:[{name:"JsonObjectMessage",fields:[{rule:"required",type:"string",name:"data",id:1}]},{name:"UnreadTuple",fields:[{rule:"required",type:"string",name:"cid",id:1},{rule:"required",type:"int32",name:"unread",id:2},{rule:"optional",type:"string",name:"mid",id:3},{rule:"optional",type:"int64",name:"timestamp",id:4}]},{name:"LogItem",fields:[{rule:"optional",type:"string",name:"from",id:1},{rule:"optional",type:"string",name:"data",id:2},{rule:"optional",type:"int64",name:"timestamp",id:3},{rule:"optional",type:"string",name:"msgId",id:4},{rule:"optional",type:"int64",name:"ackAt",id:5}]},{name:"LoginCommand",fields:[]},{name:"DataCommand",fields:[{rule:"repeated",type:"string",name:"ids",id:1},{rule:"repeated",type:"JsonObjectMessage",name:"msg",id:2}]},{name:"SessionCommand",fields:[{rule:"optional",type:"int64",name:"t",id:1},{rule:"optional",type:"string",name:"n",id:2},{rule:"optional",type:"string",name:"s",id:3},{rule:"optional",type:"string",name:"ua",id:4},{rule:"optional",type:"bool",name:"r",id:5},{rule:"optional",type:"string",name:"tag",id:6},{rule:"optional",type:"string",name:"deviceId",id:7},{rule:"repeated",type:"string",name:"sessionPeerIds",id:8},{rule:"repeated",type:"string",name:"onlineSessionPeerIds",id:9},{rule:"optional",type:"string",name:"st",id:10},{rule:"optional",type:"int32",name:"stTtl",id:11},{rule:"optional",type:"int32",name:"code",id:12},{rule:"optional",type:"string",name:"reason",id:13},{rule:"optional",type:"string",name:"deviceToken",id:14},{rule:"optional",type:"bool",name:"sp",id:15}]},{name:"ErrorCommand",fields:[{rule:"required",type:"int32",name:"code",id:1},{rule:"required",type:"string",name:"reason",id:2},{rule:"optional",type:"int32",name:"appCode",id:3},{rule:"optional",type:"string",name:"detail",id:4}]},{name:"DirectCommand",fields:[{rule:"optional",type:"string",name:"msg",id:1},{rule:"optional",type:"string",name:"uid",id:2},{rule:"optional",type:"string",name:"fromPeerId",id:3},{rule:"optional",type:"int64",name:"timestamp",id:4},{rule:"optional",type:"bool",name:"offline",id:5},{rule:"optional",type:"bool",name:"hasMore",id:6},{rule:"repeated",type:"string",name:"toPeerIds",id:7},{rule:"optional",type:"bool",name:"r",id:10},{rule:"optional",type:"string",name:"cid",id:11},{rule:"optional",type:"string",name:"id",id:12},{rule:"optional",type:"bool",name:"transient",id:13},{rule:"optional",type:"string",name:"dt",id:14},{rule:"optional",type:"string",name:"roomId",id:15}]},{name:"AckCommand",fields:[{rule:"optional",type:"int32",name:"code",id:1},{rule:"optional",type:"string",name:"reason",id:2},{rule:"optional",type:"string",name:"mid",id:3},{rule:"optional",type:"string",name:"cid",id:4},{rule:"optional",type:"int64",name:"t",id:5},{rule:"optional",type:"string",name:"uid",id:6},{rule:"optional",type:"int64",name:"fromts",id:7},{rule:"optional",type:"int64",name:"tots",id:8},{rule:"optional",type:"string",name:"type",id:9},{rule:"repeated",type:"string",name:"ids",id:10},{rule:"optional",type:"int32",name:"appCode",id:11}]},{name:"UnreadCommand",fields:[{rule:"repeated",type:"UnreadTuple",name:"convs",id:1}]},{name:"ConvCommand",fields:[{rule:"repeated",type:"string",name:"m",id:1},{rule:"optional",type:"bool",name:"transient",id:2},{rule:"optional",type:"bool",name:"unique",id:3},{rule:"optional",type:"string",name:"cid",id:4},{rule:"optional",type:"string",name:"cdate",id:5},{rule:"optional",type:"string",name:"initBy",id:6},{rule:"optional",type:"string",name:"sort",id:7},{rule:"optional",type:"int32",name:"limit",id:8},{rule:"optional",type:"int32",name:"skip",id:9},{rule:"optional",type:"int32",name:"flag",id:10},{rule:"optional",type:"int32",name:"count",id:11},{rule:"optional",type:"string",name:"udate",id:12},{rule:"optional",type:"int64",name:"t",id:13},{rule:"optional",type:"string",name:"n",id:14},{rule:"optional",type:"string",name:"s",id:15},{rule:"optional",type:"JsonObjectMessage",name:"results",id:100},{rule:"optional",type:"JsonObjectMessage",name:"where",id:101},{rule:"optional",type:"JsonObjectMessage",name:"attr",id:103}]},{name:"RoomCommand",fields:[{rule:"optional",type:"string",name:"roomId",id:1},{rule:"optional",type:"string",name:"s",id:2},{rule:"optional",type:"int64",name:"t",id:3},{rule:"optional",type:"string",name:"n",id:4},{rule:"optional",type:"bool",name:"transient",id:5},{rule:"repeated",type:"string",name:"roomPeerIds",id:6},{rule:"optional",type:"string",name:"byPeerId",id:7}]},{name:"LogsCommand",fields:[{rule:"optional",type:"string",name:"cid",id:1},{rule:"optional",type:"int32",name:"l",id:2},{rule:"optional",type:"int32",name:"limit",id:3},{rule:"optional",type:"int64",name:"t",id:4},{rule:"optional",type:"int64",name:"tt",id:5},{rule:"optional",type:"string",name:"tmid",id:6},{rule:"optional",type:"string",name:"mid",id:7},{rule:"optional",type:"string",name:"checksum",id:8},{rule:"optional",type:"bool",name:"stored",id:9},{rule:"repeated",type:"LogItem",name:"logs",id:105}]},{name:"RcpCommand",fields:[{rule:"optional",type:"string",name:"id",id:1},{rule:"optional",type:"string",name:"cid",id:2},{rule:"optional",type:"int64",name:"t",id:3}]},{name:"ReadTuple",fields:[{rule:"required",type:"string",name:"cid",id:1},{rule:"optional",type:"int64",name:"timestamp",id:2},{rule:"optional",type:"string",name:"mid",id:3}]},{name:"ReadCommand",fields:[{rule:"optional",type:"string",name:"cid",id:1},{rule:"repeated",type:"string",name:"cids",id:2},{rule:"repeated",type:"ReadTuple",name:"convs",id:3}]},{name:"PresenceCommand",fields:[{rule:"optional",type:"StatusType",name:"status",id:1},{rule:"repeated",type:"string",name:"sessionPeerIds",id:2}]},{name:"ReportCommand",fields:[{rule:"optional",type:"bool",name:"initiative",id:1},{rule:"optional",type:"string",name:"type",id:2},{rule:"optional",type:"string",name:"data",id:3}]},{name:"GenericCommand",fields:[{rule:"required",type:"CommandType",name:"cmd",id:1},{rule:"optional",type:"OpType",name:"op",id:2},{rule:"optional",type:"string",name:"appId",id:3},{rule:"optional",type:"string",name:"peerId",id:4},{rule:"optional",type:"int32",name:"i",id:5},{rule:"optional",type:"string",name:"installationId",id:6},{rule:"optional",type:"LoginCommand",name:"loginMessage",id:100},{rule:"optional",type:"DataCommand",name:"dataMessage",id:101},{rule:"optional",type:"SessionCommand",name:"sessionMessage",id:102},{rule:"optional",type:"ErrorCommand",name:"errorMessage",id:103},{rule:"optional",type:"DirectCommand",name:"directMessage",id:104},{rule:"optional",type:"AckCommand",name:"ackMessage",id:105},{rule:"optional",type:"UnreadCommand",name:"unreadMessage",id:106},{rule:"optional",type:"ReadCommand",name:"readMessage",id:107},{rule:"optional",type:"RcpCommand",name:"rcpMessage",id:108},{rule:"optional",type:"LogsCommand",name:"logsMessage",id:109},{rule:"optional",type:"ConvCommand",name:"convMessage",id:110},{rule:"optional",type:"RoomCommand",name:"roomMessage",id:111},{rule:"optional",type:"PresenceCommand",name:"presenceMessage",id:112},{rule:"optional",type:"ReportCommand",name:"reportMessage",id:113}]}],enums:[{name:"CommandType",values:[{name:"session",id:0},{name:"conv",id:1},{name:"direct",id:2},{name:"ack",id:3},{name:"rcp",id:4},{name:"unread",id:5},{name:"logs",id:6},{name:"error",id:7},{name:"login",id:8},{name:"data",id:9},{name:"room",id:10},{name:"read",id:11},{name:"presence",id:12},{name:"report",id:13},{name:"echo",id:14}]},{name:"OpType",values:[{name:"open",id:1},{name:"add",id:2},{name:"remove",id:3},{name:"close",id:4},{name:"opened",id:5},{name:"closed",id:6},{name:"query",id:7},{name:"query_result",id:8},{name:"conflict",id:9},{name:"added",id:10},{name:"removed",id:11},{name:"start",id:30},{name:"started",id:31},{name:"joined",id:32},{name:"members_joined",id:33},{name:"left",id:39},{name:"members_left",id:40},{name:"results",id:42},{name:"count",id:43},{name:"result",id:44},{name:"update",id:45},{name:"updated",id:46},{name:"mute",id:47},{name:"unmute",id:48},{name:"join",id:80},{name:"invite",id:81},{name:"leave",id:82},{name:"kick",id:83},{name:"reject",id:84},{name:"invited",id:85},{name:"kicked",id:86},{name:"upload",id:100},{name:"uploaded",id:101}]},{name:"StatusType",values:[{name:"on",id:1},{name:"off",id:2}]}]}).build()}),yj=b(xj),zj=yj.push_server.messages,Aj=zj.JsonObjectMessage,Bj=(zj.UnreadTuple,zj.LogItem,zj.LoginCommand,zj.DataCommand,zj.SessionCommand),Cj=(zj.ErrorCommand,zj.DirectCommand),Dj=zj.AckCommand,Ej=(zj.UnreadCommand,zj.ConvCommand),Fj=(zj.RoomCommand,zj.LogsCommand),Gj=(zj.RcpCommand,zj.ReadTuple),Hj=zj.ReadCommand,Ij=(zj.PresenceCommand,zj.ReportCommand,zj.GenericCommand),Jj=zj.CommandType,Kj=zj.OpType,Lj=(zj.StatusType,jf("LC:Connection")),Mj=2e4,Nj=function(a){function b(c,d){var e=d.format,f=d.version;Id(this,b),Lj("initializing Connection");var g="lc."+e+"."+f,h=ze(this,a.call(this,c,g));return h._protocalFormat=e,h._commands={},h._serialId=0,h}return Ue(b,a),b.prototype.send=function(b){var c=this,d=arguments.length<=1||void 0===arguments[1]||arguments[1],e=void 0;d&&(e=++this._serialId,b.i=e),Lj("",Wi(b),"sent");var f=void 0;if("protobase64"===this._protocalFormat?f=b.toBase64():b.toBuffer?f=b.toBuffer():b.toArrayBuffer&&(f=b.toArrayBuffer()),!f)throw new TypeError(b+" is not a GenericCommand");return a.prototype.send.call(this,f),d?new pd(function(a,d){c._commands[e]={resolve:a,reject:d},setTimeout(function(){c._commands[e]&&(Lj("",Wi(b),"timeout"),d(new Error("Command Timeout.")),delete c._commands[e])},Mj)}):pd.resolve()},b.prototype.handleMessage=function(a){var b=void 0;try{b=Ij.decode(a),Lj("",Wi(b),"received")}catch(b){console.warn("Decode message failed",a)}this.emit("allmessage",b);var c=b.i;c?this._commands[c]?(b.cmd===Jj.error?this._commands[c].reject(lj(b.errorMessage)):this._commands[c].resolve(b),delete this._commands[c]):console.warn("Unexpected command received with serialId ["+c+"],\n         which have timed out or never been requested."):b.cmd===Jj.error?this.emit("error",lj(b.errorMessage)):this.emit("message",b)},b.prototype.ping=function(){return this.send(new Ij({cmd:"echo"})).catch(function(a){return console.warn("ping failed:",a)})},b}(bj),Oj=c(function(a){var c=b(C),d=b(Lc);a.exports=b(q).getIterator=function(a){var b=d(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return c(b.call(a))}}),Pj=b(Oj),Qj=Object.freeze({default:Pj}),Rj=c(function(a){a.exports=b(Qj)}),Sj=b(Rj),Tj=Object.freeze({default:Sj}),Uj=c(function(a){a.exports={default:b(Tj),__esModule:!0}}),Vj=b(Uj),Wj=Object.freeze({default:Vj}),Xj=function(a){return function(b){var c=b.constructor;return pd.resolve(b).then(a).then(Ki(function(d){return void 0===d||null===d?console.warn("Middleware["+(a._pluginName||"anonymous plugin")+":"+(a.name||"anonymous middleware")+"] param/return types not match. It returns "+d+" while a "+b.constructor.name+" expected."):d instanceof c?0:console.warn("Middleware["+(a._pluginName||"anonymous plugin")+":"+(a.name||"anonymous middleware")+"] param/return types not match. It returns a "+d.constructor.name+" while a "+b.constructor.name+" expected.")}))}},Yj=function(a,b){if(a){var c=!0,d=!1,e=void 0;try{for(var f,g=Vj(a);!(c=(f=g.next()).done);c=!0){var h=f.value;try{h(b)}catch(a){throw h._pluginName&&(a.message+="["+h._pluginName+"]"),a}}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}},Zj=function(a){return function(b){return Xi(a).reduce(function(a,b){return a.then(Xj(b)).catch(function(a){throw b._pluginName&&(a.message+="["+b._pluginName+"]"),a})},pd.resolve(b))}},$j=function(a){function b(c){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e=arguments[2],f=arguments[3];if(Id(this,b),void 0!==c&&"string"!=typeof c)throw new TypeError("Client id ["+c+"] is not a String");var g=ze(this,a.call(this));return Gd(g,{id:c,_connection:e,options:d},f),g}return Ue(b,a),b.prototype._dispatchMessage=function(a){this.emit("message",a)},b}(lf),_j=c(function(a){var c=b(zc),d=b(qb)("iterator"),e=b(Ub);a.exports=b(q).isIterable=function(a){var b=Object(a);return void 0!==b[d]||"@@iterator"in b||e.hasOwnProperty(c(b))}}),ak=b(_j),bk=Object.freeze({default:ak}),ck=c(function(a){a.exports=b(bk)}),dk=b(ck),ek=Object.freeze({default:dk}),fk=c(function(a){a.exports={default:b(ek),__esModule:!0}}),gk=b(fk),hk=Object.freeze({default:gk}),ik=c(function(a,c){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=b(hk),f=d(e),g=b(Wj),h=d(g);c.default=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=(0,h.default)(a);!(d=(g=i.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if((0,f.default)(Object(b)))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),jk=b(ik),kk=c(function(a){function b(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}a.exports=b}),lk=b(kk),mk=Object.freeze({default:lk}),nk=c(function(a){function b(){return Date.now()}a.exports=b}),ok=b(nk),pk=Object.freeze({default:ok}),qk=c(function(a){function c(a){var b=d(a)?h.call(a):"";return b==e||b==f}var d=b(mk),e="[object Function]",f="[object GeneratorFunction]",g=Object.prototype,h=g.toString;a.exports=c}),rk=b(qk),sk=Object.freeze({default:rk}),tk=c(function(a){function c(a){return"symbol"==typeof a||d(a)&&g.call(a)==e}var d=b(Gi),e="[object Symbol]",f=Object.prototype,g=f.toString;a.exports=c}),uk=b(tk),vk=Object.freeze({default:uk}),wk=c(function(a){function c(a){if("number"==typeof a)return a;if(f(a))return g;if(e(a)){var b=d(a.valueOf)?a.valueOf():a;a=e(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(h,"");var c=j.test(a);return c||k.test(a)?l(a.slice(2),c?2:8):i.test(a)?g:+a}var d=b(sk),e=b(mk),f=b(vk),g=NaN,h=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,k=/^0o[0-7]+$/i,l=parseInt;a.exports=c}),xk=b(wk),yk=Object.freeze({default:xk}),zk=c(function(a){function c(a,b,c){function j(b){var c=s,d=t;return s=t=void 0,y=b,v=a.apply(d,c)}function k(a){return y=a,w=setTimeout(n,b),z?j(a):v}function l(a){var c=a-x,d=a-y,e=b-c;return A?i(e,u-d):e}function m(a){var c=a-x,d=a-y;return void 0===x||c>=b||c<0||A&&d>=u}function n(){var a=e();return m(a)?o(a):void(w=setTimeout(n,l(a)))}function o(a){return w=void 0,B&&s?j(a):(s=t=void 0,v)}function p(){y=0,s=x=t=w=void 0}function q(){return void 0===w?v:o(e())}function r(){var a=e(),c=m(a);if(s=arguments,t=this,x=a,c){if(void 0===w)return k(x);if(A)return w=setTimeout(n,b),j(x)}return void 0===w&&(w=setTimeout(n,b)),v}var s,t,u,v,w,x,y=0,z=!1,A=!1,B=!0;if("function"!=typeof a)throw new TypeError(g);return b=f(b)||0,d(c)&&(z=!!c.leading,A="maxWait"in c,u=A?h(f(c.maxWait)||0,b):u,B="trailing"in c?!!c.trailing:B),r.cancel=p,r.flush=q,r}var d=b(mk),e=b(pk),f=b(yk),g="Expected a function",h=Math.max,i=Math.min;a.exports=c}),Ak=b(zk),Bk=Object.freeze({default:Ak}),Ck=c(function(a){function c(a,b,c){var g=!0,h=!0;if("function"!=typeof a)throw new TypeError(f);return e(c)&&(g="leading"in c?!!c.leading:g,h="trailing"in c?!!c.trailing:h),d(a,b,{leading:g,maxWait:b,trailing:h})}var d=b(Bk),e=b(mk),f="Expected a function";a.exports=c}),Dk=b(Ck),Ek=c(function(a,c){function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=b(oi),f=d(e);c.default=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),(0,f.default)(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()}),Fk=b(Ek),Gk=c(function(a){function b(a){return a&&a.Object===Object?a:null}a.exports=b}),Hk=b(Gk),Ik=Object.freeze({default:Hk}),Jk=c(function(a){var c=b(Ik),d=c("object"==typeof j&&j),e=c("object"==typeof self&&self),f=c("object"==typeof j&&j),g=d||e||f||Function("return this")();a.exports=g}),Kk=b(Jk),Lk=Object.freeze({default:Kk}),Mk=c(function(a){var c=b(Lk),d=c["__core-js_shared__"];a.exports=d}),Nk=b(Mk),Ok=Object.freeze({default:Nk}),Pk=c(function(a){function c(a){return!!e&&e in a}var d=b(Ok),e=function(){var a=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();a.exports=c}),Qk=b(Pk),Rk=Object.freeze({default:Qk}),Sk=c(function(a){function b(a){if(null!=a){try{return c.call(a)}catch(a){}try{return a+""}catch(a){}}return""}var c=Function.prototype.toString;a.exports=b}),Tk=b(Sk),Uk=Object.freeze({default:Tk}),Vk=c(function(a){function c(a){if(!g(a)||f(a))return!1;var b=d(a)||e(a)?n:j;return b.test(h(a))}var d=b(sk),e=b(Di),f=b(Rk),g=b(mk),h=b(Uk),i=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,k=Object.prototype,l=Function.prototype.toString,m=k.hasOwnProperty,n=RegExp("^"+l.call(m).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=c}),Wk=b(Vk),Xk=Object.freeze({default:Wk}),Yk=c(function(a){function b(a,b){return null==a?void 0:a[b]}a.exports=b}),Zk=b(Yk),$k=Object.freeze({default:Zk}),_k=c(function(a){function c(a,b){var c=e(a,b);return d(c)?c:void 0}var d=b(Xk),e=b($k);a.exports=c}),al=b(_k),bl=Object.freeze({default:al}),cl=c(function(a){var c=b(bl),d=b(Lk),e=c(d,"DataView");a.exports=e}),dl=b(cl),el=Object.freeze({default:dl}),fl=c(function(a){var c=b(bl),d=b(Lk),e=c(d,"Map");a.exports=e}),gl=b(fl),hl=Object.freeze({default:gl}),il=c(function(a){var c=b(bl),d=b(Lk),e=c(d,"Promise");a.exports=e}),jl=b(il),kl=Object.freeze({default:jl}),ll=c(function(a){var c=b(bl),d=b(Lk),e=c(d,"Set");a.exports=e}),ml=b(ll),nl=Object.freeze({default:ml}),ol=c(function(a){var c=b(bl),d=b(Lk),e=c(d,"WeakMap");a.exports=e}),pl=b(ol),ql=Object.freeze({default:pl}),rl=c(function(a){function c(a){return q.call(a)}var d=b(el),e=b(hl),f=b(kl),g=b(nl),h=b(ql),i=b(Uk),j="[object Map]",k="[object Object]",l="[object Promise]",m="[object Set]",n="[object WeakMap]",o="[object DataView]",p=Object.prototype,q=p.toString,r=i(d),s=i(e),t=i(f),u=i(g),v=i(h);(d&&c(new d(new ArrayBuffer(1)))!=o||e&&c(new e)!=j||f&&c(f.resolve())!=l||g&&c(new g)!=m||h&&c(new h)!=n)&&(c=function(a){var b=q.call(a),c=b==k?a.constructor:void 0,d=c?i(c):void 0;if(d)switch(d){case r:return o;case s:return j;case t:return l;case u:return m;case v:return n}return b}),a.exports=c}),sl=b(rl),tl=Object.freeze({default:sl}),ul=c(function(a){function b(a){return function(b){return null==b?void 0:b[a]}}a.exports=b}),vl=b(ul),wl=Object.freeze({default:vl}),xl=c(function(a){var c=b(wl),d=c("length");a.exports=d}),yl=b(xl),zl=Object.freeze({default:yl}),Al=c(function(a){function b(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=c}var c=9007199254740991;a.exports=b}),Bl=b(Al),Cl=Object.freeze({default:Bl}),Dl=c(function(a){function c(a){return null!=a&&f(d(a))&&!e(a)}var d=b(zl),e=b(sk),f=b(Cl);a.exports=c}),El=b(Dl),Fl=Object.freeze({default:El}),Gl=c(function(a){function c(a){return e(a)&&d(a)}var d=b(Fl),e=b(Gi);a.exports=c}),Hl=b(Gl),Il=Object.freeze({default:Hl}),Jl=c(function(a){function c(a){return d(a)&&g.call(a,"callee")&&(!i.call(a,"callee")||h.call(a)==e)}var d=b(Il),e="[object Arguments]",f=Object.prototype,g=f.hasOwnProperty,h=f.toString,i=f.propertyIsEnumerable;a.exports=c}),Kl=b(Jl),Ll=Object.freeze({default:Kl}),Ml=c(function(a){var b=Array.isArray;a.exports=b}),Nl=b(Ml),Ol=Object.freeze({default:Nl}),Pl=c(function(a){function b(){return!1}a.exports=b}),Ql=b(Pl),Rl=Object.freeze({default:Ql}),Sl=c(function(a,c){var d=b(Lk),e=b(Rl),f="object"==typeof c&&c,g=f&&"object"==typeof a&&a,h=g&&g.exports===f,i=h?d.Buffer:void 0,j=i?function(a){return a instanceof i}:e;a.exports=j}),Tl=b(Sl),Ul=Object.freeze({default:Tl}),Vl=c(function(a){function c(a){return"string"==typeof a||!d(a)&&e(a)&&h.call(a)==f}var d=b(Ol),e=b(Gi),f="[object String]",g=Object.prototype,h=g.toString;a.exports=c}),Wl=b(Vl),Xl=Object.freeze({default:Wl}),Yl=c(function(a){function c(a,b){return null!=a&&(f.call(a,b)||"object"==typeof a&&b in a&&null===d(a))}var d=b(Ai),e=Object.prototype,f=e.hasOwnProperty;a.exports=c}),Zl=b(Yl),$l=Object.freeze({default:Zl}),_l=c(function(a){function b(a){return c(Object(a))}var c=Object.keys;a.exports=b}),am=b(_l),bm=Object.freeze({default:am}),cm=c(function(a){function b(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}a.exports=b}),dm=b(cm),em=Object.freeze({default:dm}),fm=c(function(a){function c(a){var b=a?a.length:void 0;return g(b)&&(f(a)||h(a)||e(a))?d(b,String):null}var d=b(em),e=b(Ll),f=b(Ol),g=b(Cl),h=b(Xl);a.exports=c}),gm=b(fm),hm=Object.freeze({default:gm}),im=c(function(a){function b(a,b){return b=null==b?c:b,!!b&&("number"==typeof a||d.test(a))&&a>-1&&a%1==0&&a<b}var c=9007199254740991,d=/^(?:0|[1-9]\d*)$/;a.exports=b}),jm=b(im),km=Object.freeze({default:jm}),lm=c(function(a){function b(a){var b=a&&a.constructor,d="function"==typeof b&&b.prototype||c;return a===d}var c=Object.prototype;a.exports=b}),mm=b(lm),nm=Object.freeze({default:mm}),om=c(function(a){function c(a){var b=i(a);if(!b&&!g(a))return e(a);var c=f(a),j=!!c,k=c||[],l=k.length;for(var m in a)!d(a,m)||j&&("length"==m||h(m,l))||b&&"constructor"==m||k.push(m);return k}var d=b($l),e=b(bm),f=b(hm),g=b(Fl),h=b(km),i=b(nm);a.exports=c}),pm=b(om),qm=Object.freeze({default:pm}),rm=c(function(a){function c(a){if(g(a)&&(f(a)||k(a)||i(a.splice)||e(a)||h(a)))return!a.length;if(j(a)){var b=d(a);if(b==m||b==n)return!a.size}for(var c in a)if(p.call(a,c))return!1;return!(r&&l(a).length)}var d=b(tl),e=b(Ll),f=b(Ol),g=b(Fl),h=b(Ul),i=b(sk),j=b(Gi),k=b(Xl),l=b(qm),m="[object Map]",n="[object Set]",o=Object.prototype,p=o.hasOwnProperty,q=o.propertyIsEnumerable,r=!q.call({valueOf:1},"valueOf");a.exports=c}),sm=b(rm),tm=jf("LC:SignatureFactoryRunner"),um=function(a,b){return pd.resolve().then(function(){return tm("call signatureFactory with "+b),a.apply(null,b)}).then(Ki(function(a){return tm("sign result",a)}),function(a){throw a.message="sign error: "+a.message,tm(a),a}).then(e)},vm=function(){function a(b){Id(this,a),Gd(this,{content:b},{id:fh.v4(),cid:null,timestamp:new Date,from:void 0,needReceipt:!1,transient:!1})}return a.prototype.setNeedReceipt=function(a){return this.needReceipt=a,this},a.prototype.setTransient=function(a){return this.transient=a,this},a.prototype.toJSON=function(){return this.content},a.validate=function(){return!0},a.parse=function(a,b){return b||new this(a)},a}(),wm=jf("LC:Conversation"),xm=function(a){function b(c,d){Id(this,b);var e=ze(this,a.call(this));if(Gd(e,{mutedMembers:[],members:[],_attributes:{},transient:!1,muted:!1,unreadMessagesCount:0},Oi({attributes:"_attributes",name:"_name"},c)),e.members=Mh(new hi(e.members)),!(d instanceof Cm))throw new TypeError("Conversation must be initialized with a client");return e._client=d,["kicked","membersjoined","membersleft","message"].forEach(function(a){return e.on(a,function(b){return e._debug(a+" event emitted.",b)})}),Yj(e._client._plugins.onConversationCreate,e),e}return Ue(b,a),b.prototype.setAttributes=function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(this._debug("set attributes: value="+Pf(a)+", assign="+b),!Ii(a))throw new TypeError("attributes must be a plain object");return b?this._pendingAttributes=Gd({},this.attributes,a):this._pendingAttributes=a,this},b.prototype.setAttribute=function(a,b){return"undefined"==typeof this._pendingAttributes&&(this._pendingAttributes={}),this._pendingAttributes[a]=b,this},b.prototype.setName=function(a){return this._debug("set name: "+a),this._pendingName=a,this},b.prototype._debug=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];wm.apply(void 0,b.concat(["["+this.id+"]"]))},b.prototype._send=function(a){var b;null===a.cmd&&(a.cmd="conv"),"conv"===a.cmd&&null===a.convMessage&&(a.convMessage=new Ej),a.convMessage&&null===a.convMessage.cid&&(a.convMessage.cid=this.id);for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return(b=this._client)._send.apply(b,[a].concat(d))},b.prototype.save=function(){var a=this;this._debug("save");var b={};if("undefined"!=typeof this._pendingAttributes&&(b.attr=this._pendingAttributes),"undefined"!=typeof this._pendingName&&(b.name=this._pendingName),sm(b))return this._debug("nothing touched, resolve with self"),pd.resolve(this);this._debug("attr: "+Pf(b));var c=new Ej({attr:new Aj({data:Pf(b)})});return this._send(new Ij({op:"update",convMessage:c})).then(function(b){return a.updatedAt=b.convMessage.udate,"undefined"!=typeof a._pendingAttributes&&(a._attributes=a._pendingAttributes,delete a._pendingAttributes),"undefined"!=typeof a._pendingName&&(a._name=a._pendingName,delete a._pendingName),a})},b.prototype.fetch=function(){var a=this;return this._client.getQuery().equalTo("objectId",this.id).find().then(function(){return a})},b.prototype.mute=function(){var a=this;return this._debug("mute"),this._send(new Ij({op:"mute"})).then(function(){return a.transient||(a.muted=!0,a.mutedMembers=Ri(a.mutedMembers,[a._client.id])),a})},b.prototype.unmute=function(){var a=this;return this._debug("unmute"),this._send(new Ij({op:"unmute"})).then(function(){return a.transient||(a.muted=!1,a.mutedMembers=Si(a.mutedMembers,[a._client.id])),a})},b.prototype.count=function(){return this._debug("unmute"),this._send(new Ij({op:"count"})).then(function(a){return a.convMessage.count})},b.prototype.add=function(a){var b=this;this._debug("add",a),"string"==typeof a&&(a=[a]);var c=new Ej({m:a});return pd.resolve(new Ij({op:"add",convMessage:c})).then(function(c){if(b._client.options.conversationSignatureFactory){var d=[b.id,b._client.id,a.sort(),"add"];return um(b._client.options.conversationSignatureFactory,d).then(function(a){return Gd(c.convMessage,Oi({signature:"s",timestamp:"t",nonce:"n"},a)),c})}return c}).then(this._send.bind(this)).then(function(){return b.transient||(b.members=Ri(b.members,a)),b})},b.prototype.remove=function(a){var b=this;this._debug("remove",a),"string"==typeof a&&(a=[a]);var c=new Ej({m:a});return pd.resolve(new Ij({op:"remove",convMessage:c})).then(function(c){if(b._client.options.conversationSignatureFactory){var d=[b.id,b._client.id,a.sort(),"remove"];return um(b._client.options.conversationSignatureFactory,d).then(function(a){return Gd(c.convMessage,Oi({signature:"s",timestamp:"t",nonce:"n"},a)),c})}return c}).then(this._send.bind(this)).then(function(){return b.transient||(b.members=Si(b.members,a)),b})},b.prototype.join=function(){return this._debug("join"),this.add(this._client.id)},b.prototype.quit=function(){return this._debug("quit"),this.remove(this._client.id)},b.prototype.send=function(a){var b=this;if(this._debug(a,"send"),!(a instanceof vm))throw new TypeError(a+" is not a Message");Gd(a,{cid:this.id,from:this._client.id});var c=a.toJSON();"string"!=typeof c&&(c=Pf(c));var d=this._send(new Ij({cmd:"direct",directMessage:new Cj({msg:c,cid:this.id,r:a.needReceipt,transient:a.transient,dt:a.id})}),!a.transient);return a.transient||(d=d.then(function(c){var d=c.ackMessage,e=d.uid,f=d.t,g=d.code,h=d.reason,i=d.appCode;if(null!==g)throw lj({code:g,reason:h,appCode:i});return Gd(a,{id:e,timestamp:new Date(f.toNumber())}),b.lastMessage=a,b.lastMessageAt=a.timestamp,a})),d},b.prototype.queryMessages=function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this._debug("query messages",b),b.beforeMessageId&&!b.beforeTime)throw new Error("query option beforeMessageId must be used with option beforeTime");if(b.afterMessageId&&!b.afterTime)throw new Error("query option afterMessageId must be used with option afterTime");var c=Oi({beforeTime:"t",beforeMessageId:"mid",afterTime:"tt",afterMessageId:"tmid",limit:"l"},b);return c.t instanceof Date&&(c.t=c.t.getTime()),c.tt instanceof Date&&(c.tt=c.tt.getTime()),this._send(new Ij({cmd:"logs",logsMessage:new Fj(Gd(c,{cid:this.id}))})).then(function(b){return pd.all(b.logsMessage.logs.map(function(b){return a._client._messageParser.parse(b.data).then(function(c){var d={id:b.msgId,cid:a.id,timestamp:new Date(b.timestamp.toNumber()),from:b.from};return Gd(c,d),c})}))})},b.prototype.createMessagesIterator=function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=b.beforeTime,d=b.beforeMessageId,e=b.limit,f=void 0;return{next:function(){return f=void 0===f?a.queryMessages({limit:e,beforeTime:c,beforeMessageId:d}):f.then(function(b){return 0===b.length||b.length<e?[]:a.queryMessages({beforeTime:b[0].timestamp,beforeMessageId:b[0].id,limit:e})}),f.then(function(a){return{value:Mh(a),done:0===a.length||a.length<e}})}}},b.prototype.markAsRead=function(){var a=this;return this._client.markAllAsRead([this]).then(function(){return a})},Fk(b,[{key:"createdAt",set:function(a){this._createdAt=Ni(a)},get:function(){return this._createdAt}},{key:"updatedAt",set:function(a){this._updatedAt=Ni(a)},get:function(){return this._updatedAt}},{key:"lastMessageAt",set:function(a){this._lastMessageAt=Ni(a)},get:function(){return this._lastMessageAt}},{key:"attributes",get:function(){return"undefined"!=typeof this._pendingAttributes?this._pendingAttributes:this._attributes},set:function(a){this.setAttributes(a)}},{key:"name",get:function(){return"undefined"!=typeof this._pendingName?this._pendingName:this._name},set:function(a){this.setName(a)}}]),b}(lf),ym=jf("LC:ConversationQuery"),zm=function(){function a(b){Id(this,a),this._client=b,this._where={},this._extraOptions={}}return a._encode=function(a){return a instanceof Date?{__type:"Date",iso:a.toJSON()}:a instanceof RegExp?a.source:a},a._quote=function(a){return"\\Q"+a.replace("\\E","\\E\\\\E\\Q")+"\\E"},a._calculateFlag=function(a){return["withLastMessagesRefreshed","compact"].reduce(function(b,c){return(b<<1)+Boolean(a[c])},0)},a.prototype._addCondition=function(a,b,c){return this._where[a]||(this._where[a]={}),this._where[a][b]=this.constructor._encode(c),this},a.prototype.toJSON=function(){var a={where:this._where,flag:this.constructor._calculateFlag(this._extraOptions)};return"undefined"!=typeof this._skip&&(a.skip=this._skip),"undefined"!=typeof this._limit&&(a.limit=this._limit),ym(a),a},a.prototype.containsMembers=function(a){return this.containsAll("m",a)},a.prototype.withMembers=function(a,b){var c=new hi(a);return b&&c.add(this._client.id),this.sizeEqualTo("m",c.size),this.containsMembers(Mh(c))},a.prototype.equalTo=function(a,b){return this._where[a]=this.constructor._encode(b),this},a.prototype.lessThan=function(a,b){return this._addCondition(a,"$lt",b)},a.prototype.lessThanOrEqualTo=function(a,b){return this._addCondition(a,"$lte",b)},a.prototype.greaterThan=function(a,b){return this._addCondition(a,"$gt",b)},a.prototype.greaterThanOrEqualTo=function(a,b){return this._addCondition(a,"$gte",b)},a.prototype.notEqualTo=function(a,b){return this._addCondition(a,"$ne",b)},a.prototype.containedIn=function(a,b){return this._addCondition(a,"$in",b)},a.prototype.notContainsIn=function(a,b){return this._addCondition(a,"$nin",b)},a.prototype.containsAll=function(a,b){return this._addCondition(a,"$all",b)},a.prototype.contains=function(b,c){return this._addCondition(b,"$regex",a._quote(c))},a.prototype.startsWith=function(b,c){return this._addCondition(b,"$regex","^"+a._quote(c))},a.prototype.endsWith=function(b,c){return this._addCondition(b,"$regex",a._quote(c)+"$")},a.prototype.matches=function(a,b){this._addCondition(a,"$regex",b);var c="";return b.ignoreCase&&(c+="i"),b.multiline&&(c+="m"),c&&c.length&&this._addCondition(a,"$options",c),this},a.prototype.sizeEqualTo=function(a,b){return this._addCondition(a,"$size",b)},a.prototype.limit=function(a){return this._limit=a,this},a.prototype.skip=function(a){return this._skip=a,this},a.prototype.ascending=function(a){return this._order=a,this},a.prototype.addAscending=function(a){return this._order?this._order+=","+a:this._order=a,this},a.prototype.descending=function(a){return this._order="-"+a,this},a.prototype.addDescending=function(a){return this._order?this._order+=",-"+a:this._order="-"+a,a},a.prototype.withLastMessagesRefreshed=function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];return this._extraOptions.withLastMessagesRefreshed=a,this},a.prototype.withLastMessages=function(a){return console.warn("DEPRECATION ConversationQuery#withLastMessages: Use ConversationQuery#withLastMessagesRefreshed instead."),this.withLastMessagesRefreshed(a)},a.prototype.compact=function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];return this._extraOptions.compact=a,this},a.prototype.find=function(){return this._client._executeQuery(this)},a}(),Am="3.1.1",Bm=jf("LC:IMClient"),Cm=function(a){function b(){Id(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=ze(this,a.call.apply(a,[this].concat(d)));if(!f._messageParser)throw new Error("IMClient must be initialized with a MessageParser");return f._conversationCache=new Mi("client:"+f.id),f._ackMessageBuffer={},["invited","kicked","membersjoined","membersleft","message","unreadmessages","close","conflict","unhandledmessage"].forEach(function(a){return f.on(a,function(b){return f._debug(a+" event emitted.",b)})}),Yj(f._plugins.onIMClientCreate,f),f}return Ue(b,a),b.prototype._debug=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];Bm.apply(void 0,b.concat(["["+this.id+"]"]))},b.prototype._dispatchMessage=function(a){switch(this._debug(Wi(a),"received"),a.cmd){case Jj.conv:return this._dispatchConvMessage(a);case Jj.direct:return this._dispatchDirectMessage(a);case Jj.session:return this._dispatchSessionMessage(a);case Jj.unread:return this._dispatchUnreadMessage(a);default:return this.emit("unhandledmessage",a),pd.resolve()}},b.prototype._dispatchSessionMessage=function(a){var b=a.sessionMessage,c=b.code,d=b.reason;switch(a.op){case Kj.closed:return c===kj.code?this.emit("conflict",{reason:d}):this.emit("close",{code:c,reason:d});default:return this.emit("unhandledmessage",a),pd.reject(new Error("Unrecognized session command"))}},b.prototype._dispatchUnreadMessage=function(a){var b=this,c=a.unreadMessage.convs;return pd.all(c.map(function(a){return b.getConversation(a.cid).then(function(c){var d=void 0;a.timestamp&&(d=new Date(a.timestamp.toNumber())),c.unreadMessagesCount=a.unread,b.emit("unreadmessages",{count:a.unread,lastMessageId:a.mid,lastMessageTimestamp:d},c)})}))},b.prototype._dispatchConvMessage=function(a){var b=this,c=a.convMessage,d=a.convMessage,e=d.initBy,f=d.m;switch(a.op){case Kj.joined:return this.getConversation(c.cid).then(function(a){a.transient||(a.members=Ri(a.members,[b.id]));var c={invitedBy:e};b.emit("invited",c,a),a.emit("invited",c)});case Kj.left:return this.getConversation(c.cid).then(function(a){a.transient||(a.members=Si(a.members,[b.id]));var c={kickedBy:e};b.emit("kicked",c,a),a.emit("kicked",c)});case Kj.members_joined:return this.getConversation(c.cid).then(function(a){a.transient||(a.members=Ri(a.members,c.m));var d={invitedBy:e,members:f};b.emit("membersjoined",d,a),a.emit("membersjoined",d)});case Kj.members_left:return this.getConversation(c.cid).then(function(a){a.transient||(a.members=Si(a.members,c.m));var d={kickedBy:e,members:f};b.emit("membersleft",d,a),a.emit("membersleft",d)});default:return this.emit("unhandledmessage",a),pd.reject(new Error("Unrecognized conversation command"))}},b.prototype._dispatchDirectMessage=function(a){var b=this,c=a.directMessage,d=a.directMessage,e=d.id,f=d.cid,g=d.fromPeerId,h=d.timestamp,i=d.transient;return pd.all([this.getConversation(c.cid),this._messageParser.parse(c.msg)]).then(function(a){var c=jk(a,2),d=c[0],j=c[1],k={id:e,cid:f,timestamp:new Date(h.toNumber()),from:g,transient:i};Gd(j,k),d.lastMessage=j,d.lastMessageAt=j.timestamp,d.unreadMessagesCount++,b.emit("message",j,d),d.emit("message",j),i||d.transient||b._sendAck(j)})},b.prototype._sendAck=function(a){this._debug("send ack for",a);var b=a.cid;return b?(this._ackMessageBuffer[b]||(this._ackMessageBuffer[b]=[]),this._ackMessageBuffer[b].push(a),this._doSendAckThrottled||(this._doSendAckThrottled=Dk(this._doSendAck.bind(this),1e3)),this._doSendAckThrottled()):pd.reject(new Error("missing cid"))},b.prototype._doSendAck=function(){var a=this;return this._connection.is("connected")?(Bm("do send ack",this._ackMessageBuffer),pd.all(xi(this._ackMessageBuffer).map(function(b){var c=a._ackMessageBuffer[b],d=c.map(function(a){return a.timestamp}),e=new Ij({cmd:"ack",ackMessage:new Dj({cid:b,fromts:Math.min.apply(null,d),tots:Math.max.apply(null,d)})});return a._send(e,!1).then(function(){return delete a._ackMessageBuffer[b]}).catch(function(a){return console.warn("send ack failed:",a)})}))):pd.resolve()},b.prototype._send=function(a){var b,c=a;this.id&&(c.peerId=this.id);for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return(b=this._connection).send.apply(b,[c].concat(e))},b.prototype._open=function(a,b,c){var d=this,e=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];return this._debug("open session"),pd.resolve(new Ij({cmd:"session",op:"open",appId:a,sessionMessage:new Bj({ua:"js/"+Am,r:e,tag:b,deviceId:c})})).then(function(a){return d.options.signatureFactory?um(d.options.signatureFactory,[d.id]).then(function(b){return Gd(a.sessionMessage,Oi({signature:"s",timestamp:"t",nonce:"n"},b)),a}):a}).then(this._send.bind(this)).then(function(a){var b=a.peerId;return b?void(d.id=b):void console.warn("Unexpected session opened without peerId.")})},b.prototype.close=function(){var a=this;this._debug("close session");var b=new Ij({cmd:"session",op:"close"});return this._send(b).then(function(){a.emit("close",{code:0})})},b.prototype.ping=function(a){if(this._debug("ping"),!(a instanceof Array))throw new TypeError("clientIds "+a+" is not an Array");if(!a.length)return pd.resolve([]);var b=new Ij({cmd:"session",op:"query",sessionMessage:new Bj({sessionPeerIds:a})});return this._send(b).then(function(a){return a.sessionMessage.onlineSessionPeerIds})},b.prototype.getConversation=function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if("string"!=typeof a)throw new TypeError(a+" is not a String");if(!b){var c=this._conversationCache.get(a);if(c)return pd.resolve(c)}return this.getQuery().equalTo("objectId",a).find().then(function(a){return a[0]||null})},b.prototype.getQuery=function(){return new zm(this)},b.prototype._executeQuery=function(a){var b=this,c=a.toJSON();c.where=new Aj({data:Pf(c.where)});var d=new Ij({cmd:"conv",op:"query",convMessage:new Ej(c)});return this._send(d).then(function(a){try{return JSON.parse(a.convMessage.results.data)}catch(c){var b=Pf(Wi(a));throw new Error("Parse query result failed: "+c.message+". Command: "+b)}}).then(function(a){return pd.all(a.map(b._parseConversationFromRawData.bind(b)))}).then(function(a){return a.map(function(a){var c=b._conversationCache.get(a.id);return c?(b._debug("update cached conversation"),["_name","creator","createdAt","updatedAt","lastMessageAt","lastMessage","mutedMembers","members","_attributes","transient","muted"].forEach(function(b){var d=a[b];void 0!==d&&(c[b]=d)}),delete c._pendingAttributes,delete c._pendingName):(c=a,b._debug("no match, set cache"),b._conversationCache.set(a.id,a)),c})})},b.prototype._parseConversationFromRawData=function(a){var b=this,c=Oi({objectId:"id",lm:"lastMessageAt",msg:"lastMessage",msg_from:"lastMessageFrom",msg_mid:"lastMessageId",msg_timestamp:"lastMessageTimestamp",m:"members",attr:"attributes",tr:"transient",c:"creator",mu:"mutedMembers"},a);return pd.resolve().then(function(){return c.lastMessage?b._messageParser.parse(c.lastMessage).then(function(a){c.lastMessage=a,c.lastMessage.from=c.lastMessageFrom,c.lastMessage.id=c.lastMessageId,c.lastMessage.timestamp=new Date(c.lastMessageTimestamp),delete c.lastMessageFrom,delete c.lastMessageId,delete c.lastMessageTimestamp}):pd.resolve()}).then(function(){return new xm(c,b)})},b.prototype.createConversation=function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c={},d=b.members,e=b.name,f=b.attributes,g=b.transient,h=b.unique;if(!g&&!Array.isArray(d))throw new TypeError("conversation members "+d+" is not an array");if(d=new hi(d),d.add(this.id),d=Mh(d).sort(),e){if("string"!=typeof e)throw new TypeError("conversation name "+e+" is not a string");c.name=e}f&&(c.attr=f),c=new Aj({data:Pf(c)});var i={m:d,attr:c,transient:g,unique:h};return pd.resolve(new Ij({cmd:"conv",op:"start",convMessage:new Ej(i)})).then(function(b){if(a.options.conversationSignatureFactory){var c=[null,a.id,d,"create"];return um(a.options.conversationSignatureFactory,c).then(function(a){return Gd(b.convMessage,Oi({signature:"s",timestamp:"t",nonce:"n"},a)),b})}return b}).then(this._send.bind(this)).then(function(c){return new xm(Gd({},b,{id:c.convMessage.cid,createdAt:c.convMessage.cdate,updatedAt:c.convMessage.cdate,lastMessageAt:null,creator:a.id,members:g?[]:d}),a)}).then(Ki(function(b){return a._conversationCache.set(b.id,b)}))},b.prototype.markAllAsRead=function(a){if(!Array.isArray(a))throw new TypeError(a+" is not an Array");var b=a.map(function(a){if(!(a instanceof xm))throw new TypeError(a+" is not a Conversation");return a.id});return this._debug("mark ["+b+"] as read"),a.length?this._send(new Ij({cmd:"read",readMessage:new Hj({convs:a.map(function(a){return new Gj({cid:a.id,timestamp:(a.lastMessageAt||new Date).getTime()})})})}),!1).then(function(){return a.forEach(function(a){return a.unreadMessagesCount=0}),a}):pd.resolve([])},b}($j),Dm=jf("LC:MessageParser"),Em=function(a,b,c){var d=c.value;c.value=function(a){var b=void 0;if("string"!=typeof a)b=a;else try{b=JSON.parse(a)}catch(c){b=a}return d.call(this,b)}},Fm=function(a,b,c){var d=c.value;c.value=function(a){var b=this;return pd.resolve(a).then(Zj(this._plugins.beforeMessageParse)).then(function(a){return d.call(b,a)}).then(Zj(this._plugins.afterMessageParse))}},Gm=(cj=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Id(this,a),this._plugins=b,this._messageClasses=[]}return a.prototype.register=function(a){if(!(a&&a.parse&&a.prototype&&a.prototype.toJSON))throw new TypeError("Invalid messageClass");this._messageClasses.unshift(a)},a.prototype.parse=function(a){Dm("parsing message:",a);var b=!0,c=!1,d=void 0;try{for(var e,f=Vj(this._messageClasses);!(b=(e=f.next()).done);b=!0){var g=e.value,h=Ii(a)?Gd({},a):a,i=void 0,j=void 0;try{i=g.validate(h)}catch(a){}if(i){try{j=g.parse(h)}catch(a){console.warn("parsing a valid message content error",{error:a,Klass:g,content:h})}if(void 0!==j)return Dm("parse result:",j),j}}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}throw new Error("No Message Class matched")},a}(),f(cj.prototype,"parse",[Em,Fm],lh(cj.prototype,"parse"),cj.prototype),cj),Hm=function(a){if("number"!=typeof a)throw new TypeError(a+" is not a Number");return function(b){b.TYPE=a,b.validate=function(b){return b._lctype===a},b.prototype._getType=function(){return{_lctype:a}}}},Im=function(a){if("string"!=typeof a){if(!Array.isArray(a))throw new TypeError(a+" is not an Array");if(a.some(function(a){return"string"!=typeof a}))throw new TypeError("fields contains non-string typed member")}return function(b){var c=Pi?Qi(b,"_customFields"):b._customFields;c=Array.isArray(c)?c:[],b._customFields=c.concat(a)}},Jm=function(a){Pi&&(a.parse=Qi(a,"parse"))},Km=(dj=Im(["_lctext","_lcattrs"]),dj(ej=function(a){function b(){Id(this,b);var c=ze(this,a.call(this));return c._={},c}return Ue(b,a),b.prototype.setText=function(a){return this._lctext=a,this},b.prototype.getText=function(){return this._lctext},b.prototype.setAttributes=function(a){return this._lcattrs=a,this},b.prototype.getAttributes=function(){return this._lcattrs},b.prototype._getCustomFields=function(){var a=this,b=Array.isArray(this.constructor._customFields)?this.constructor._customFields:[];return b.reduce(function(b,c){return"string"!=typeof c?b:(b[c]=a[c],b)},{})},b.prototype._getType=function(){throw new Error("not implemented")},b.prototype.toJSON=function(){return Gd({_lctext:this.getText(),_lcattrs:this.getAttributes()},this._getCustomFields(),this._getType())},b.parse=function(b){var c=arguments.length<=1||void 0===arguments[1]?new this:arguments[1];c.content=b;var d=Pi?Qi(c.constructor,"_customFields"):c.constructor._customFields,e=Array.isArray(d)?d:[];return e=e.reduce(function(a,c){return"string"!=typeof c?a:(a[c]=b[c],a)},{}),Gd(c,e),a.parse.call(this,b,c)},Fk(b,[{key:"type",get:function(){return this.constructor.TYPE}},{key:"text",set:function(a){return this.setText(a)},get:function(){return this.getText()}},{key:"attributes",set:function(a){return this.setAttributes(a)},get:function(){return this.getAttributes()}}]),b}(vm))||ej),Lm=(fj=Hm(-1),fj(gj=Jm(gj=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(Id(this,b),"string"!=typeof c)throw new TypeError(c+" is not a string");var d=ze(this,a.call(this));return d.setText(c),d}return Ue(b,a),b}(Km))||gj)||gj),Mm=jf("LC:Realtime"),Nm=new Mi("push-router"),Om=function(a){function b(c){Id(this,b),Mm("initializing Realtime");var d=ze(this,a.call(this));if("string"!=typeof c.appId)throw new TypeError("appId ["+c.appId+"] is not a string");return d._options=Gd({appId:void 0,region:"cn",pushOfflineMessages:!1,ssl:!0},c),d._id=fh.v4(),d._cache=new Mi("endpoints"),d._clients={},d._plugins=Xi(c.plugins).reduce(function(a,b){for(var c in b)({}).hasOwnProperty.call(b,c)&&"name"!==c&&(b.name&&Xi(b[c]).forEach(function(a){a._pluginName=b.name}),a[c]=Xi(a[c]).concat(b[c]));return a},{}),d._messageParser=new Gm(d._plugins),d.register([vm,Lm]),Yj(d._plugins.onRealtimeCreate,d),d.register(Xi(d._plugins.messageClasses)),d}return Ue(b,a),b.prototype._open=function(){var a=this;if(this._openPromise)return this._openPromise;var b="protobuf";this._options.noBinary&&(b="protobase64");var c=3;this._options.pushOfflineMessages&&(c=1);var d={format:b,version:c};return this._openPromise=new pd(function(b,c){Mm("No connection established, create a new one.");var e=new Nj(function(){return a._getEndpoints(a._options)},d);e.binaryType="arraybuffer",e.on("open",function(){return b(e)}),e.on("error",c),e.on("message",a._dispatchMessage.bind(a)),["disconnect","reconnect","retry","schedule"].forEach(function(b){return e.on(b,function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];Mm.apply(void 0,[b+" event emitted."].concat(d)),a.emit.apply(a,[b].concat(d))})}),e.handleClose=function(a){var b=Ib([hj,ij,jj],function(b){return b.code===a.code});if(b){var c=new Error(""+(b.message||a.reason));c.code=a.code,this.throw(c)}else this.disconnect()},Ui(a).connection=e}),this._openPromise},b.prototype._getEndpoints=function(a){var b=this;return pd.resolve(this._cache.get("endpoints")||this.constructor._fetchEndpointsInfo(a).then(Ki(function(a){return b._cache.set("endpoints",a,1e3*a.ttl)}))).then(function(a){return Mm("endpoint info:",a),[a.server,a.secondary]})},b._fetchPushRouter=function(a){var b=a.appId,c=a.region;switch(Mm("fetch router"),c){case"cn":var d=Nm.get(b);return d?pd.resolve(d):ah.get("https://app-router.leancloud.cn/1/route",{params:{appId:b},timeout:2e4}).then(function(a){return a.data}).then(Ki(Mm)).then(function(a){var c=a.push_router_server;if(!c)throw new Error("push router not exists");var d=a.ttl;return"number"!=typeof d&&(d=3600),Nm.set(b,c,1e3*d),c}).catch(function(){return"router-g0-push.leancloud.cn"});case"us":return pd.resolve("router-a0-push.leancloud.cn");default:throw new Error("Region ["+c+"] is not supported.")}},b._fetchEndpointsInfo=function(a){var b=a.appId,c=a.region,d=a.ssl,e=a._debug;return Mm("fetch endpoint info"),this._fetchPushRouter({appId:b,region:c}).then(Ki(Mm)).then(function(a){return ah.get("https://"+a+"/v1/route",{params:{appId:b,secure:d,debug:e,_t:Date.now()},timeout:2e4}).then(function(a){return a.data}).then(Ki(Mm))})},b.prototype._close=function(){this._openPromise&&this._openPromise.then(function(a){return a.close()}),delete this._openPromise},b.prototype.retry=function(){var a=Ui(this).connection;if(!a)throw new Error("no connection established");if(a.cannot("retry"))throw new Error("retrying not allowed when not offline. the connection is now "+a.current);return a.retry()},b.prototype._register=function(a){if(!(a instanceof $j))throw new TypeError(a+" is not a Client");if(!a.id)throw new Error("Client must have an id to be registered");this._clients[a.id]=a},b.prototype._deregister=function(a){if(!(a instanceof $j))throw new TypeError(a+" is not a Client");if(!a.id)throw new Error("Client must have an id to be deregistered");delete this._clients[a.id],0===hb(this._clients).length&&this._close()},b.prototype._dispatchMessage=function(a){if(null!==a.peerId){var b=this._clients[a.peerId];return b?pd.resolve(b).then(function(b){return b._dispatchMessage(a)}).catch(Mm):Mm("[WARN] Unexpected message received without any live client match",Wi(a))}return Mm("[WARN] Unexpected message received without peerId",Wi(a))},b.prototype.createIMClient=function(a,b,c){var d=this,e="string"==typeof a;if(e&&void 0!==this._clients[a])return pd.resolve(this._clients[a]);var f=this._open().then(function(e){var f=new Cm(a,b,e,{_messageParser:d._messageParser,_plugins:d._plugins});return e.on("reconnect",function(){return f._open(d._options.appId,c,d._id,!0)}),f.on("close",function(){return d._deregister(f)},d),f._open(d._options.appId,c,d._id).then(function(){return d._register(f),f})});return e&&(this._clients[a]=f),f},b.prototype.register=function(a){return Xi(a).map(this._messageParser.register.bind(this._messageParser))},b}(lf);a.Realtime=Om,a.Message=vm,a.TypedMessage=Km,a.TextMessage=Lm,a.messageType=Hm,a.messageField=Im,a.IE10Compatible=Jm,Object.defineProperty(a,"__esModule",{value:!0})});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("leancloud-storage"),require("leancloud-realtime")):"function"==typeof define&&define.amd?define("typed-messages",["exports","leancloud-storage","leancloud-realtime"],b):b(a.AV=a.AV||{},a.AV,a.AV)}(this,function(a,b,c){"use strict";function d(a,b){return b={exports:{}},a(b,b.exports),b.exports}var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=d(function(a){var b=a.exports={version:"2.4.0"};"number"==typeof __e&&(__e=b)}),g=f&&"object"==typeof f&&"default"in f?f["default"]:f,h=d(function(a){a.exports=function(a){try{return!!a()}catch(b){return!0}}}),i=h&&"object"==typeof h&&"default"in h?h["default"]:h,j=d(function(a){var b={}.toString;a.exports=function(a){return b.call(a).slice(8,-1)}}),k=j&&"object"==typeof j&&"default"in j?j["default"]:j,l=d(function(a){var b=k;a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==b(a)?a.split(""):Object(a)}}),m=l&&"object"==typeof l&&"default"in l?l["default"]:l,n=d(function(a){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}}),o=n&&"object"==typeof n&&"default"in n?n["default"]:n,p=d(function(a){var b=o;a.exports=function(a){return Object(b(a))}}),q=p&&"object"==typeof p&&"default"in p?p["default"]:p,r=d(function(a,b){b.f={}.propertyIsEnumerable}),s=r&&"object"==typeof r&&"default"in r?r["default"]:r,t=d(function(a,b){b.f=Object.getOwnPropertySymbols}),u=t&&"object"==typeof t&&"default"in t?t["default"]:t,v=d(function(a){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),w=v&&"object"==typeof v&&"default"in v?v["default"]:v,x=d(function(a){var b=0,c=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++b+c).toString(36))}}),y=x&&"object"==typeof x&&"default"in x?x["default"]:x,z=d(function(a){var b=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=b)}),A=z&&"object"==typeof z&&"default"in z?z["default"]:z,B=d(function(a){var b=A,c="__core-js_shared__",d=b[c]||(b[c]={});a.exports=function(a){return d[a]||(d[a]={})}}),C=B&&"object"==typeof B&&"default"in B?B["default"]:B,D=d(function(a){var b=C("keys"),c=y;a.exports=function(a){return b[a]||(b[a]=c(a))}}),E=D&&"object"==typeof D&&"default"in D?D["default"]:D,F=d(function(a){var b=Math.ceil,c=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?c:b)(a)}}),G=F&&"object"==typeof F&&"default"in F?F["default"]:F,H=d(function(a){var b=G,c=Math.max,d=Math.min;a.exports=function(a,e){return a=b(a),a<0?c(a+e,0):d(a,e)}}),I=H&&"object"==typeof H&&"default"in H?H["default"]:H,J=d(function(a){var b=G,c=Math.min;a.exports=function(a){return a>0?c(b(a),9007199254740991):0}}),K=J&&"object"==typeof J&&"default"in J?J["default"]:J,L=d(function(a){var b=m,c=o;a.exports=function(a){return b(c(a))}}),M=L&&"object"==typeof L&&"default"in L?L["default"]:L,N=d(function(a){var b=M,c=K,d=I;a.exports=function(a){return function(e,f,g){var h,i=b(e),j=c(i.length),k=d(g,j);if(a&&f!=f){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===f)return a||k||0;return!a&&-1}}}),O=N&&"object"==typeof N&&"default"in N?N["default"]:N,P=d(function(a){var b={}.hasOwnProperty;a.exports=function(a,c){return b.call(a,c)}}),Q=P&&"object"==typeof P&&"default"in P?P["default"]:P,R=d(function(a){var b=Q,c=M,d=O(!1),e=E("IE_PROTO");a.exports=function(a,f){var g,h=c(a),i=0,j=[];for(g in h)g!=e&&b(h,g)&&j.push(g);for(;f.length>i;)b(h,g=f[i++])&&(~d(j,g)||j.push(g));return j}}),S=R&&"object"==typeof R&&"default"in R?R["default"]:R,T=d(function(a){var b=S,c=w;a.exports=Object.keys||function(a){return b(a,c)}}),U=T&&"object"==typeof T&&"default"in T?T["default"]:T,V=d(function(a){var b=U,c=u,d=s,e=q,f=m,g=Object.assign;a.exports=!g||i(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=g({},a)[c]||Object.keys(g({},b)).join("")!=d})?function(a,g){for(var h=e(a),i=arguments.length,j=1,k=c.f,l=d.f;i>j;)for(var m,n=f(arguments[j++]),o=k?b(n).concat(k(n)):b(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(h[m]=n[m]);return h}:g}),W=V&&"object"==typeof V&&"default"in V?V["default"]:V,X=d(function(a){a.exports=!i(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),Y=X&&"object"==typeof X&&"default"in X?X["default"]:X,Z=d(function(a){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}}),$=Z&&"object"==typeof Z&&"default"in Z?Z["default"]:Z,_=d(function(a){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}}),aa=_&&"object"==typeof _&&"default"in _?_["default"]:_,ba=d(function(a){var b=aa;a.exports=function(a,c){if(!b(a))return a;var d,e;if(c&&"function"==typeof(d=a.toString)&&!b(e=d.call(a)))return e;if("function"==typeof(d=a.valueOf)&&!b(e=d.call(a)))return e;if(!c&&"function"==typeof(d=a.toString)&&!b(e=d.call(a)))return e;throw TypeError("Can't convert object to primitive value")}}),ca=ba&&"object"==typeof ba&&"default"in ba?ba["default"]:ba,da=d(function(a){var b=aa,c=A.document,d=b(c)&&b(c.createElement);a.exports=function(a){return d?c.createElement(a):{}}}),ea=da&&"object"==typeof da&&"default"in da?da["default"]:da,fa=d(function(a){a.exports=!Y&&!i(function(){return 7!=Object.defineProperty(ea("div"),"a",{get:function(){return 7}}).a})}),ga=fa&&"object"==typeof fa&&"default"in fa?fa["default"]:fa,ha=d(function(a){var b=aa;a.exports=function(a){if(!b(a))throw TypeError(a+" is not an object!");return a}}),ia=ha&&"object"==typeof ha&&"default"in ha?ha["default"]:ha,ja=d(function(a,b){var c=ia,d=ga,e=ca,f=Object.defineProperty;b.f=Y?Object.defineProperty:function(a,b,g){if(c(a),b=e(b,!0),c(g),d)try{return f(a,b,g)}catch(h){}if("get"in g||"set"in g)throw TypeError("Accessors not supported!");return"value"in g&&(a[b]=g.value),a}}),ka=ja&&"object"==typeof ja&&"default"in ja?ja["default"]:ja,la=d(function(a){var b=ka,c=$;a.exports=Y?function(a,d,e){return b.f(a,d,c(1,e))}:function(a,b,c){return a[b]=c,a}}),ma=la&&"object"==typeof la&&"default"in la?la["default"]:la,na=d(function(a){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}}),oa=na&&"object"==typeof na&&"default"in na?na["default"]:na,pa=d(function(a){var b=oa;a.exports=function(a,c,d){if(b(a),void 0===c)return a;switch(d){case 1:return function(b){return a.call(c,b)};case 2:return function(b,d){return a.call(c,b,d)};case 3:return function(b,d,e){return a.call(c,b,d,e)}}return function(){return a.apply(c,arguments)}}}),qa=pa&&"object"==typeof pa&&"default"in pa?pa["default"]:pa,ra=d(function(a){var b=A,c=g,d=qa,e=ma,f="prototype",h=function(a,g,i){var j,k,l,m=a&h.F,n=a&h.G,o=a&h.S,p=a&h.P,q=a&h.B,r=a&h.W,s=n?c:c[g]||(c[g]={}),t=s[f],u=n?b:o?b[g]:(b[g]||{})[f];n&&(i=g);for(j in i)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:i[j],s[j]=n&&"function"!=typeof u[j]?i[j]:q&&k?d(l,b):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[f]=a[f],b}(l):p&&"function"==typeof l?d(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&h.R&&t&&!t[j]&&e(t,j,l)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,a.exports=h}),sa=ra&&"object"==typeof ra&&"default"in ra?ra["default"]:ra,ta=(d(function(a){var b=sa;b(b.S+b.F,"Object",{assign:W})}),d(function(a){a.exports=g.Object.assign})),ua=ta&&"object"==typeof ta&&"default"in ta?ta["default"]:ta,va=d(function(a){a.exports={"default":ua,__esModule:!0}}),wa=va&&"object"==typeof va&&"default"in va?va["default"]:va;if(!b.File)throw new Error("Please Login!");if(!c.TypedMessage)throw new Error("Realtime SDK not installed");var xa=d(function(a,b){!function(c){function d(a){var b=l(a);if(r)for(var c,d=0;c=u[d++];)a.hasOwnProperty(c)&&b.push(c);return b}function e(a,b,c){for(var e,f,g=d(c),i=0,j=g.length;i<j;)"__self"!==(e=g[i++])&&(f=c[e],p(f)&&(!h||f.toString().indexOf(".__base")>-1)?b[e]=function(c,d){var e=a[c]?a[c]:"__constructor"===c?b.__self.__parent:q,f=function(){var a=this.__base;this.__base=f.__base;var b=d.apply(this,arguments);return this.__base=a,b};return f.__base=e,f}(e,f):b[e]=f)}function f(a,b){for(var c,d=1;c=a[d++];)b?p(c)?g.self(b,c.prototype,c):g.self(b,c):b=p(c)?g(a[0],c.prototype,c):g(a[0],c);return b||a[0]}function g(){var a=arguments,b=o(a[0]),c=b||p(a[0]),d=c?b?f(a[0]):a[0]:i,g=a[c?1:0]||{},h=a[c?2:1],j=g.__constructor||c&&d.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:c?function(){return d.apply(this,arguments)}:function(){};if(!c)return j.prototype=g,j.prototype.__self=j.prototype.constructor=j,m(j,h);m(j,d),j.__parent=d;var l=d.prototype,n=j.prototype=k(l);return n.__self=n.constructor=j,g&&e(l,n,g),h&&e(d,j,h),j}var h=function(){"_"}.toString().indexOf("_")>-1,i=function(){},j=Object.prototype.hasOwnProperty,k=Object.create||function(a){var b=function(){};return b.prototype=a,new b},l=Object.keys||function(a){var b=[];for(var c in a)j.call(a,c)&&b.push(c);return b},m=function(a,b){for(var c in b)j.call(b,c)&&(a[c]=b[c]);return a},n=Object.prototype.toString,o=Array.isArray||function(a){return"[object Array]"===n.call(a)},p=function(a){return"[object Function]"===n.call(a)},q=function(){},r=!0,s={toString:""};for(var t in s)s.hasOwnProperty(t)&&(r=!1);var u=r?["toString","valueOf"]:null;g.self=function(){var a=arguments,b=o(a[0]),c=b?f(a[0],a[0][0]):a[0],d=a[1],g=a[2],h=c.prototype;return d&&e(h,h,d),g&&e(c,c,g),c};var v=!0;"object"==typeof b&&(a.exports=g,v=!1),"object"==typeof modules&&"function"==typeof modules.define&&(modules.define("inherit",function(a){a(g)}),v=!1),"function"==typeof define&&(define(function(a,b,c){c.exports=g}),v=!1),v&&(c.inherit=g)}(e)}),ya=xa&&"object"==typeof xa&&"default"in xa?xa["default"]:xa,za=d(function(a){a.exports=ya}),Aa=za&&"object"==typeof za&&"default"in za?za["default"]:za,Ba=Aa(c.TypedMessage,{__constructor:function(a){if(!(a instanceof b.File))throw new TypeError("file must be an AV.File");if("string"!=typeof a.id)throw new Error("file must be saved before used to create a Message");this.__base(),this._file=a,this._lcfile={objId:a.id,url:a.url(),metaData:wa(a.metaData()||{},{name:a.name()})}},getFile:function(){return this._file}},{_parseFileFromRawData:function(a){if(!a||!a._lcfile)throw new Error("malformed FileMessage content");var c=a._lcfile.objId;"string"!=typeof c&&(c="");var d=b.File.createWithoutData(c);return d.attributes=d.attributes||{},d._url=d.attributes.url=a._lcfile.url,d._metaData=d.attributes.metaData=a._lcfile.metaData||{},a._lcfile.metaData&&(d._name=d.attributes.name=a._lcfile.metaData.name),d},parse:function(a,b){var c=this._parseFileFromRawData(a);return this.__base(a,b||new this(c))}});c.messageType(-6)(Ba),c.messageField("_lcfile")(Ba);var Ca=Aa(Ba);c.messageType(-2)(Ca);var Da=Aa(Ba);c.messageType(-3)(Da);var Ea=Aa(Ba);c.messageType(-4)(Ea);var Fa=Aa(c.TypedMessage,{__constructor:function(a){if(!(a instanceof b.GeoPoint))throw new TypeError("geoPoint must be an AV.GeoPoint");this.__base(),this._geoPoint=a;var c=a.latitude,d=a.longitude;this._lcloc={latitude:c,longitude:d}},getLocation:function(){return this._geoPoint}},{parse:function(a,c){var d=a._lcloc,e=d.latitude,f=d.longitude,g=new b.GeoPoint({latitude:e,longitude:f});return this.__base(a,c||new this(g))}});c.messageType(-5)(Fa),c.messageField("_lcloc")(Fa);var Ga="leancloud-realtime-plugin-typed-messages",Ha={name:Ga,messageClasses:[Ba,Ca,Da,Ea,Fa]};a.TypedMessagesPlugin=Ha,a.FileMessage=Ba,a.ImageMessage=Ca,a.AudioMessage=Da,a.VideoMessage=Ea,a.LocationMessage=Fa,Object.defineProperty(a,"__esModule",{value:!0})});
